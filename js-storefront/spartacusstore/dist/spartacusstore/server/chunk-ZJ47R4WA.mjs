import './polyfills.server.mjs';
import{E as A,I as m,ea as L,ha as g,hc as C}from"./chunk-WYLVLNCF.mjs";import{Aa as b,F as I,Fa as f,Ga as c,Id as j,Ka as r,Kd as S,L as q,La as p,Ra as u,Sa as a,Xc as h,a as v,kb as D,l as d,q as w,x as y,xa as M,xb as l}from"./chunk-LKLG3K6D.mjs";import"./chunk-GHFNAT2I.mjs";var T=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u({type:t,selectors:[["cx-qualtrics-embedded-feedback"]],decls:0,vars:0,template:function(e,n){},encapsulation:2});let i=t;return i})(),x={qualtrics:{}},E="qsi_js_loaded",N=(()=>{let t=class t{get window(){return this.winRef.nativeWindow}constructor(o,e,n){this.winRef=o,this.platformId=e,this.scriptLoader=n,this.subscription=new v,this.logger=p(g),this.qsiLoaded$=S(this.platformId)&&this.window?I(this.window,E):d,this.qsi$=this.qsiLoaded$.pipe(M(()=>this.isDataLoaded()),y(s=>s?this.window?.QSI:d),q(s=>!!s),b(s=>this.qsiApi=s)),this.initialize()}addScript(o){this.hasScript(o)?this.run(!0):this.scriptLoader.embedScript({src:o})}hasScript(o){return!!this.winRef.document.querySelector(`script[src="${o}"]`)}initialize(){this.subscription.add(this.qsi$.subscribe(()=>this.run()))}run(o=!1){if(!this.qsiApi?.API){h()&&this.logger.log("The QSI api is not available");return}o&&this.qsiApi.API.unload(),this.qsiApi.API.load().done(this.qsiApi.API.run())}isDataLoaded(){return w(!0)}ngOnDestroy(){this.subscription?.unsubscribe()}};t.\u0275fac=function(e){return new(e||t)(r(L),r(D),r(C))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),R=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=f({token:t,factory:function(e){let n=null;return e?n=new(e||t):n=r(A),n},providedIn:"root"});let i=t;return i})(),$=(()=>{let t=class t{constructor(o,e){this.qualtricsLoader=o,this.config=e,this.logger=p(g),this.config.qualtrics?.scriptSource?this.qualtricsLoader.addScript(this.config.qualtrics.scriptSource):h()&&this.logger.warn("We're unable to add the Qualtrics deployment code as there is no script source defined in config.qualtrics.scriptSource.")}};t.\u0275fac=function(e){return new(e||t)(l(N),l(R))},t.\u0275cmp=u({type:t,selectors:[["cx-qualtrics"]],decls:0,vars:0,template:function(e,n){},encapsulation:2});let i=t;return i})(),F=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a({type:t}),t.\u0275inj=c({providers:[m({cmsComponents:{QualtricsEmbeddedFeedbackComponent:{component:T},QualtricsComponent:{component:$}}}),m(x)],imports:[j]});let i=t;return i})();var K=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a({type:t}),t.\u0275inj=c({imports:[F]});let i=t;return i})();export{K as QualtricsModule};
