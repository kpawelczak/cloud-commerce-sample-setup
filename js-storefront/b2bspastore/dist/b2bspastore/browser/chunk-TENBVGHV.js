import{a as ce,b as it,c as nt,d as Io,f as ft,g as he}from"./chunk-ZNQYGS4X.js";import{y as bo}from"./chunk-DFHCQCAC.js";import{e as xo}from"./chunk-VDWI7IOY.js";import"./chunk-RCUU6GNS.js";import"./chunk-CFA2XQRN.js";import{a as Un,b as Wt}from"./chunk-GNHSTGT6.js";import"./chunk-3NMFI77G.js";import{C as yo,H as Qt,V as Vn}from"./chunk-BWCDIGIH.js";import{$ as Ie,Aa as mo,Ab as _o,D as ue,E as le,H as tt,K as dt,Ka as Dn,L as Oe,La as _i,M as me,N as gi,O as Ft,Q as gt,U as lo,Y as pe,Z as fi,Zb as ho,_ as be,_b as Co,a as qt,aa as po,b as Kt,d as Le,da as Rt,j as Te,n as Sn,o as ke,oa as go,pa as fo,t as En,ta as Fn,u as wn,v as On,wa as Rn,xb as Nn,ya as mi,yb as Pn,z as An,za as vi,zb as vo}from"./chunk-AKYAGOAQ.js";import{$a as Mr,$b as ge,Aa as ui,Ab as ot,Bb as at,Cb as ct,Cd as Qe,Ce as to,Da as dn,Db as ae,E as ci,Ea as R,Eb as y,Fa as D,Fb as re,Fe as io,Fg as We,G as Ar,Ga as gn,Gb as S,Gc as k,Gd as Z,Ge as De,Hb as vn,I as Y,Ia as Ur,If as we,Ka as Lt,Kc as yn,Ke as no,Me as ro,N as Re,Na as Gr,Nb as ze,Nc as Qr,Ob as Fe,Oe as xn,P as si,Pa as wt,Pb as L,Pc as Wr,Pe as bn,Pf as uo,Qa as fn,Qb as Be,Qc as Hr,Qf as pt,R as O,Rb as Ot,S as pn,Sa as c,Sd as Q,T as Ge,Ta as h,U as Fr,Ub as Br,V as Bt,Vb as _n,W as Rr,Wb as g,Xb as f,Yb as z,Yd as Jr,Zf as In,_ as Dr,_e as lt,a as F,ab as xe,ae as eo,b as V,bb as _,cb as P,ce as At,db as u,dd as st,ea as Nr,eb as li,ec as Xe,ed as Ee,ef as oo,f as $e,fa as Pr,fb as se,fc as Lr,fd as Ze,fe as je,ff as ao,gd as Yr,gf as et,hd as zr,i as Mt,ia as N,if as di,j as ai,jb as d,je as Je,kb as p,kc as kr,kd as ve,la as Ce,lb as I,lc as $t,ld as pi,mb as x,mc as $r,md as _e,n as ln,nb as b,nc as jt,nd as Xr,ob as kt,of as co,og as Tn,pb as $,pg as te,qa as ne,qb as mn,qc as hn,qg as W,ra as M,rb as G,rc as Ue,s as Se,sa as Me,sb as l,sf as so,ta as U,tc as ye,ua as ee,uc as H,v as A,vb as E,vc as jr,w as Or,wc as qr,wd as Zr,x as Ke,xa as Vr,xc as Kr,ya as q,yc as Cn,yd as ut,za as B,zc as J}from"./chunk-UZ26IE7K.js";function ha(n,i){if(n&1){let o=$();x(0),d(1,"div",4)(2,"div",5)(3,"div",6)(4,"label"),y(5),g(6,"cxTranslate"),p(),I(7,"cx-item-counter",7),p(),d(8,"button",8),g(9,"cxTranslate"),g(10,"cxTranslate"),g(11,"cxTranslate"),G("click",function(){R(o);let t=l(2).ngIf,r=l();return D(r.onAddToCart(t.configuration,t.routerData))}),I(12,"cx-icon",9),p()()(),b()}if(n&2){let o=l(2).ngIf,e=l();c(5),re(f(6,5,"configurator.addToCart.quantity")),c(2),u("control",e.quantityControl),c(),E("title",f(9,7,e.getButtonResourceKey(o.routerData,o.configuration))),P("aria-label",f(10,9,e.getButtonResourceKey(o.routerData,o.configuration))+" "+z(11,11,"configurator.a11y.addToCartPrices",e.extractConfigPrices(o.configuration))),c(4),u("type",e.iconType.CART_PLUS)}}function Ca(n,i){if(n&1){let o=$();x(0),d(1,"button",10),g(2,"async"),g(3,"cxTranslate"),g(4,"cxTranslate"),G("click",function(){R(o);let t=l(2).ngIf,r=l();return D(r.onAddToCart(t.configuration,t.routerData))}),y(5),g(6,"async"),g(7,"cxTranslate"),p(),b()}if(n&2){let o=l(2).ngIf,e=l();c(),P("aria-label",f(3,4,e.getButtonResourceKey(o.routerData,o.configuration,f(2,2,e.isQuoteCartActive())))+" "+z(4,6,"configurator.a11y.addToCartPrices",e.extractConfigPrices(o.configuration))),c(4),S(" ",f(7,11,e.getButtonResourceKey(o.routerData,o.configuration,f(6,9,e.isQuoteCartActive())))," ")}}function ya(n,i){if(n&1&&(x(0),d(1,"div",3),_(2,ha,13,14,"ng-container",1)(3,Ca,8,13,"ng-container",1),p(),b()),n&2){let o=l().ngIf,e=l();c(2),u("ngIf",!e.isCartEntry(o.routerData)),c(),u("ngIf",e.isCartEntry(o.routerData))}}function xa(n,i){if(n&1){let o=$();d(0,"div",11)(1,"button",12),G("click",function(){R(o);let t=l(2);return D(t.leaveConfigurationOverview())}),y(2),g(3,"cxTranslate"),p()()}n&2&&(c(2),S(" ",f(3,1,"configurator.addToCart.buttonClose")," "))}function ba(n,i){if(n&1&&(x(0),_(1,ya,4,2,"ng-container",2)(2,xa,4,3,"ng-template",null,0,ge),b()),n&2){let o=i.ngIf,e=ae(3);c(),u("ngIf",!o.routerData.displayOnly)("ngIfElse",e)}}function Ia(n,i){n&1&&(x(0),y(1),g(2,"cxTranslate"),b()),n&2&&(c(),S(" ",f(2,1,"configurator.attribute.defaultRequiredMessage")," "))}function Ta(n,i){n&1&&(x(0),y(1),g(2,"cxTranslate"),b()),n&2&&(c(),S(" ",f(2,1,"configurator.attribute.singleSelectRequiredMessage")," "))}function Sa(n,i){if(n&1&&(d(0,"div",1),g(1,"cxTranslate"),g(2,"cxTranslate"),I(3,"cx-icon",2),_(4,Ia,3,3,"ng-container",3)(5,Ta,3,3,"ng-container",3),p()),n&2){let o=l();E("id",o.createAttributeUiKey("attribute-msg",o.attribute.name)),P("aria-label",o.isUserInput(o.attribute)?f(1,5,"configurator.attribute.defaultRequiredMessage"):f(2,7,"configurator.attribute.singleSelectRequiredMessage")),c(3),u("type",o.iconType.ERROR),c(),u("ngIf",o.isUserInput(o.attribute)),c(),u("ngIf",o.isDropDown(o.attribute))}}var Ea=n=>({item:n});function wa(n,i){n&1&&(x(0),y(1),g(2,"cxTranslate"),b()),n&2&&(c(),S("\xA0... ",f(2,1,"configurator.button.less"),""))}function Oa(n,i){n&1&&(y(0),g(1,"cxTranslate")),n&2&&S(" \xA0... ",f(1,1,"configurator.button.more"),"")}function Aa(n,i){if(n&1){let o=$();d(0,"button",4),G("click",function(){R(o);let t=l(2);return D(t.toggleShowMore())}),_(1,wa,3,3,"ng-container",5)(2,Oa,2,3,"ng-template",null,0,ge),p()}if(n&2){let o=ae(3),e=l(2);E("tabindex",e.tabIndex),c(),u("ngIf",e.showHiddenText)("ngIfElse",o)}}function Fa(n,i){if(n&1&&(x(0),I(1,"span",2),g(2,"cxTranslate"),_(3,Aa,4,3,"button",3),b()),n&2){let o=l();c(),u("innerHTML",o.textToShow,Gr),P("aria-label",z(2,3,"configurator.a11y.itemDescription",L(6,Ea,o.productName))),c(2),u("ngIf",o.showMore)}}var _t=n=>({attribute:n}),Ra=n=>({param:n});function Da(n,i){if(n&1&&(d(0,"div",8),I(1,"cx-icon",9),y(2),g(3,"cxTranslate"),p()),n&2){let o=l();c(),u("type",o.iconTypes.WARNING),c(),S(" ",f(3,2,"configurator.attribute.notVisibleAttributeMsg"),`
`)}}function Na(n,i){if(n&1&&I(0,"cx-configurator-show-more",10),n&2){let o=l();u("text",o.attribute.description)("textSize",o.getAttributeDescriptionLength())("productName",o.getLabel(o.expMode,o.attribute.label,o.attribute.name))("tabIndex",0)}}function Pa(n,i){if(n&1&&I(0,"cx-icon",9),n&2){let o=l(2);u("type",o.iconTypes.WARNING)}}function Va(n,i){if(n&1){let o=$();x(0),d(1,"a",14),g(2,"cxTranslate"),G("click",function(){R(o);let t=l(3);return D(t.navigateToGroup())})("keydown.enter",function(){R(o);let t=l(3);return D(t.navigateToGroup())}),y(3),g(4,"cxTranslate"),p(),b()}if(n&2){let o=l(3);c(),P("aria-label",z(2,2,"configurator.a11y.navigateToConflict",L(7,_t,o.attribute.label))),c(2),S(" ",f(4,5,o.getConflictMessageKey())," ")}}function Ua(n,i){if(n&1&&(x(0),_(1,Va,5,9,"ng-container",13),b()),n&2){let o=l(2),e=ae(15);c(),u("ngIf",o.isNavigationToConflictEnabled())("ngIfElse",e)}}function Ga(n,i){if(n&1&&(d(0,"div",11),g(1,"cxTranslate"),_(2,Pa,1,1,"cx-icon",12)(3,Ua,2,2,"ng-container",13),p()),n&2){let o=l(),e=ae(13);E("id",o.createAttributeUiKey("attribute-msg",o.attribute.name)),P("aria-live",o.isConflictResolutionActive()?"assertive":"off")("aria-atomic",!!o.isConflictResolutionActive())("role",o.isConflictResolutionActive()?"alert":null)("aria-label",o.isConflictResolutionActive()?f(1,8,"configurator.a11y.conflictDetected"):""),c(2),u("ngIf",o.isAttributeGroup()),c(),u("ngIf",o.isAttributeGroup())("ngIfElse",e)}}function Ma(n,i){if(n&1&&(d(0,"div",15),g(1,"cxTranslate"),I(2,"cx-icon",16),y(3),g(4,"cxTranslate"),p()),n&2){let o=l();E("id",o.createAttributeUiKey("attribute-msg",o.attribute.name)),P("aria-label",f(1,4,o.getRequiredMessageKey())),c(2),u("type",o.iconTypes.ERROR),c(),S(" ",f(4,6,o.getRequiredMessageKey()),`
`)}}function Ba(n,i){if(n&1&&I(0,"img",17),n&2){let o=l();E("src",o.image==null?null:o.image.url,wt),E("alt",o.image==null?null:o.image.altText)}}function La(n,i){if(n&1){let o=$();d(0,"a",14),G("click",function(){R(o);let t=l(2);return D(t.navigateToGroup())})("keydown.enter",function(){R(o);let t=l(2);return D(t.navigateToGroup())}),y(1),g(2,"cxTranslate"),p()}if(n&2){let o=l(2);c(),S(" ",f(2,1,o.getConflictMessageKey())," ")}}function ka(n,i){if(n&1&&_(0,La,3,3,"a",18),n&2){let o=l();u("ngIf",o.isNavigationToGroupEnabled)}}function $a(n,i){if(n&1&&(d(0,"div",19),y(1),g(2,"cxTranslate"),p()),n&2){let o=l();c(),S(" ",f(2,1,o.getConflictMessageKey())," ")}}function ja(n,i){if(n&1&&(x(0),d(1,"div",1),g(2,"cxTranslate"),y(3),p(),b()),n&2){let o=l(2);c(),u("ngClass",o.styleClass),P("aria-label",f(2,3,"configurator.a11y.valueSurcharge")),c(2),S(" ",o.price," ")}}function qa(n,i){if(n&1&&(x(0),d(1,"div",2),g(2,"cxTranslate"),y(3),g(4,"cxNumeric"),p(),d(5,"div",3),y(6),p(),b()),n&2){let o=l(2);c(),P("aria-label",f(2,3,"configurator.a11y.valueSurcharge")),c(2),S(" ",o.quantityWithPrice(f(4,5,o.formula==null?null:o.formula.quantity))," "),c(3),re(o.priceTotal)}}function Ka(n,i){if(n&1&&(x(0),_(1,ja,4,5,"ng-container",0)(2,qa,7,7,"ng-container",0),b()),n&2){let o=l();c(),u("ngIf",o.displayPriceOnly()),c(),u("ngIf",o.displayQuantityAndPrice())}}var Qa=n=>({"cx-product-card-selected":n});function Wa(n,i){if(n&1&&(d(0,"div",13),y(1),g(2,"cxTranslate"),p()),n&2){let o=l().ngIf;c(),vn(" ",f(2,2,"configurator.attribute.id"),": ",o.code," ")}}function Ha(n,i){if(n&1&&I(0,"cx-configurator-show-more",14),n&2){let o=l().ngIf;u("text",o.description)("textSize",45)("productName",o.code)("tabIndex",0)}}function Ya(n,i){if(n&1){let o=$();d(0,"cx-configurator-attribute-quantity",23),G("changeQuantity",function(t){R(o);let r=l(3);return D(r.onChangeQuantity(t))}),p()}if(n&2){let o=l(3);u("quantityOptions",o.extractQuantityParameters())}}function za(n,i){if(n&1){let o=$();d(0,"button",27),G("click",function(){R(o);let t=l(5);return D(t.onHandleDeselect())}),y(1),g(2,"cxTranslate"),p()}if(n&2){let o=l(4).ngIf,e=l();u("cxFocus",e.focusConfig),P("aria-label",e.getAriaLabelMultiSelected(o))("aria-describedby",e.createAttributeUiKey("label",e.productCardOptions.attributeName)),c(),S(" ",f(2,4,"configurator.button.remove")," ")}}function Xa(n,i){if(n&1){let o=$();d(0,"button",28),g(1,"async"),G("click",function(){R(o);let t=l(5);return D(t.onHandleSelect())}),y(2),g(3,"cxTranslate"),p()}if(n&2){let o=l(4).ngIf,e=l();u("disabled",e.productCardOptions.disableAllButtons||f(1,5,e.loading$))("cxFocus",e.focusConfig),P("aria-label",e.getAriaLabelMultiUnselected(o))("aria-describedby",e.createAttributeUiKey("label",e.productCardOptions.attributeName)),c(2),S(" ",f(3,7,"configurator.button.add")," ")}}function Za(n,i){if(n&1&&(x(0),_(1,za,3,6,"button",26)(2,Xa,4,9,"ng-template",null,1,ge),b()),n&2){let o=ae(3),e=l(4);c(),u("ngIf",e.productCardOptions==null||e.productCardOptions.productBoundValue==null?null:e.productCardOptions.productBoundValue.selected)("ngIfElse",o)}}function Ja(n,i){if(n&1){let o=$();d(0,"button",28),g(1,"async"),G("click",function(){R(o);let t=l(5);return D(t.onHandleSelect())}),y(2),g(3,"cxTranslate"),p()}if(n&2){let o=l(4).ngIf,e=l();u("disabled",e.productCardOptions.disableAllButtons||f(1,5,e.loading$))("cxFocus",e.focusConfig),P("aria-label",e.getAriaLabelSingleUnselected(o))("aria-describedby",e.createAttributeUiKey("label",e.productCardOptions.attributeName)),c(2),S(" ",f(3,7,"configurator.button.select")," ")}}function ec(n,i){if(n&1){let o=$();d(0,"button",32),g(1,"async"),G("click",function(){R(o);let t=l(7);return D(t.onHandleDeselect())}),y(2),g(3,"cxTranslate"),p()}if(n&2){let o=l(6).ngIf,e=l();u("disabled",e.productCardOptions.hideRemoveButton||f(1,5,e.loading$))("cxFocus",e.focusConfig),P("aria-label",e.getAriaLabelSingleSelected(o))("aria-describedby",e.createAttributeUiKey("label",e.productCardOptions.attributeName)),c(2),S(" ",f(3,7,"configurator.button.deselect")," ")}}function tc(n,i){if(n&1&&(d(0,"span",33),y(1),p()),n&2){let o=l(6).ngIf,e=l();c(),S(" ",e.getAriaLabelSingleSelectedNoButton(o)," ")}}function ic(n,i){if(n&1&&(x(0),_(1,ec,4,9,"button",30)(2,tc,2,1,"span",31),b()),n&2){let o=l(6);c(),u("ngIf",!(o.productCardOptions!=null&&o.productCardOptions.hideRemoveButton)),c(),u("ngIf",o.productCardOptions==null?null:o.productCardOptions.hideRemoveButton)}}function nc(n,i){if(n&1&&_(0,ic,3,2,"ng-container",3),n&2){let o=l(5);u("ngIf",o.isValueCodeDefined(o.productCardOptions==null||o.productCardOptions.productBoundValue==null?null:o.productCardOptions.productBoundValue.valueCode))}}function rc(n,i){if(n&1&&_(0,Ja,4,9,"button",29)(1,nc,1,1,"ng-template",null,2,ge),n&2){let o=ae(2),e=l(4);u("ngIf",!(!(e.productCardOptions==null||e.productCardOptions.productBoundValue==null)&&e.productCardOptions.productBoundValue.selected))("ngIfElse",o)}}function oc(n,i){if(n&1&&(d(0,"div",24),_(1,Za,4,2,"ng-container",25)(2,rc,3,2,"ng-template",null,0,ge),p()),n&2){let o=ae(3),e=l(3);c(),u("ngIf",e.productCardOptions==null?null:e.productCardOptions.multiSelect)("ngIfElse",o)}}function ac(n,i){if(n&1&&(d(0,"div",15)(1,"div",16)(2,"div",17),_(3,Ya,1,1,"cx-configurator-attribute-quantity",18),p(),d(4,"div",19),I(5,"cx-configurator-price",20),p()(),d(6,"div",21),_(7,oc,4,2,"div",22),p()()),n&2){let o=l(2);c(3),u("ngIf",o.showQuantity),c(2),u("formula",o.extractPriceFormulaParameters()),c(2),u("ngIf",!(o.productCardOptions!=null&&o.productCardOptions.singleDropdown))}}function cc(n,i){if(n&1&&(x(0),d(1,"div",34),I(2,"cx-icon",35),y(3),g(4,"cxTranslate"),p(),b()),n&2){let o=l(2);c(),E("id",o.createAttributeUiKey("attribute-msg",o.productCardOptions.attributeName)),c(2),S(" ",f(4,2,"configurator.attribute.deselectionNotPossible")," ")}}function sc(n,i){if(n&1&&(x(0),d(1,"div",4),g(2,"cxTranslate"),d(3,"div",5)(4,"div",6),I(5,"cx-media",7),p(),d(6,"div",8)(7,"div",9)(8,"p"),y(9),p()(),_(10,Wa,3,4,"div",10)(11,Ha,1,4,"cx-configurator-show-more",11),p()(),_(12,ac,8,3,"div",12)(13,cc,5,4,"ng-container",3),p(),b()),n&2){let o=i.ngIf,e=l();c(),u("ngClass",L(11,Qa,e.isProductCardSelected())),P("aria-label",z(2,8,"configurator.a11y.itemOfAttribute",L(13,_t,e.productCardOptions.attributeLabel))),c(4),u("container",o.images==null?null:o.images.PRIMARY),c(4),S(" ",o.name," "),c(),u("ngIf",o.code),c(),u("ngIf",o.description&&o.code),c(),u("ngIf",!e.productCardOptions.singleDropdown||e.hasPriceDisplay()),c(),u("ngIf",e.showDeselectionNotPossible)}}var Ne=n=>({key:n});function uc(n,i){if(n&1){let o=$();d(0,"div",5)(1,"cx-configurator-attribute-quantity",6),G("changeQuantity",function(t){R(o);let r=l(2);return D(r.onChangeQuantity(t))}),p(),I(2,"cx-configurator-price",7),p()}if(n&2){let o=l(2);c(),u("quantityOptions",o.extractQuantityParameters(o.attribute.quantity,!o.attribute.required)),c(),u("formula",o.extractPriceFormulaParameters())}}function lc(n,i){if(n&1&&I(0,"cx-configurator-show-more",15),n&2){let o=l().$implicit,e=l(2);u("text",o.description)("textSize",e.getValueDescriptionLength())("productName",e.getLabel(e.expMode,o.valueDisplay,o.valueCode))("tabIndex",0)}}function pc(n,i){if(n&1){let o=$();d(0,"cx-configurator-attribute-quantity",6),G("changeQuantity",function(t){R(o);let r=l(),a=r.$implicit,s=r.index,C=l(2);return D(C.onChangeValueQuantity(t,a.valueCode,s))}),p()}if(n&2){let o=l().$implicit,e=l(2);u("quantityOptions",e.extractQuantityParameters(o.quantity,e.allowZeroValueQuantity))}}function dc(n,i){if(n&1){let o=$();x(0),d(1,"div",8)(2,"div",9)(3,"input",10),G("change",function(){let t=R(o).$implicit,r=l(2);return D(r.onSelect(t.valueCode))}),p(),d(4,"label",11),y(5),p(),_(6,lc,1,4,"cx-configurator-show-more",12),p(),d(7,"div",13),I(8,"cx-configurator-price",7),p()(),_(9,pc,1,1,"cx-configurator-attribute-quantity",14),b()}if(n&2){let o=i.$implicit,e=i.index,t=l().ngIf,r=l();c(3),E("id",r.createAttributeValueIdForConfigurator(r.attribute,o.valueCode)),E("name",r.createAttributeIdForConfigurator(r.attribute)),u("cxFocus",L(14,Ne,r.attribute.name+"-"+o.name))("value",o.valueCode)("formControl",r.attributeCheckBoxForms[e]),P("aria-label",r.getAriaLabelGeneric(r.attribute,r.enrichValueWithPrice(o,t)))("aria-describedby",r.createAttributeUiKey("label",r.attribute.name))("aria-live",r.isLastSelected(r.attribute.name,o.valueCode)?"polite":null),c(),E("id",r.createValueUiKey("label",r.attribute.name,o.valueCode)),E("for",r.createAttributeValueIdForConfigurator(r.attribute,o.valueCode)),c(),re(r.getLabel(r.expMode,o.valueDisplay,o.valueCode)),c(),u("ngIf",o.description),c(2),u("formula",r.extractValuePriceFormulaParameters(r.enrichValueWithPrice(o,t))),c(),u("ngIf",o.selected&&r.withQuantity&&!r.withQuantityOnAttributeLevel)}}function gc(n,i){if(n&1&&(d(0,"div",2),_(1,uc,3,2,"div",3)(2,dc,10,16,"ng-container",4),p()),n&2){let o=l();E("id",o.createAttributeIdForConfigurator(o.attribute)),c(),u("ngIf",o.withQuantityOnAttributeLevel),c(),u("ngForOf",o.attribute.values)}}function fc(n,i){if(n&1&&I(0,"cx-configurator-show-more",10),n&2){let o=l(2);u("text",o.attributeValue.description)("textSize",o.getValueDescriptionLength())("productName",o.getLabel(o.expMode,o.attributeValue.valueDisplay,o.attributeValue.valueCode))("tabIndex",0)}}function mc(n,i){if(n&1){let o=$();d(0,"div",3)(1,"div",4)(2,"input",5),G("change",function(){R(o);let t=l();return D(t.onSelect(t.attributeValue.valueCode))}),p(),d(3,"label",6),y(4),p(),_(5,fc,1,4,"cx-configurator-show-more",7),p(),d(6,"div",8),I(7,"cx-configurator-price",9),p()()}if(n&2){let o=i.ngIf,e=l();c(2),E("id",e.createAttributeValueIdForConfigurator(e.attribute,e.attributeValue.valueCode)),E("name",e.createAttributeIdForConfigurator(e.attribute)),u("value",e.attributeValue.valueCode)("cxFocus",L(13,Ne,e.attribute.name+"-"+e.attributeValue.name))("formControl",e.attributeCheckBoxForm),P("aria-label",e.getAriaLabelGeneric(e.attribute,e.enrichValueWithPrice(e.attributeValue,o)))("aria-live",e.isLastSelected(e.attribute.name,e.attributeValue.valueCode)?"polite":null)("aria-describedby",e.createAttributeUiKey("label",e.attribute.name)),c(),E("id",e.createValueUiKey("label",e.attribute.name,e.attributeValue.valueCode)),E("for",e.createAttributeValueIdForConfigurator(e.attribute,e.attributeValue.valueCode)),c(),re(e.getLabel(e.expMode,e.attributeValue.valueDisplay,e.attributeValue.valueCode)),c(),u("ngIf",e.attributeValue.description),c(2),u("formula",e.extractValuePriceFormulaParameters(e.enrichValueWithPrice(e.attributeValue,o)))}}var ri=n=>({"cx-required-error-msg ":n}),zt=(n,i)=>({value:n,attribute:i});function vc(n,i){if(n&1&&(I(0,"label",3),g(1,"cxTranslate"),g(2,"cxTranslate")),n&2){let o=l();E("id",o.createAttributeUiKey("labelForDate",o.attribute.name)),P("aria-label",o.isUserInputEmpty?z(1,2,"configurator.a11y.valueOfDateAttributeBlank",L(8,_t,o.attribute.label)):z(2,5,"configurator.a11y.valueOfDateAttributeFull",Be(10,zt,o.attribute.userInput,o.attribute.label)))}}var _c=n=>({pattern:n});function hc(n,i){if(n&1&&(d(0,"label",4),y(1),p()),n&2){let o=l();c(),re(o.getHelpTextForInterval())}}function Cc(n,i){if(n&1&&(d(0,"div",5),I(1,"cx-icon",6),y(2),g(3,"cxTranslate"),p()),n&2){let o=l();E("id",o.createAttributeUiKey("attribute-msg",o.attribute.name)),c(),u("type",o.iconType.ERROR),c(),S(" ",z(3,3,"configurator.attribute.wrongNumericFormatMessage",L(6,_c,o.numericFormatPattern)),`
`)}}function yc(n,i){if(n&1&&(d(0,"div",5),I(1,"cx-icon",6),y(2),g(3,"cxTranslate"),p()),n&2){let o=l();E("id",o.createAttributeUiKey("attribute-msg",o.attribute.name)),c(),u("type",o.iconType.ERROR),c(),S(" ",f(3,3,"configurator.attribute.wrongIntervalFormat"),`
`)}}var tn=n=>({count:n});function xc(n,i){if(n&1&&(d(0,"option",9),y(1),p()),n&2){let o=i.$implicit,e=l(4);u("selected",o.selected)("label",e.getLabel(e.expMode,o.valueDisplay,o.valueCode,o))("value",o.valueCode),P("aria-label",e.getAriaLabel(o,e.attribute)),c(),S(" ",e.getLabel(e.expMode,o.valueDisplay,o.valueCode,o)," ")}}function bc(n,i){if(n&1){let o=$();x(0),d(1,"select",7),g(2,"async"),G("change",function(){R(o);let t=l(3);return D(t.onSelect(t.attributeDropDownForm.value))}),_(3,xc,2,5,"option",8),p(),b()}if(n&2){let o=l(3);c(),E("id",o.createAttributeIdForConfigurator(o.attribute)),u("ngClass",L(8,ri,f(2,6,o.showRequiredErrorMessage$)))("formControl",o.attributeDropDownForm)("cxFocus",L(10,Ne,o.attribute.name)),P("aria-describedby",o.createAttributeUiKey("label",o.attribute.name)),c(2),u("ngForOf",o.attribute.values)}}function Ic(n,i){if(n&1&&(d(0,"option",9),y(1),p()),n&2){let o=i.$implicit,e=l(3).ngIf,t=l();u("selected",o.selected)("label",t.getLabel(t.expMode,o.valueDisplay,o.valueCode,t.enrichValueWithPrice(o,e)))("value",o.valueCode),P("aria-label",t.getAriaLabel(o,t.attribute)),c(),S(" ",t.getLabel(t.expMode,o.valueDisplay,o.valueCode,t.enrichValueWithPrice(o,e))," ")}}function Tc(n,i){if(n&1&&I(0,"cx-configurator-show-more",12),n&2){let o,e=l(4);u("text",e.getSelectedValueDescription())("textSize",e.getValueDescriptionLength())("productName",e.getLabel(e.expMode,(o=e.getSelectedValue())==null?null:o.valueDisplay,(o=e.getSelectedValue())==null?null:o.valueCode,e.getSelectedValue()))("tabIndex",0)}}function Sc(n,i){if(n&1){let o=$();x(0),d(1,"div",10)(2,"select",7),g(3,"async"),G("change",function(){R(o);let t=l(3);return D(t.onSelect(t.attributeDropDownForm.value))}),_(4,Ic,2,5,"option",8),p(),_(5,Tc,1,4,"cx-configurator-show-more",11),p(),b()}if(n&2){let o=l(3);c(2),E("id",o.createAttributeIdForConfigurator(o.attribute)),u("ngClass",L(9,ri,f(3,7,o.showRequiredErrorMessage$)))("formControl",o.attributeDropDownForm)("cxFocus",L(11,Ne,o.attribute.name)),P("aria-describedby",o.createAttributeUiKey("label",o.attribute.name)),c(2),u("ngForOf",o.attribute.values),c(),u("ngIf",o.getSelectedValueDescription())}}function Ec(n,i){if(n&1&&(d(0,"div",13),I(1,"cx-configurator-price",14),p()),n&2){let o=l(2).ngIf,e=l();c(),u("formula",e.extractValuePriceFormulaParameters(e.enrichValueWithPrice(e.getSelectedValue(),o)))}}function wc(n,i){if(n&1&&(d(0,"div",4)(1,"label",5),y(2),g(3,"cxTranslate"),p(),_(4,bc,4,12,"ng-container",0)(5,Sc,6,13,"ng-container",0)(6,Ec,2,1,"div",6),p()),n&2){let o=l(2);c(),E("for",o.createAttributeIdForConfigurator(o.attribute)),c(),S(" ",z(3,5,"configurator.a11y.listbox",L(8,tn,o.attribute.values.length))," "),c(2),u("ngIf",!(o.config.features!=null&&o.config.features.productConfiguratorAttributeTypesV2)),c(),u("ngIf",o.config.features==null?null:o.config.features.productConfiguratorAttributeTypesV2),c(),u("ngIf",!o.withQuantity&&o.getSelectedValue())}}function Oc(n,i){if(n&1&&I(0,"cx-configurator-price",14),n&2){let o=l(3);u("formula",o.extractPriceFormulaParameters())}}function Ac(n,i){if(n&1){let o=$();d(0,"div",15)(1,"cx-configurator-attribute-quantity",16),G("changeQuantity",function(t){R(o);let r=l(2);return D(r.onChangeQuantity(t,r.attributeDropDownForm))}),p(),_(2,Oc,1,1,"cx-configurator-price",17),p()}if(n&2){let o=l(2);c(),u("quantityOptions",o.extractQuantityParameters(o.attributeDropDownForm)),c(),u("ngIf",o.getSelectedValuePrice())}}function Fc(n,i){if(n&1&&(x(0),_(1,wc,7,10,"div",2)(2,Ac,3,2,"div",3),b()),n&2){let o=l();c(),u("ngIf",o.attribute.values&&o.attribute.values.length!==0),c(),u("ngIf",o.withQuantity)}}function Rc(n,i){n&1&&(I(0,"cx-configurator-attribute-numeric-input-field",18),g(1,"cxTranslate")),n&2&&P("aria-label",f(1,1,"configurator.a11y.additionalValue"))}function Dc(n,i){n&1&&(I(0,"cx-configurator-attribute-input-field",18),g(1,"cxTranslate")),n&2&&P("aria-label",f(1,1,"configurator.a11y.additionalValue"))}function Nc(n,i){if(n&1){let o=$();d(0,"div",4)(1,"cx-configurator-attribute-quantity",5),G("changeQuantity",function(t){R(o);let r=l(2);return D(r.onChangeAttributeQuantity(t))}),p(),I(2,"cx-configurator-price",6),p()}if(n&2){let o=l(2);c(),u("quantityOptions",o.extractQuantityParameters(o.attribute.quantity)),c(),u("formula",o.extractPriceFormulaParameters())}}function Pc(n,i){if(n&1){let o=$();d(0,"cx-configurator-attribute-product-card",7),g(1,"async"),g(2,"async"),G("handleDeselect",function(t){R(o);let r=l(2);return D(r.onDeselect(t))})("handleQuantity",function(t){R(o);let r=l(2);return D(r.onChangeValueQuantity(t))})("handleSelect",function(t){R(o);let r=l(2);return D(r.onSelect(t))}),p()}if(n&2){let o=i.$implicit,e=i.index,t=l(2);E("id",t.createAttributeValueIdForConfigurator(t.attribute,o.valueCode)),u("productCardOptions",t.extractProductCardParameters(f(1,2,t.loading$),f(2,4,t.preventAction$),o,e))}}function Vc(n,i){if(n&1&&(d(0,"div",1),_(1,Nc,3,2,"div",2)(2,Pc,3,6,"cx-configurator-attribute-product-card",3),p()),n&2){let o=l();E("id",o.createAttributeIdForConfigurator(o.attribute)),c(),u("ngIf",o.withQuantityOnAttributeLevel),c(),u("ngForOf",o.attribute==null?null:o.attribute.values)}}var Uc=()=>({placement:"auto",class:"cx-value-description",appendToBody:!0,displayCloseButton:!0});function Gc(n,i){if(n&1&&I(0,"img",10),n&2){let o=i.ngIf;E("src",o==null?null:o.url,wt),E("alt",o==null?null:o.altText)}}function Mc(n,i){n&1&&I(0,"div",11)}function Bc(n,i){if(n&1){let o=$();d(0,"div",3)(1,"input",4),G("click",function(){let t=R(o).index,r=l(2);return D(r.onSelect(t))}),p(),d(2,"div",5)(3,"label",6),_(4,Gc,1,2,"img",7)(5,Mc,1,0,"div",8),y(6),I(7,"cx-configurator-price",9),p()()()}if(n&2){let o=i.$implicit,e=i.index,t=l().ngIf,r=l();E("id",r.createAttributeValueIdForConfigurator(r.attribute,o.valueCode)),c(),E("id",r.createAttributeValueIdForConfigurator(r.attribute,o.valueCode)+"-input"),E("name",r.createAttributeIdForConfigurator(r.attribute)),u("value",o.valueCode)("formControl",r.attributeCheckBoxForms[e])("cxFocus",L(16,Ne,r.attribute.name+"-"+o.name)),P("aria-label",r.getAriaLabelGeneric(r.attribute,r.enrichValueWithPrice(o,t)))("aria-live",r.isLastSelected(r.attribute.name,o.valueCode)?"polite":null)("aria-describedby",r.createAttributeUiKey("label",r.attribute.name))("checked",r.attributeCheckBoxForms[e].value?"checked":null),c(2),E("id",r.createValueUiKey("label",r.attribute.name,o.valueCode)),E("for",r.createAttributeValueIdForConfigurator(r.attribute,o.valueCode)+"-input"),c(),u("ngIf",r.getImage(o)),c(),u("ngIf",!r.getImage(o)),c(),S(" ",r.getLabel(r.expMode,o.valueDisplay,o.valueCode)," "),c(),u("formula",r.extractValuePriceFormulaParameters(r.enrichValueWithPrice(o,t)))}}function Lc(n,i){if(n&1&&(x(0),_(1,Bc,8,18,"div",2),b()),n&2){let o=l();c(),u("ngForOf",o.attribute.values)}}function kc(n,i){if(n&1&&I(0,"img",18),n&2){let o=i.ngIf,e=l(2).$implicit,t=l(2);E("src",o==null?null:o.url,wt),E("alt",o==null?null:o.altText),u("ngClass",t.getImgStyleClasses(t.attribute,e,"cx-img"))}}function $c(n,i){if(n&1&&I(0,"div",19),n&2){let o=l(2).$implicit,e=l(2);u("ngClass",e.getImgStyleClasses(e.attribute,o,"cx-img-dummy"))}}function jc(n,i){if(n&1&&(d(0,"button",20),g(1,"cxTranslate"),I(2,"cx-icon",21),p()),n&2){let o=l(2).$implicit,e=l(2);u("cxPopover",o.description)("cxPopoverOptions",Fe(6,Uc)),P("aria-label",f(1,4,"configurator.a11y.description")),c(2),u("type",e.iconTypes.INFO)}}function qc(n,i){if(n&1){let o=$();d(0,"div",3)(1,"input",4),G("click",function(){R(o);let t=l().index,r=l(2);return D(!r.isReadOnly(r.attribute)&&r.onSelect(t))}),p(),d(2,"div",5)(3,"label",14),_(4,kc,1,3,"img",15)(5,$c,1,1,"div",16),y(6),_(7,jc,3,7,"button",17),I(8,"cx-configurator-price",9),p()()()}if(n&2){let o=l(),e=o.$implicit,t=o.index,r=l().ngIf,a=l();E("id",a.createAttributeValueIdForConfigurator(a.attribute,e.valueCode)),c(),E("id",a.createAttributeValueIdForConfigurator(a.attribute,e.valueCode)+"-input"),E("name",a.createAttributeIdForConfigurator(a.attribute)),u("value",e.valueCode)("formControl",a.attributeCheckBoxForms[t])("cxFocus",L(20,Ne,a.attribute.name+"-"+e.name)),P("aria-label",a.getAriaLabelGeneric(a.attribute,a.enrichValueWithPrice(e,r)))("aria-live",a.isLastSelected(a.attribute.name,e.valueCode)?"polite":null)("aria-describedby",a.createAttributeUiKey("label",a.attribute.name))("checked",a.attributeCheckBoxForms[t].value?"checked":null),c(2),li("cursor",a.isReadOnly(a.attribute)?"default":"pointer"),E("id",a.createValueUiKey("label",a.attribute.name,e.valueCode)),E("for",a.createAttributeValueIdForConfigurator(a.attribute,e.valueCode)+"-input"),E("title",a.getLabel(a.expMode,e.valueDisplay,e.valueCode)),c(),u("ngIf",a.getImage(e)),c(),u("ngIf",!a.getImage(e)),c(),S(" ",a.getImageLabel(a.expMode,e.valueDisplay,e.valueCode)," "),c(),u("ngIf",e.description),c(),u("formula",a.extractValuePriceFormulaParameters(a.enrichValueWithPrice(e,r)))}}function Kc(n,i){if(n&1&&(x(0),_(1,qc,9,22,"div",13),b()),n&2){let o=i.$implicit,e=l(2);c(),u("ngIf",e.isValueDisplayed(e.attribute,o))}}function Qc(n,i){if(n&1&&(x(0),_(1,Kc,2,1,"ng-container",12),b()),n&2){let o=l();c(),u("ngForOf",o.attribute.values)}}function Wc(n,i){if(n&1&&I(0,"cx-configurator-price",8),n&2){let o=l(2);u("formula",o.extractPriceFormulaParameters())}}function Hc(n,i){if(n&1){let o=$();d(0,"div",5)(1,"cx-configurator-attribute-quantity",6),G("changeQuantity",function(t){R(o);let r=l();return D(r.onChangeQuantity(t))}),p(),_(2,Wc,1,1,"cx-configurator-price",7),p()}if(n&2){let o=l();c(),u("quantityOptions",o.extractQuantityParameters()),c(),u("ngIf",o.getSelectedValuePrice())}}function Yc(n,i){if(n&1&&I(0,"cx-configurator-show-more",16),n&2){let o=l().$implicit,e=l(2);u("text",o.description)("textSize",e.getValueDescriptionLength())("productName",e.getLabel(e.expMode,o.valueDisplay,o.valueCode))("tabIndex",0)}}function zc(n,i){if(n&1){let o=$();d(0,"div",10)(1,"div",11)(2,"input",12),G("change",function(){let t=R(o).$implicit,r=l(2);return D(r.onSelect(t.valueCode))}),p(),d(3,"label",13),y(4),p(),_(5,Yc,1,4,"cx-configurator-show-more",14),p(),d(6,"div",15),I(7,"cx-configurator-price",8),p()()}if(n&2){let o=i.$implicit,e=l().ngIf,t=l();c(2),E("id",t.createAttributeValueIdForConfigurator(t.attribute,o.valueCode)),E("name",t.createAttributeIdForConfigurator(t.attribute)),u("formControl",t.attributeRadioButtonForm)("value",o.valueCode)("cxFocus",L(16,Ne,t.attribute.name+"-"+o.name)),P("required",t.attribute.required===!0?"required":null)("name",t.createAttributeIdForConfigurator(t.attribute))("aria-label",t.getAriaLabel(t.enrichValueWithPrice(o,e),t.attribute))("aria-live",t.listenForPriceChanges&&t.attributeRadioButtonForm.value===o.valueCode?"polite":null)("checked",t.attributeRadioButtonForm.value===o.valueCode?"checked":null)("aria-describedby",t.createAttributeUiKey("label",t.attribute.name)),c(),E("id",t.createValueUiKey("label",t.attribute.name,o.valueCode)),E("for",t.createAttributeValueIdForConfigurator(t.attribute,o.valueCode)),c(),re(t.getLabel(t.expMode,o.valueDisplay,o.valueCode)),c(),u("ngIf",o.description),c(2),u("formula",t.extractValuePriceFormulaParameters(t.enrichValueWithPrice(o,e)))}}function Xc(n,i){if(n&1&&(x(0),_(1,zc,8,18,"div",9),b()),n&2){let o=l();c(),u("ngForOf",o.attribute.values)}}function Zc(n,i){n&1&&I(0,"cx-configurator-attribute-numeric-input-field",17)}function Jc(n,i){n&1&&I(0,"cx-configurator-attribute-input-field",17)}function es(n,i){if(n&1&&I(0,"cx-configurator-show-more",12),n&2){let o=l(2).$implicit,e=l(2);u("text",o.description)("textSize",e.getValueDescriptionLength())("productName",e.getLabel(e.expMode,o.valueDisplay,o.valueCode))("tabIndex",0)}}function ts(n,i){if(n&1&&(d(0,"div",5)(1,"span",6),y(2),p(),d(3,"div",7)(4,"label",8),y(5),p(),_(6,es,1,4,"cx-configurator-show-more",9),p(),d(7,"div",10),I(8,"cx-configurator-price",11),p()()),n&2){let o=i.ngIf,e=l().$implicit,t=l(2);c(),E("id",t.createValueUiKey("aria-label",t.attribute.name,e.valueCode)),c(),S(" ",t.getAriaLabel(t.attribute,t.enrichValueWithPrice(e,o))," "),c(2),E("id",t.createValueUiKey("label",t.attribute.name,e.valueCode)),c(),re(t.getLabel(t.expMode,e.valueDisplay,e.valueCode)),c(),u("ngIf",e.description),c(2),u("formula",t.extractValuePriceFormulaParameters(t.enrichValueWithPrice(e,o)))}}function is(n,i){if(n&1&&(x(0),_(1,ts,9,6,"div",4),g(2,"async"),b()),n&2){let o=i.$implicit,e=l(2);c(),u("ngIf",o.selected&&f(2,1,e.changedPrices$))}}function ns(n,i){if(n&1&&(x(0),_(1,is,3,3,"ng-container",3),b()),n&2){let o=l();c(),u("ngForOf",o.attribute.values)}}function rs(n,i){if(n&1&&(x(0),d(1,"span",6),y(2),p(),d(3,"div",14)(4,"span",15),y(5),p()(),b()),n&2){let o=l(2);c(),E("id",o.createValueUiKey("aria-label",o.attribute.name,o.attribute.selectedSingleValue)),c(),S(" ",o.getAriaLabel(o.attribute)," "),c(3),re(o.attribute.selectedSingleValue)}}function os(n,i){if(n&1&&(x(0),d(1,"span",6),y(2),p(),d(3,"div",14)(4,"span",15),y(5),p()(),b()),n&2){let o=l(2);c(),E("id",o.createValueUiKey("aria-label",o.attribute.name,o.attribute.userInput)),c(),S(" ",o.getAriaLabel(o.attribute)," "),c(3),re(o.attribute.userInput)}}function as(n,i){if(n&1&&_(0,rs,6,3,"ng-container",13)(1,os,6,3,"ng-container",13),n&2){let o=l();u("ngIf",o.attribute.selectedSingleValue),c(),u("ngIf",o.attribute.userInput)}}var Gn=(n,i,o)=>({value:n,attribute:i,price:o});function cs(n,i){if(n&1&&(d(0,"option",7),g(1,"cxTranslate"),g(2,"cxTranslate"),g(3,"cxTranslate"),y(4),p()),n&2){let o,e=i.$implicit,t=l(2);u("label",t.getLabel(!1,e.valueDisplay,void 0,e))("selected",e.selected)("value",e.valueCode)("value",e.valueCode),P("aria-label",t.isRetractValue(e.valueCode)?z(1,6,"configurator.a11y.forAttribute",Be(15,zt,e.valueDisplay,t.attribute.label)):e.valuePrice&&(e.valuePrice==null?null:e.valuePrice.value)!==0?z(2,9,"configurator.a11y.selectedValueOfAttributeFullWithPrice",Ot(18,Gn,e.valueDisplay,t.attribute.label,(o=e.valuePriceTotal==null?null:e.valuePriceTotal.formattedValue)!==null&&o!==void 0?o:0)):z(3,12,"configurator.a11y.selectedValueOfAttributeFull",Be(22,zt,e.valueDisplay,t.attribute.label))),c(4),S(" ",t.getLabel(!1,e.valueDisplay,void 0,e)," ")}}function ss(n,i){if(n&1){let o=$();d(0,"div",3)(1,"label",4),y(2),g(3,"cxTranslate"),p(),d(4,"select",5),g(5,"async"),G("change",function(){R(o);let t=l();return D(t.onSelect(t.attributeDropDownForm.value))}),_(6,cs,5,25,"option",6),p()()}if(n&2){let o=l();c(),E("for",o.createAttributeIdForConfigurator(o.attribute)),c(),S(" ",z(3,8,"configurator.a11y.listbox",L(13,tn,o.attribute.values==null?null:o.attribute.values.length))," "),c(2),E("id",o.createAttributeIdForConfigurator(o.attribute)),u("ngClass",L(15,ri,f(5,11,o.showRequiredErrorMessage$)))("formControl",o.attributeDropDownForm)("cxFocus",L(17,Ne,o.attribute.name)),P("aria-describedby",o.createAttributeUiKey("label",o.attribute.name)),c(2),u("ngForOf",o.attribute.values)}}function us(n,i){if(n&1){let o=$();d(0,"cx-configurator-attribute-product-card",8),G("handleDeselect",function(){R(o);let t=l();return D(t.onSelect(t.RETRACT_VALUE_CODE))}),p()}if(n&2){let o=l();E("id",o.createAttributeValueIdForConfigurator(o.attribute,o.selectedValue.valueCode)),u("productCardOptions",o.extractProductCardParameters())}}function ls(n,i){if(n&1){let o=$();d(0,"div",9)(1,"cx-configurator-attribute-quantity",10),G("changeQuantity",function(t){R(o);let r=l();return D(r.onChangeQuantity(t,r.attributeDropDownForm))}),p(),I(2,"cx-configurator-price",11),p()}if(n&2){let o=l();c(),u("quantityOptions",o.extractQuantityParameters(o.attributeDropDownForm)),c(),u("formula",o.extractPriceFormulaParameters())}}function ps(n,i){if(n&1){let o=$();d(0,"div",4)(1,"cx-configurator-attribute-quantity",5),G("changeQuantity",function(t){R(o);let r=l(2);return D(r.onChangeQuantity(t))}),p(),I(2,"cx-configurator-price",6),p()}if(n&2){let o=l(2);c(),u("quantityOptions",o.extractQuantityParameters()),c(),u("formula",o.extractPriceFormulaParameters())}}function ds(n,i){if(n&1){let o=$();d(0,"cx-configurator-attribute-product-card",7),G("handleDeselect",function(){R(o);let t=l(2);return D(t.onSelect(""))})("handleSelect",function(t){R(o);let r=l(2);return D(r.onSelect(t))}),p()}if(n&2){let o=i.$implicit,e=i.index,t=l(2);u("id",t.createAttributeValueIdForConfigurator(t.attribute,o.valueCode))("productCardOptions",t.extractProductCardParameters(o,e))}}function gs(n,i){if(n&1&&(d(0,"div",1),_(1,ps,3,2,"div",2)(2,ds,1,2,"cx-configurator-attribute-product-card",3),p()),n&2){let o=l();E("id",o.createAttributeIdForConfigurator(o.attribute)),c(),u("ngIf",o.withQuantity),c(),u("ngForOf",o.attribute==null?null:o.attribute.values)}}var fs=n=>({placement:"auto",class:n,appendToBody:!0,displayCloseButton:!0});function ms(n,i){if(n&1&&I(0,"img",10),n&2){let o,e,t=l().$implicit,r=l(2);E("src",(o=r.getImage(t))==null?null:o.url,wt),E("alt",(e=r.getImage(t))==null?null:e.altText)}}function vs(n,i){n&1&&I(0,"div",11)}function _s(n,i){if(n&1){let o=$();d(0,"div",3)(1,"input",4),G("click",function(){let t=R(o).$implicit,r=l(2);return D(r.onClick(t.valueCode))}),p(),d(2,"div",5)(3,"label",6),_(4,ms,1,2,"img",7)(5,vs,1,0,"div",8),y(6),I(7,"cx-configurator-price",9),p()()()}if(n&2){let o=i.$implicit,e=l().ngIf,t=l();E("id",t.createAttributeValueIdForConfigurator(t.attribute,o.valueCode)),c(),E("id",t.createAttributeValueIdForConfigurator(t.attribute,o.valueCode)+"-input"),E("name",t.createAttributeIdForConfigurator(t.attribute)),u("value",o.valueCode)("formControl",t.attributeRadioButtonForm)("value",o.valueCode)("cxFocus",L(20,Ne,t.attribute.name+"-"+o.name)),P("name",t.createAttributeIdForConfigurator(t.attribute))("required",t.attribute.required===!0?"required":null)("checked",t.attributeRadioButtonForm.value===o.valueCode?"checked":null)("aria-checked",t.attributeRadioButtonForm.value===o.valueCode?"true":"false")("aria-label",t.getAriaLabelGeneric(t.attribute,t.enrichValueWithPrice(o,e)))("aria-live",t.listenForPriceChanges&&t.attributeRadioButtonForm.value===o.valueCode?"polite":null)("aria-describedby",t.createAttributeUiKey("label",t.attribute.name)),c(2),E("id",t.createValueUiKey("label",t.attribute.name,o.valueCode)),E("for",t.createAttributeValueIdForConfigurator(t.attribute,o.valueCode)+"-input"),c(),u("ngIf",t.getImage(o)),c(),u("ngIf",!t.getImage(o)),c(),S(" ",t.getLabel(t.expMode,o.valueDisplay,o.valueCode)," "),c(),u("formula",t.extractValuePriceFormulaParameters(t.enrichValueWithPrice(o,e)))}}function hs(n,i){if(n&1&&(x(0),_(1,_s,8,22,"div",2),b()),n&2){let o=l();c(),u("ngForOf",o.attribute.values)}}function Cs(n,i){if(n&1&&I(0,"img",18),n&2){let o,e,t=l(2).$implicit,r=l(2);E("src",(o=r.getImage(t))==null?null:o.url,wt),E("alt",(e=r.getImage(t))==null?null:e.altText),u("ngClass",r.getImgStyleClasses(r.attribute,t,"cx-img"))}}function ys(n,i){if(n&1&&I(0,"div",19),n&2){let o=l(2).$implicit,e=l(2);u("ngClass",e.getImgStyleClasses(e.attribute,o,"cx-img-dummy"))}}function xs(n,i){if(n&1&&(d(0,"button",20),g(1,"cxTranslate"),I(2,"cx-icon",21),p()),n&2){let o=l(2).$implicit,e=l(2);u("cxPopover",o.description)("cxPopoverOptions",L(6,fs,e.getValueDescriptionStyleClasses())),P("aria-label",f(1,4,"configurator.a11y.description")),c(2),u("type",e.iconTypes.INFO)}}function bs(n,i){if(n&1){let o=$();d(0,"div",3)(1,"input",4),G("click",function(){R(o);let t=l().$implicit,r=l(2);return D(!r.isReadOnly(r.attribute)&&r.onClick(t.valueCode))}),p(),d(2,"div",5)(3,"label",14),_(4,Cs,1,3,"img",15)(5,ys,1,1,"div",16),y(6),_(7,xs,3,8,"button",17),I(8,"cx-configurator-price",9),p()()()}if(n&2){let o=l().$implicit,e=l().ngIf,t=l();E("id",t.createAttributeValueIdForConfigurator(t.attribute,o.valueCode)),c(),E("id",t.createAttributeValueIdForConfigurator(t.attribute,o.valueCode)+"-input"),E("name",t.createAttributeIdForConfigurator(t.attribute)),u("value",o.valueCode)("formControl",t.attributeRadioButtonForm)("value",o.valueCode)("cxFocus",L(24,Ne,t.attribute.name+"-"+o.name)),P("name",t.createAttributeIdForConfigurator(t.attribute))("required",t.attribute.required===!0?"required":null)("checked",t.attributeRadioButtonForm.value===o.valueCode?"checked":null)("aria-checked",t.attributeRadioButtonForm.value===o.valueCode?"true":"false")("aria-label",t.getAriaLabelGeneric(t.attribute,t.enrichValueWithPrice(o,e)))("aria-live",t.listenForPriceChanges&&t.attributeRadioButtonForm.value===o.valueCode?"polite":null)("aria-describedby",t.createAttributeUiKey("label",t.attribute.name)),c(2),li("cursor",t.isReadOnly(t.attribute)?"default":"pointer"),E("id",t.createValueUiKey("label",t.attribute.name,o.valueCode)),E("for",t.createAttributeValueIdForConfigurator(t.attribute,o.valueCode)+"-input"),E("title",t.getLabel(t.expMode,o.valueDisplay,o.valueCode)),c(),u("ngIf",t.getImage(o)),c(),u("ngIf",!t.getImage(o)),c(),S(" ",t.getImageLabel(t.expMode,o.valueDisplay,o.valueCode)," "),c(),u("ngIf",o.description),c(),u("formula",t.extractValuePriceFormulaParameters(t.enrichValueWithPrice(o,e)))}}function Is(n,i){if(n&1&&(x(0),_(1,bs,9,26,"div",13),b()),n&2){let o=i.$implicit,e=l(2);c(),u("ngIf",e.isValueDisplayed(e.attribute,o))}}function Ts(n,i){if(n&1&&(x(0),_(1,Is,2,1,"ng-container",12),b()),n&2){let o=l();c(),u("ngForOf",o.attribute.values)}}function Ss(n,i){n&1&&(d(0,"span",8),y(1),g(2,"cxTranslate"),p()),n&2&&(c(),S(" ",f(2,1,"configurator.header.multipleWarnings"),""))}function Es(n,i){n&1&&(x(0),I(1,"cx-icon",10),b())}function ws(n,i){n&1&&(x(0),I(1,"cx-icon",11),b())}function Os(n,i){if(n&1){let o=$();d(0,"button",9),G("click",function(){R(o);let t=l(3);return D(t.toggleWarnings())}),y(1),g(2,"cxTranslate"),_(3,Es,2,0,"ng-container",0)(4,ws,2,0,"ng-container",0),p()}if(n&2){let o=l(3);P("aria-expanded",o.showWarnings),c(),S(" ",f(2,4,"configurator.header.reviewWarnings")," "),c(2),u("ngIf",!o.showWarnings),c(),u("ngIf",o.showWarnings)}}function As(n,i){if(n&1&&(d(0,"div",12),y(1),p()),n&2){let o=i.$implicit,e=l(2).ngIf,t=l();se("open",t.showWarnings||(e==null||e.warningMessages==null?null:e.warningMessages.length)===1),c(),S(" ",o," ")}}function Fs(n,i){if(n&1&&(x(0),d(1,"div",1)(2,"span",2),I(3,"cx-icon",3),p(),_(4,Ss,3,3,"span",4)(5,Os,5,6,"button",5),d(6,"div",6),_(7,As,2,3,"div",7),p()(),b()),n&2){let o,e,t=l().ngIf;c(4),u("ngIf",((o=t==null||t.warningMessages==null?null:t.warningMessages.length)!==null&&o!==void 0?o:0)>1),c(),u("ngIf",((e=t==null||t.warningMessages==null?null:t.warningMessages.length)!==null&&e!==void 0?e:0)>1),c(),se("inline",(t==null||t.warningMessages==null?null:t.warningMessages.length)===1),c(),u("ngForOf",t.warningMessages)}}function Rs(n,i){n&1&&(d(0,"span",19),y(1),g(2,"cxTranslate"),p()),n&2&&(c(),S(" ",f(2,1,"configurator.header.multipleErrors"),""))}function Ds(n,i){n&1&&(x(0),I(1,"cx-icon",10),b())}function Ns(n,i){n&1&&(x(0),I(1,"cx-icon",11),b())}function Ps(n,i){if(n&1){let o=$();d(0,"button",20),G("click",function(){R(o);let t=l(3);return D(t.toggleErrors())}),y(1),g(2,"cxTranslate"),_(3,Ds,2,0,"ng-container",0)(4,Ns,2,0,"ng-container",0),p()}if(n&2){let o=l(3);P("aria-expanded",o.showErrors),c(),S(" ",f(2,4,"configurator.header.reviewErrors")," "),c(2),u("ngIf",!o.showErrors),c(),u("ngIf",o.showErrors)}}function Vs(n,i){if(n&1&&(d(0,"div",21),y(1),p()),n&2){let o=i.$implicit,e=l(2).ngIf,t=l();se("open",t.showErrors||(e==null||e.errorMessages==null?null:e.errorMessages.length)===1),c(),S(" ",o," ")}}function Us(n,i){if(n&1&&(x(0),d(1,"div",13)(2,"span",2),I(3,"cx-icon",14),p(),_(4,Rs,3,3,"span",15)(5,Ps,5,6,"button",16),d(6,"div",17),_(7,Vs,2,3,"div",18),p()(),b()),n&2){let o,e,t=l().ngIf;c(4),u("ngIf",((o=t==null||t.errorMessages==null?null:t.errorMessages.length)!==null&&o!==void 0?o:0)>1),c(),u("ngIf",((e=t==null||t.errorMessages==null?null:t.errorMessages.length)!==null&&e!==void 0?e:0)>1),c(),se("inline",(t==null||t.errorMessages==null?null:t.errorMessages.length)===1),c(),u("ngForOf",t.errorMessages)}}function Gs(n,i){if(n&1&&(x(0),_(1,Fs,8,5,"ng-container",0)(2,Us,8,5,"ng-container",0),b()),n&2){let o,e,t=i.ngIf;c(),u("ngIf",((o=t==null||t.warningMessages==null?null:t.warningMessages.length)!==null&&o!==void 0?o:0)>0),c(),u("ngIf",((e=t==null||t.errorMessages==null?null:t.errorMessages.length)!==null&&e!==void 0?e:0)>0)}}function Ms(n,i){if(n&1&&(x(0),I(1,"cx-icon",1),y(2),b()),n&2){let o=l();c(),u("type",o.iconTypes.WARNING),c(),S(" ",o.currentGroup.name,`
`)}}var Mn=n=>({number:n});function Bs(n,i){if(n&1&&(x(0),d(1,"div",1),g(2,"cxTranslate"),g(3,"cxTranslate"),d(4,"span",2),y(5),g(6,"cxTranslate"),p()(),d(7,"span",2),y(8),g(9,"cxTranslate"),p(),b()),n&2){let o=l();c(),P("aria-label",z(2,3,"configurator.conflict.suggestionTitle",L(15,Mn,o.suggestionNumber+1))+" "+z(3,6,"configurator.conflict.suggestionText",L(17,_t,o.attribute.label))),c(4),re(z(6,9,"configurator.conflict.suggestionTitle",L(19,Mn,o.suggestionNumber+1))),c(3),re(z(9,12,"configurator.conflict.suggestionText",L(21,_t,o.attribute.label)))}}function Ls(n,i){n&1&&(x(0),y(1),g(2,"cxTranslate"),b()),n&2&&(c(),S(" ",f(2,1,"configurator.button.exit")," "))}function ks(n,i){n&1&&(x(0),y(1),g(2,"cxTranslate"),b()),n&2&&(c(),S(" ",f(2,1,"configurator.button.exitMobile")," "))}function $s(n,i){if(n&1&&(x(0),_(1,Ls,3,3,"ng-container",0),g(2,"async"),_(3,ks,3,3,"ng-container",0),g(4,"async"),b()),n&2){let o=l(2);c(),u("ngIf",f(2,2,o.isDesktop())),c(2),u("ngIf",f(4,4,o.isMobile()))}}function js(n,i){n&1&&(x(0),y(1),g(2,"cxTranslate"),b()),n&2&&(c(),S(" ",f(2,1,"configurator.button.cancelConfigurationMobile")," "))}function qs(n,i){n&1&&(x(0),y(1),g(2,"cxTranslate"),b()),n&2&&(c(),S(" ",f(2,1,"configurator.button.cancelConfiguration")," "))}function Ks(n,i){if(n&1&&(x(0),_(1,js,3,3,"ng-container",0),g(2,"async"),_(3,qs,3,3,"ng-container",0),g(4,"async"),b()),n&2){let o=l(2);c(),u("ngIf",f(2,2,o.isMobile())),c(2),u("ngIf",f(4,4,o.isDesktop()))}}function Qs(n,i){if(n&1){let o=$();x(0),d(1,"button",1),g(2,"cxTranslate"),g(3,"cxTranslate"),G("click",function(){R(o);let t=l();return D(t.exitConfiguration())}),_(4,$s,5,6,"ng-container",0)(5,Ks,5,6,"ng-container",0),p(),b()}if(n&2){let o=i.ngIf;c(),P("title",o.routerData.isOwnerCartEntry?f(2,3,"configurator.button.cancelConfiguration"):f(3,5,"configurator.button.exit")),c(3),u("ngIf",!o.routerData.isOwnerCartEntry),c(),u("ngIf",o.routerData.isOwnerCartEntry)}}var Ws=(n,i,o,e,t,r,a)=>({componentKey:"Header",attribute:n,owner:i,group:o,language:e,expMode:t,isNavigationToGroupEnabled:r,isPricingAsync:a}),Hs=(n,i,o,e,t,r,a)=>({componentKey:n,attribute:i,owner:o,group:e,language:t,expMode:r,isPricingAsync:a}),Ys=(n,i,o,e,t,r)=>({componentKey:"Footer",attribute:n,owner:i,group:o,language:e,expMode:t,isPricingAsync:r});function zs(n,i){if(n&1&&(x(0),I(1,"cx-configurator-conflict-description",3),b()),n&2){let o=l();c(),u("currentGroup",o.group)}}function Xs(n,i){if(n&1&&(x(0),I(1,"cx-configurator-conflict-suggestion",5),b()),n&2){let o=l(),e=o.$implicit,t=o.index,r=l();c(),u("currentGroup",r.group)("attribute",e)("suggestionNumber",t)}}function Zs(n,i){if(n&1&&(x(0),I(1,"div",6),g(2,"async"),I(3,"div",6),g(4,"async"),I(5,"div",6),g(6,"async"),b()),n&2){let o,e,t,r=i.ngIf,a=l().$implicit,s=l();c(),u("cxConfiguratorAttributeComponent",_n(9,Ws,a,s.owner,s.group,r,(o=f(2,3,s.expMode))!==null&&o!==void 0?o:!1,s.isNavigationToGroupEnabled,s.isPricingAsync)),c(2),u("cxConfiguratorAttributeComponent",_n(17,Hs,s.getComponentKey(a),a,s.owner,s.group,r,(e=f(4,5,s.expMode))!==null&&e!==void 0?e:!1,s.isPricingAsync)),c(2),u("cxConfiguratorAttributeComponent",Br(25,Ys,a,s.owner,s.group,r,(t=f(6,7,s.expMode))!==null&&t!==void 0?t:!1,s.isPricingAsync))}}function Js(n,i){if(n&1&&(d(0,"div",4),_(1,Xs,2,3,"ng-container",1)(2,Zs,7,32,"ng-container",1),g(3,"async"),p()),n&2){let o=i.$implicit,e=l();se("cx-hidden",!o.visible),c(),u("ngIf",e.isConflictGroupType(e.group.groupType)),c(),u("ngIf",f(3,4,e.activeLanguage$))}}function eu(n,i){if(n&1&&(x(0),I(1,"cx-configurator-group",11),b()),n&2){let o=i.ngIf,e=l().ngIf;c(),u("group",o)("owner",e.owner)("isNavigationToGroupEnabled",!1)}}function tu(n,i){if(n&1&&(x(0),_(1,eu,2,3,"ng-container",10),g(2,"async"),b()),n&2){let o=l();c(),u("ngIf",f(2,1,o.conflictGroup$))}}var Dt=()=>[0,1,2];function iu(n,i){if(n&1&&(x(0),I(1,"cx-configurator-group",3),b()),n&2){let o=i.ngIf,e=l(2).ngIf,t=l();c(),u("group",o)("owner",e.owner)("isNavigationToGroupEnabled",t.isNavigationToGroupEnabled(e))("isPricingAsync",e.isPricingAsync)}}function nu(n,i){if(n&1&&(x(0),_(1,iu,2,4,"ng-container",2),g(2,"async"),b()),n&2){let o=l(2);c(),u("ngIf",f(2,1,o.currentGroup$))}}function ru(n,i){if(n&1&&(x(0),_(1,nu,3,3,"ng-container",1),b()),n&2){let o=i.ngIf,e=l(),t=ae(3);c(),u("ngIf",!e.isDialogActive(o))("ngIfElse",t)}}function ou(n,i){n&1&&(x(0),I(1,"div",20),b())}function au(n,i){if(n&1&&(d(0,"div",15)(1,"div",16),I(2,"div",17)(3,"div",18),p(),d(4,"div",19),_(5,ou,2,0,"ng-container",2),p()()),n&2){let o=i.index;c(5),u("ngIf",o!==0)}}function cu(n,i){n&1&&(x(0),d(1,"div",5)(2,"div",6),I(3,"div",7)(4,"div",8),p(),d(5,"div",9),I(6,"div",10)(7,"div",11),p()(),d(8,"div",5)(9,"div",6),I(10,"div",7)(11,"div",8),d(12,"div",12),I(13,"div",13),p()(),d(14,"div",9),_(15,au,6,1,"div",14),p()(),b()),n&2&&(c(15),u("ngForOf",Fe(1,Dt)))}function su(n,i){n&1&&_(0,cu,16,2,"ng-container",4),n&2&&u("ngForOf",Fe(1,Dt))}var uu=["groupItem"],lu=()=>({key:"cx-menu-back"}),pu=()=>[0,1,2,3,4,5,6,7,8,9];function du(n,i){if(n&1){let o=$();d(0,"button",9,1),g(2,"cxTranslate"),g(3,"cxTranslate"),G("click",function(){R(o);let t=l(3).ngIf,r=l(4);return D(r.navigateUp(t))})("keydown",function(t){R(o);let r=l(2),a=r.$implicit,s=r.index,C=l().ngIf,T=l(4);return D(T.switchGroupOnArrowPress(t,s,a,C))}),I(4,"cx-icon",10),y(5),g(6,"cxTranslate"),p()}if(n&2){let o=l().ngIf,e=l(6);u("cxFocus",Fe(11,lu)),P("aria-selected",!1)("aria-label",e.isConflictGroupType(o.groupType)?f(2,5,"configurator.a11y.conflictBack"):f(3,7,"configurator.a11y.groupBack")),c(4),u("type",e.iconTypes.CARET_LEFT),c(),S(" ",f(6,9,"configurator.button.back")," ")}}function gu(n,i){if(n&1&&(x(0),_(1,du,7,12,"button",8),b()),n&2){let o=i.ngIf,e=l().index;c(),u("ngIf",o!==null&&e===0)}}function fu(n,i){if(n&1&&(I(0,"cx-icon",21),g(1,"cxTranslate"),g(2,"cxTranslate")),n&2){let o=l(2).$implicit,e=l(5);E("id",e.createIconId(e.iconTypes.CARET_RIGHT,o.id)),E("title",f(1,4,"configurator.icon.subgroup")),u("type",e.iconTypes.CARET_RIGHT),P("aria-label",f(2,6,"configurator.a11y.iconSubGroup"))}}function mu(n,i){if(n&1){let o=$();x(0),d(1,"button",11,1),g(3,"async"),g(4,"async"),G("click",function(){R(o);let t=l().$implicit,r=l().ngIf,a=l(4);return D(a.click(t,r))})("keydown",function(t){R(o);let r=l(),a=r.$implicit,s=r.index,C=l().ngIf,T=l(4);return D(T.switchGroupOnArrowPress(t,s,a,C))}),d(5,"span",12),y(6),p(),d(7,"div",13)(8,"div",14),y(9),p(),d(10,"div",15),I(11,"cx-icon",16),g(12,"cxTranslate"),g(13,"cxTranslate"),p(),d(14,"div",15),I(15,"cx-icon",17),g(16,"cxTranslate"),g(17,"cxTranslate"),I(18,"cx-icon",18),g(19,"cxTranslate"),g(20,"cxTranslate"),p(),d(21,"div",19),_(22,fu,3,8,"cx-icon",20),p()()(),b()}if(n&2){let o=l().$implicit,e=l().ngIf,t=l(3).ngIf,r=l();c(),se("DISABLED",!o.configurable)("cx-menu-conflict",r.isConflictGroupType(o.groupType))("active",r.isGroupSelected(o.id,e.id))("disable",!o.configurable),E("id",o.id),E("ngClass",f(3,32,r.getGroupStatusStyles(o,t))),u("cxFocus",L(48,Ne,o.id))("tabindex",r.getTabIndex(o,e.id)),P("aria-describedby",f(4,34,r.getAriaDescribedby(o,t)))("aria-selected",r.isGroupSelected(o.id,e.id))("aria-controls",r.isGroupSelected(o.id,e.id)?r.createAriaControls(o.id):null)("aria-label",r.getAriaLabel(o)),c(4),E("title",o.description),c(),re(r.getGroupMenuTitle(o)),c(3),S(" ",r.getConflictNumber(o)," "),c(2),E("id",r.createIconId(r.iconTypes.WARNING,o.id)),E("title",f(12,36,"configurator.icon.groupConflict")),u("type",r.iconTypes.WARNING),P("aria-label",f(13,38,"configurator.a11y.iconConflict")),c(4),E("id",r.createIconId(r.iconTypes.ERROR,o.id)),E("title",f(16,40,"configurator.icon.groupIncomplete")),u("type",r.iconTypes.ERROR),P("aria-label",f(17,42,"configurator.a11y.iconIncomplete")),c(3),E("id",r.createIconId(r.iconTypes.SUCCESS,o.id)),E("title",f(19,44,"configurator.icon.groupComplete")),u("type",r.iconTypes.SUCCESS),P("aria-label",f(20,46,"configurator.a11y.iconComplete")),c(4),u("ngIf",r.hasSubGroups(o))}}function vu(n,i){if(n&1&&(x(0),_(1,gu,2,1,"ng-container",6),g(2,"async"),_(3,mu,23,50,"ng-container",6),g(4,"async"),b()),n&2){let o=i.$implicit,e=l(5);c(),u("ngIf",f(2,2,e.displayedParentGroup$)),c(2),u("ngIf",f(4,4,e.displayMenuItem(o)))}}function _u(n,i){if(n&1&&(x(0),_(1,vu,5,6,"ng-container",7),b()),n&2){let o=l().ngIf,e=l(3);c(),u("ngForOf",o)("ngForTrackBy",e.trackByFn)}}function hu(n,i){if(n&1&&(x(0),_(1,_u,2,2,"ng-container",6),g(2,"async"),b()),n&2){let o=l(3);c(),u("ngIf",f(2,1,o.currentGroup$))}}function Cu(n,i){if(n&1&&(x(0),d(1,"div",3)(2,"span",4),y(3),g(4,"cxTranslate"),p(),d(5,"span",5),y(6),g(7,"cxTranslate"),p(),_(8,hu,3,3,"ng-container",6),g(9,"async"),p(),b()),n&2){let o=l(2);c(3),S(" ",f(4,3,"configurator.a11y.listOfGroups")," "),c(3),S(" ",f(7,5,"configurator.a11y.inListOfGroups")," "),c(2),u("ngIf",f(9,7,o.displayedGroups$))}}function yu(n,i){if(n&1&&(x(0),_(1,Cu,10,9,"ng-container",2),b()),n&2){let o=i.ngIf,e=l(),t=ae(3);c(),u("ngIf",!e.isDialogActive(o))("ngIfElse",t)}}function xu(n,i){n&1&&(d(0,"div",24),I(1,"div",25),p())}function bu(n,i){n&1&&(d(0,"div",22),_(1,xu,2,0,"div",23),p()),n&2&&(c(),u("ngForOf",Fe(1,pu)))}function Iu(n,i){n&1&&(x(0),I(1,"cx-hamburger-menu"),b())}function Tu(n,i){if(n&1&&(x(0),d(1,"div",2),_(2,Iu,2,0,"ng-container",3),g(3,"async"),y(4),p(),b()),n&2){let o=i.ngIf,e=l();c(2),u("ngIf",f(3,2,e.isMobile())),c(2),S(" ",e.getGroupTitle(o)," ")}}function Su(n,i){n&1&&I(0,"div",4)}function Eu(n,i){if(n&1&&(x(0),d(1,"div",4),y(2),p(),d(3,"div",5),I(4,"cx-configurator-price",6),p(),b()),n&2){let o=l();c(2),S(" ",o.attributeOverview.attribute," "),c(2),u("formula",o.extractPriceFormulaParameters())}}function wu(n,i){if(n&1&&(d(0,"div",5),I(1,"cx-configurator-price",6),p(),d(2,"div",4),y(3),p()),n&2){let o=l();c(),u("formula",o.extractPriceFormulaParameters()),c(2),S(" ",o.attributeOverview.attribute," ")}}function Ou(n,i){if(n&1&&(d(0,"span",12),y(1),g(2,"cxTranslate"),p()),n&2){let o=l(2);c(),vn(" ",f(2,2,"configurator.attribute.id"),": ",o.attributeOverview.productCode,"")}}function Au(n,i){if(n&1&&(d(0,"div",13)(1,"span",14),y(2),g(3,"cxTranslate"),p(),d(4,"span",15),y(5),g(6,"cxNumeric"),p()()),n&2){let o=l(2);c(2),re(f(3,2,"configurator.attribute.quantity")),c(3),re(f(6,4,o.attributeOverview.quantity))}}function Fu(n,i){if(n&1&&(d(0,"div",16)(1,"span",14),y(2),g(3,"cxTranslate"),p(),d(4,"span",15),y(5),p()()),n&2){let o=l(2);c(2),re(f(3,2,"configurator.overviewForm.itemPrice")),c(3),re(o.attributeOverview.valuePrice==null?null:o.attributeOverview.valuePrice.formattedValue)}}function Ru(n,i){if(n&1&&(x(0),d(1,"div",1)(2,"div",2),I(3,"cx-media",3),p(),d(4,"span",4),y(5),p(),d(6,"div",5)(7,"div"),y(8),p(),_(9,Ou,3,4,"span",6)(10,Au,7,6,"div",7)(11,Fu,6,4,"div",8),p()(),d(12,"div",9)(13,"span",10),y(14),p(),I(15,"cx-configurator-price",11),p(),b()),n&2){let o=i.ngIf,e=l();c(3),u("container",e.getProductPrimaryImage(o)),c(2),S(" ",e.getAriaLabel()," "),c(3),S(" ",e.attributeOverview.value," "),c(),u("ngIf",e.attributeOverview==null?null:e.attributeOverview.productCode),c(),u("ngIf",e.displayQuantity()),c(),u("ngIf",e.displayPrice()),c(3),re(e.attributeOverview.attribute),c(),u("formula",e.extractPriceFormulaParameters())}}var kn=n=>({group:n});function Du(n,i){if(n&1){let o=$();x(0),d(1,"button",2),g(2,"cxTranslate"),G("click",function(){let t=R(o).$implicit,r=l();return D(r.onAttrFilterRemove(r.config,t))}),y(3),g(4,"cxTranslate"),d(5,"span",3),I(6,"cx-icon",4),p()(),b()}if(n&2){let o=i.$implicit,e=l();c(),E("title",f(2,3,o===e.attributeFilterTypes.PRICE_RELEVANT?"configurator.overviewFilter.removeByPrice":"configurator.overviewFilter.removeMySelections")),c(2),S(" ",f(4,5,o===e.attributeFilterTypes.PRICE_RELEVANT?"configurator.overviewFilter.byPrice":"configurator.overviewFilter.mySelections")," "),c(3),u("type",e.iconTypes.CLOSE)}}function Nu(n,i){if(n&1){let o=$();x(0),d(1,"button",2),g(2,"cxTranslate"),G("click",function(){let t=R(o).$implicit,r=l();return D(r.onGroupFilterRemove(r.config,t))}),y(3),d(4,"span",3),I(5,"cx-icon",4),p()(),b()}if(n&2){let o=i.$implicit,e=l();c(),E("title",z(2,3,"configurator.overviewFilter.removeByGroup",L(6,kn,e.getGroupFilterDescription(e.config.overview,o)))),c(2),S(" ",e.getGroupFilterDescription(e.config.overview,o)," "),c(2),u("type",e.iconTypes.CLOSE)}}function Pu(n,i){if(n&1){let o=$();x(0),d(1,"button",2),g(2,"cxTranslate"),G("click",function(){R(o);let t=l();return D(t.onRemoveAll(t.config))}),y(3),g(4,"cxTranslate"),d(5,"span",3),I(6,"cx-icon",4),p()(),b()}if(n&2){let o=l();c(),E("title",f(2,3,"configurator.overviewFilter.removeAllFilters")),c(2),S(" ",f(4,5,"configurator.overviewFilter.removeAll")," "),c(3),u("type",o.iconTypes.CLOSE)}}var Vu=n=>({groupName:n});function Uu(n,i){if(n&1&&(x(0),I(1,"cx-configurator-overview-filter-bar",2),b()),n&2){let o=l();c(),u("config",o.config)}}function Gu(n,i){if(n&1){let o=$();x(0),d(1,"div",3),y(2),g(3,"cxTranslate"),p(),d(4,"div",4)(5,"div",5)(6,"input",6),g(7,"cxTranslate"),G("change",function(){R(o);let t=l();return D(t.onFilter(t.config))}),p(),d(8,"label",7),y(9),g(10,"cxTranslate"),p()()(),d(11,"div",4)(12,"div",5)(13,"input",8),g(14,"cxTranslate"),G("change",function(){R(o);let t=l();return D(t.onFilter(t.config))}),p(),d(15,"label",9),y(16),g(17,"cxTranslate"),p()()(),b()}if(n&2){let o=l();c(2),S(" ",f(3,7,"configurator.overviewFilter.byOption")," "),c(4),u("formControl",o.priceFilter),P("aria-label",f(7,9,"configurator.a11y.filterOverviewByPrice")),c(3),S(" ",f(10,11,"configurator.overviewFilter.byPrice"),""),c(4),u("formControl",o.mySelectionsFilter),P("aria-label",f(14,13,"configurator.a11y.filterOverviewByMySelections")),c(3),S(" ",f(17,15,"configurator.overviewFilter.mySelections"),"")}}function Mu(n,i){if(n&1){let o=$();x(0),d(1,"div",4)(2,"div",5)(3,"input",11),g(4,"cxTranslate"),G("change",function(){R(o);let t=l(2);return D(t.onFilter(t.config))}),p(),d(5,"label",12),y(6),p()()(),b()}if(n&2){let o=i.$implicit,e=i.index,t=l(2);c(3),E("id","cx-configurator-overview-filter-option-group-"+o.id),E("name","config-overview-group-filter-"+o.id),u("formControl",t.groupFilters[e]),P("aria-label",z(4,6,"configurator.a11y.filterOverviewByGroup",L(9,Vu,o.groupDescription))),c(2),E("for","cx-configurator-overview-filter-option-group-"+o.id),c(),re(o.groupDescription)}}function Bu(n,i){if(n&1&&(x(0),d(1,"div",3),y(2),g(3,"cxTranslate"),p(),_(4,Mu,7,11,"ng-container",10),b()),n&2){let o=l();c(2),S(" ",f(3,2,"configurator.overviewFilter.byGroup")," "),c(2),u("ngForOf",o.config.overview.possibleGroups)}}function Lu(n,i){n&1&&(d(0,"div",13),y(1),g(2,"cxTranslate"),p()),n&2&&(c(),S(" ",f(2,1,"configurator.overviewFilter.noFiltersAvailable"),`
`))}var ku=["filterButton"],To=n=>({numAppliedFilters:n});function $u(n,i){if(n&1){let o=$();x(0),d(1,"button",5,1),g(3,"cxTranslate"),G("click",function(){R(o);let t=l().ngIf,r=l();return D(r.openFilterModal(t))}),y(4),g(5,"cxTranslate"),p(),b()}if(n&2){let o=l().ngIf,e=l();c(),E("title",z(3,2,e.getNumFilters(o.overview)>0?"configurator.a11y.filterOverviewWithCount":"configurator.a11y.filterOverview",L(8,To,e.getNumFilters(o.overview)))),c(3),S(" ",z(5,5,e.getNumFilters(o.overview)>0?"configurator.button.filterOverviewWithCount":"configurator.button.filterOverview",L(10,To,e.getNumFilters(o.overview)))," ")}}function ju(n,i){if(n&1&&(x(0),_(1,$u,6,12,"ng-container",3),g(2,"async"),I(3,"cx-configurator-overview-filter-bar",4),b()),n&2){let o=i.ngIf,e=l();c(),u("ngIf",!f(2,2,e.isDisplayOnlyVariant())||(o.overview.possibleGroups==null?null:o.overview.possibleGroups.length)!==1),c(2),u("config",o)}}function qu(n,i){n&1&&I(0,"div",6)}function Ku(n,i){if(n&1&&(x(0),d(1,"div",8),I(2,"cx-configurator-overview-filter",9),p(),b()),n&2){let o=i.ngIf;c(2),u("config",o)("showFilterBar",!1)}}var No=n=>({overviewGroups:n,level:1,idPrefix:""}),Po=(n,i,o)=>({overviewGroups:n,level:i,idPrefix:o}),Qu=()=>[0,1,2,3,4,5];function Wu(n,i){n&1&&kt(0)}function Hu(n,i){if(n&1&&(x(0),_(1,Wu,1,0,"ng-container",4),b()),n&2){let o=l().ngIf;l();let e=ae(5);c(),u("ngTemplateOutlet",e)("ngTemplateOutletContext",L(2,No,o.overview==null?null:o.overview.groups))}}function Yu(n,i){if(n&1&&(x(0),_(1,Hu,2,4,"ng-container",3),b()),n&2){let o=i.ngIf,e=l(),t=ae(3);c(),u("ngIf",e.hasAttributes(o))("ngIfElse",t)}}function zu(n,i){n&1&&(d(0,"div",5)(1,"h2"),y(2),g(3,"cxTranslate"),p(),d(4,"p"),y(5),g(6,"cxTranslate"),p()()),n&2&&(c(2),re(f(3,2,"configurator.overviewForm.noAttributeHeader")),c(3),re(f(6,4,"configurator.overviewForm.noAttributeText")))}function Xu(n,i){if(n&1&&(x(0),I(1,"cx-configurator-overview-attribute",16),b()),n&2){let o=l().$implicit;c(),u("attributeOverview",o)}}function Zu(n,i){if(n&1&&(x(0),I(1,"cx-configurator-cpq-overview-attribute",16),b()),n&2){let o=l().$implicit;c(),u("attributeOverview",o)}}function Ju(n,i){if(n&1&&(x(0),I(1,"cx-configurator-overview-attribute",16),b()),n&2){let o=l().$implicit;c(),u("attributeOverview",o)}}function el(n,i){if(n&1&&(d(0,"div",12),x(1,13),_(2,Xu,2,1,"ng-container",14)(3,Zu,2,1,"ng-container",14)(4,Ju,2,1,"ng-container",15),b(),p()),n&2){let o=i.$implicit,e=i.index,t=l().$implicit,r=l(2);u("ngClass",r.getStyleClasses(t.attributes,e)),c(),u("ngSwitch",o==null?null:o.type),c(),u("ngSwitchCase",r.attributeOverviewType.GENERAL),c(),u("ngSwitchCase",r.attributeOverviewType.BUNDLE)}}function tl(n,i){n&1&&kt(0)}function il(n,i){if(n&1&&(x(0),_(1,tl,1,0,"ng-container",4),b()),n&2){let o=l().$implicit,e=l(),t=e.level,r=e.idPrefix,a=l(),s=ae(5);c(),u("ngTemplateOutlet",s)("ngTemplateOutletContext",Ot(2,Po,o.subGroups,t+1,a.getPrefixId(r,o.id)))}}function nl(n,i){if(n&1&&(x(0),d(1,"div",8)(2,"span",6),y(3),g(4,"cxTranslate"),p(),d(5,"h2",9)(6,"span"),y(7),p()(),_(8,el,5,4,"div",10)(9,il,2,6,"ng-container",11),p(),b()),n&2){let o=i.$implicit,e=l(),t=e.level,r=e.idPrefix,a=l();c(),E("id",a.getGroupId(r,o.id)),u("ngClass",a.getGroupLevelStyleClasses(t,o.subGroups)),c(2),S(" ",z(4,6,"configurator.a11y.group",L(9,kn,o.groupDescription))," "),c(4),re(o.groupDescription),c(),u("ngForOf",o.attributes),c(),u("ngIf",(o.subGroups==null?null:o.subGroups.length)>0)}}function rl(n,i){if(n&1&&(d(0,"span",6),y(1),g(2,"cxTranslate"),p(),_(3,nl,10,11,"ng-container",7)),n&2){let o=i.overviewGroups;c(),S(" ",f(2,2,"configurator.a11y.listOfAttributesAndValues")," "),c(2),u("ngForOf",o)}}function ol(n,i){n&1&&(x(0),d(1,"div",20),I(2,"div",21),p(),d(3,"div",22),I(4,"div",23),p(),I(5,"div",24),b())}function al(n,i){n&1&&(x(0),d(1,"div",17),I(2,"div",18),d(3,"div",19),_(4,ol,6,0,"ng-container",7),p()(),b()),n&2&&(c(4),u("ngForOf",Fe(1,Qu)))}function cl(n,i){n&1&&_(0,al,5,2,"ng-container",7),n&2&&u("ngForOf",Fe(1,Dt))}function sl(n,i){n&1&&kt(0)}function ul(n,i){if(n&1&&(x(0),_(1,sl,1,0,"ng-container",2),b()),n&2){let o=l(),e=ae(2);c(),u("ngTemplateOutlet",e)("ngTemplateOutletContext",L(2,No,o.config.overview.groups))}}function ll(n,i){n&1&&kt(0)}function pl(n,i){if(n&1&&(x(0),_(1,ll,1,0,"ng-container",2),b()),n&2){let o=l().$implicit,e=l(),t=e.level,r=e.idPrefix,a=l(),s=ae(2);c(),u("ngTemplateOutlet",s)("ngTemplateOutletContext",Ot(2,Po,o.subGroups,t+1,a.getPrefixId(r,o.id)))}}function dl(n,i){if(n&1){let o=$();x(0),d(1,"li",4)(2,"button",5),g(3,"cxTranslate"),G("click",function(){let t=R(o).$implicit,r=l().idPrefix,a=l();return D(a.navigateToGroup(r,t.id))}),d(4,"span",6),y(5),p(),I(6,"cx-icon",7),p(),_(7,pl,2,6,"ng-container",1),p(),b()}if(n&2){let o=i.$implicit,e=l(),t=e.level,r=e.idPrefix,a=l();c(),u("ngClass",a.getGroupLevelStyleClasses(t)),c(),E("id",a.getMenuItemId(r,o.id)),P("aria-label",z(3,6,"configurator.a11y.groupName",L(9,kn,o.groupDescription))),c(3),S(" ",o.groupDescription,""),c(),u("type",a.iconTypes.ARROW_LEFT),c(),u("ngIf",(o.subGroups==null?null:o.subGroups.length)>0)}}function gl(n,i){if(n&1&&(d(0,"ul"),_(1,dl,8,11,"ng-container",3),p()),n&2){let o=i.overviewGroups;c(),u("ngForOf",o)}}var Vo=(n,i)=>({entityKey:n,ownerType:i}),Uo=(n,i)=>({cxRoute:n,params:i}),fl=(n,i)=>({resolveIssues:!0,skipConflicts:n,productCode:i}),ml=n=>({resolveIssues:!0,productCode:n});function vl(n,i){if(n&1&&(d(0,"div",3),I(1,"cx-icon",4),d(2,"div",5),y(3),g(4,"cxTranslate"),d(5,"button",6),g(6,"cxUrl"),g(7,"async"),y(8),g(9,"cxTranslate"),p()()()),n&2){let o=i.ngIf,e=l(2).ngIf,t=l();c(),u("type",t.iconTypes.ERROR),c(2),S(" ",z(4,5,"configurator.notificationBanner.numberOfIssues",L(14,tn,o))," "),c(2),u("routerLink",f(6,8,Be(19,Uo,"configure"+e.owner.configuratorType,Be(16,Vo,e.owner.id,e.owner.type))))("queryParams",Be(22,fl,f(7,10,t.skipConflictsOnIssueNavigation$),e.productCode)),c(3),S(" ",f(9,12,"configurator.header.resolveIssues")," ")}}function _l(n,i){if(n&1&&(d(0,"div",7),I(1,"cx-icon",4),d(2,"div",8),y(3),g(4,"cxTranslate"),d(5,"button",9),g(6,"cxUrl"),y(7),g(8,"cxTranslate"),p()()()),n&2){let o=i.ngIf,e=l(2).ngIf,t=l();c(),u("type",t.iconTypes.WARNING),c(2),S(" ",z(4,5,"configurator.notificationBanner.numberOfConflicts",L(12,tn,o))," "),c(2),u("routerLink",f(6,8,Be(17,Uo,"configure"+e.owner.configuratorType,Be(14,Vo,e.owner.id,e.owner.type))))("queryParams",L(20,ml,e.productCode)),c(2),S(" ",f(8,10,"configurator.header.resolveConflicts")," ")}}function hl(n,i){if(n&1&&(x(0),_(1,vl,10,25,"div",1),g(2,"async"),_(3,_l,9,22,"div",2),g(4,"async"),b()),n&2){let o=l(2);c(),u("ngIf",f(2,2,o.numberOfIssues$)),c(2),u("ngIf",f(4,4,o.numberOfConflicts$))}}function Cl(n,i){if(n&1&&(x(0),_(1,hl,5,6,"ng-container",0),g(2,"async"),b()),n&2){let o=l();c(),u("ngIf",f(2,1,o.configurationOverview$))}}var yl=["menuTab"],xl=["filterTab"],Go=()=>[0,1],bl=()=>[0,1,2,3];function Il(n,i){if(n&1&&I(0,"cx-configurator-overview-filter",7),n&2){let o=l().ngIf;u("config",o)}}function Tl(n,i){if(n&1&&I(0,"cx-configurator-overview-menu",7),n&2){let o=l().ngIf;u("config",o)}}function Sl(n,i){if(n&1){let o=$();x(0),d(1,"div",4)(2,"button",5,1),G("keydown",function(t){R(o);let r=l();return D(r.switchTabOnArrowPress(t,"#menuTab"))})("keydown.enter",function(){R(o);let t=l();return D(t.onMenu())})("keydown.space",function(){R(o);let t=l();return D(t.onMenu())})("click",function(){R(o);let t=l();return D(t.onMenu())}),y(4),g(5,"cxTranslate"),p(),d(6,"button",5,2),G("keydown",function(t){R(o);let r=l();return D(r.switchTabOnArrowPress(t,"#filterTab"))})("keydown.enter",function(){R(o);let t=l();return D(t.onFilter())})("keydown.space",function(){R(o);let t=l();return D(t.onFilter())})("click",function(){R(o);let t=l();return D(t.onFilter())}),y(8),g(9,"cxTranslate"),p()(),_(10,Il,1,1,"cx-configurator-overview-filter",6)(11,Tl,1,1,"cx-configurator-overview-menu",6),b()}if(n&2){let o=l();c(2),se("active",!o.showFilter),u("tabindex",o.getTabIndexForMenuTab()),P("aria-selected",!o.showFilter),c(2),S(" ",f(5,12,"configurator.overviewSidebar.menu")," "),c(2),se("active",o.showFilter),u("tabindex",o.getTabIndexForFilterTab()),P("aria-selected",o.showFilter),c(2),S(" ",f(9,14,"configurator.overviewSidebar.filter")," "),c(2),u("ngIf",o.showFilter),c(),u("ngIf",!o.showFilter)}}function El(n,i){n&1&&(d(0,"div",12),I(1,"div",13),p())}function wl(n,i){n&1&&(x(0),d(1,"div",15),_(2,El,2,0,"div",16),p(),b()),n&2&&(c(2),u("ngForOf",Fe(1,bl)))}function Ol(n,i){n&1&&(d(0,"div",12),I(1,"div",13),p())}function Al(n,i){n&1&&(d(0,"div",12),I(1,"div",13),p())}function Fl(n,i){n&1&&(x(0),d(1,"div",15),_(2,Ol,2,0,"div",16),d(3,"div",17),_(4,Al,2,0,"div",16),p()(),b()),n&2&&(c(2),u("ngForOf",Fe(2,Dt)),c(2),u("ngForOf",Fe(3,Dt)))}function Rl(n,i){n&1&&(d(0,"div",12),I(1,"div",13),p())}function Dl(n,i){n&1&&(x(0),d(1,"div",11),_(2,Rl,2,0,"div",16),p(),b()),n&2&&(c(2),u("ngForOf",Fe(1,Go)))}function Nl(n,i){if(n&1&&(x(0),d(1,"div",11)(2,"div",12),I(3,"div",13),p(),_(4,wl,3,2,"ng-container",14)(5,Fl,5,4,"ng-container",14)(6,Dl,3,2,"ng-container",14),p(),b()),n&2){let o=i.index;c(4),u("ngIf",o===0),c(),u("ngIf",o===1),c(),u("ngIf",o===2)}}function Pl(n,i){n&1&&(x(0),_(1,Nl,7,3,"ng-container",10),b()),n&2&&(c(),u("ngForOf",Fe(1,Dt)))}function Vl(n,i){n&1&&(d(0,"div",8),I(1,"div",9),_(2,Pl,2,2,"ng-container",10),p()),n&2&&(c(2),u("ngForOf",Fe(1,Go)))}function Ul(n,i){if(n&1){let o=$();x(0),d(1,"button",1),g(2,"async"),g(3,"cxTranslate"),G("click",function(){R(o);let t=l().ngIf,r=l();return D(r.onPrevious(t))}),y(4),g(5,"cxTranslate"),p(),d(6,"button",2),g(7,"async"),g(8,"cxTranslate"),G("click",function(){R(o);let t=l().ngIf,r=l();return D(r.onNext(t))}),y(9),g(10,"cxTranslate"),p(),b()}if(n&2){let o=l().ngIf,e=l();c(),u("disabled",f(2,6,e.isFirstGroup(o.owner))),P("aria-label",f(3,8,"configurator.a11y.previous")),c(3),S(" ",f(5,10,"configurator.button.previous")," "),c(2),u("disabled",f(7,12,e.isLastGroup(o.owner))),P("aria-label",f(8,14,"configurator.a11y.next")),c(3),S(" ",f(10,16,"configurator.button.next")," ")}}function Gl(n,i){if(n&1&&(x(0),_(1,Ul,11,18,"ng-container",0),b()),n&2){let o=i.ngIf;c(),u("ngIf",o.groups.length>1)}}function Ml(n,i){if(n&1&&(x(0),d(1,"div",6)(2,"div",4),y(3),g(4,"cxTranslate"),p(),d(5,"div",5),y(6),p()(),d(7,"div",7)(8,"div",4),y(9),g(10,"cxTranslate"),p(),d(11,"div",5),y(12),p()(),b()),n&2){let o=l(2).ngIf;c(3),S(" ",f(4,4,"configurator.priceSummary.basePrice"),": "),c(3),S(" ",o==null||o.priceSummary==null||o.priceSummary.basePrice==null?null:o.priceSummary.basePrice.formattedValue," "),c(3),S(" ",f(10,6,"configurator.priceSummary.selectedOptions"),": "),c(3),S(" ",o==null||o.priceSummary==null||o.priceSummary.selectedOptions==null?null:o.priceSummary.selectedOptions.formattedValue," ")}}function Bl(n,i){if(n&1&&(x(0),d(1,"div",1)(2,"div",2),_(3,Ml,13,8,"ng-container",0),d(4,"div",3)(5,"div",4),y(6),g(7,"cxTranslate"),p(),d(8,"div",5),y(9),p()()()(),b()),n&2){let o=l().ngIf;c(3),u("ngIf",!o.hideBasePriceAndSelectedOptions),c(3),S(" ",f(7,3,"configurator.priceSummary.totalPricePerItem"),": "),c(3),S(" ",o==null||o.priceSummary==null||o.priceSummary.currentTotal==null?null:o.priceSummary.currentTotal.formattedValue," ")}}function Ll(n,i){if(n&1&&(x(0),_(1,Bl,10,5,"ng-container",0),b()),n&2){let o=i.ngIf;c(),u("ngIf",o.pricingEnabled)}}var Mo=n=>({product:n}),kl=n=>({name:n}),$l=n=>({logsys:n}),jl=n=>({version:n});function ql(n,i){if(n&1&&(x(0),d(1,"div",13)(2,"span",14),y(3),g(4,"cxTranslate"),p()(),I(5,"cx-icon",15),g(6,"cxTranslate"),b()),n&2){let o=l().ngIf,e=l();c(3),re(f(4,3,"configurator.header.showMore")),c(2),u("type",e.iconTypes.CARET_DOWN),P("aria-label",z(6,5,"configurator.a11y.showMoreProductInfo",L(8,Mo,o.name)))}}function Kl(n,i){if(n&1&&(x(0),d(1,"div",16),y(2),g(3,"cxTranslate"),p(),I(4,"cx-icon",15),g(5,"cxTranslate"),b()),n&2){let o=l().ngIf,e=l();c(2),S(" ",f(3,3,"configurator.header.showLess")," "),c(2),u("type",e.iconTypes.CARET_UP),P("aria-label",z(5,5,"configurator.a11y.showLessProductInfo",L(8,Mo,o.name)))}}function Ql(n,i){if(n&1&&(d(0,"span"),g(1,"cxTranslate"),y(2),p()),n&2){let o=l().ngIf;P("aria-label",f(1,2,"configurator.a11y.productName")),c(2),S(" ",o.name," ")}}function Wl(n,i){if(n&1&&(d(0,"span"),g(1,"cxTranslate"),y(2),p()),n&2){let o=l().ngIf;P("aria-label",f(1,2,"configurator.a11y.productCode")),c(2),S(" ",o.code," ")}}function Hl(n,i){if(n&1&&(d(0,"span"),g(1,"cxTranslate"),y(2),p()),n&2){let o=l().ngIf;P("aria-label",f(1,2,"configurator.a11y.productDescription")),c(2),S(" ",o.description," ")}}function Yl(n,i){if(n&1&&(x(0),d(1,"div",18)(2,"span",19),g(3,"cxTranslate"),y(4),g(5,"cxTranslate"),p(),d(6,"span",20),y(7),p()(),b()),n&2){let o=l(2).ngIf;c(2),P("aria-label",z(3,3,"configurator.a11y.kbKeyName",L(8,kl,o.kbKey.kbName))),c(2),S(" ",f(5,6,"configurator.header.kbKeyName")," "),c(3),S(" ",o.kbKey.kbName," ")}}function zl(n,i){if(n&1&&(x(0),d(1,"div",18)(2,"span",19),g(3,"cxTranslate"),y(4),g(5,"cxTranslate"),p(),d(6,"span",20),y(7),p()(),b()),n&2){let o=l(2).ngIf;c(2),P("aria-label",z(3,3,"configurator.a11y.kbKeyLogsys",L(8,$l,o.kbKey.kbLogsys))),c(2),S(" ",f(5,6,"configurator.header.kbKeyLogsys")," "),c(3),S(" ",o.kbKey.kbLogsys," ")}}function Xl(n,i){if(n&1&&(x(0),d(1,"div",18)(2,"span",19),g(3,"cxTranslate"),y(4),g(5,"cxTranslate"),p(),d(6,"span",20),y(7),p()(),b()),n&2){let o=l(2).ngIf;c(2),P("aria-label",z(3,3,"configurator.a11y.kbKeyVersion",L(8,jl,o.kbKey.kbVersion))),c(2),S(" ",f(5,6,"configurator.header.kbKeyVersion")," "),c(3),S(" ",o.kbKey.kbVersion," ")}}function Zl(n,i){if(n&1&&(x(0),d(1,"div",18)(2,"span",19),g(3,"cxTranslate"),y(4),g(5,"cxTranslate"),p(),d(6,"span",20),y(7),p()(),b()),n&2){let o=l(2).ngIf;c(2),P("aria-label",z(3,3,"configurator.a11y.kbKeyBuildNr",L(8,Mn,o.kbKey.kbBuildNumber))),c(2),S(" ",f(5,6,"configurator.header.kbKeyBuildNr")," "),c(3),S(" ",o.kbKey.kbBuildNumber," ")}}function Jl(n,i){if(n&1&&(x(0),d(1,"div",17),_(2,Yl,8,10,"ng-container",5)(3,zl,8,10,"ng-container",5)(4,Xl,8,10,"ng-container",5)(5,Zl,8,10,"ng-container",5),p(),b()),n&2){let o=l().ngIf;c(2),u("ngIf",o.kbKey.kbName),c(),u("ngIf",o.kbKey.kbLogsys),c(),u("ngIf",o.kbKey.kbVersion),c(),u("ngIf",o.kbKey.kbBuildNumber)}}function ep(n,i){if(n&1&&(x(0),_(1,Jl,6,4,"ng-container",5),b()),n&2){let o=i.ngIf;c(),u("ngIf",o.kbKey)}}function tp(n,i){if(n&1&&(x(0),_(1,ep,2,1,"ng-container",5),g(2,"async"),b()),n&2){let o=l(2);c(),u("ngIf",f(2,1,o.configuration$))}}function ip(n,i){if(n&1){let o=$();x(0),d(1,"div",2)(2,"div",3)(3,"span"),y(4),p()(),d(5,"button",4),G("click",function(){R(o);let t=l();return D(t.triggerDetails())}),_(6,ql,7,10,"ng-container",5)(7,Kl,6,10,"ng-container",5),p(),d(8,"div",6)(9,"div",7),I(10,"cx-media",8),p(),d(11,"div",9)(12,"div",10),_(13,Ql,3,4,"span",5),p(),d(14,"div",11),_(15,Wl,3,4,"span",5),p(),d(16,"div",12),_(17,Hl,3,4,"span",5),p(),_(18,tp,3,3,"ng-container",5),g(19,"async"),p()()(),b()}if(n&2){let o=i.ngIf,e=l();c(4),S(" ",o.name," "),c(),P("aria-expanded",e.showMore),c(),u("ngIf",!e.showMore),c(),u("ngIf",e.showMore),c(),se("open",e.showMore),c(2),u("container",o==null||o.images==null?null:o.images.PRIMARY),c(),P("aria-hidden",!e.showMore),c(2),u("ngIf",o.name),c(2),u("ngIf",o.code),c(2),u("ngIf",o.description),c(),u("ngIf",f(19,12,e.expMode))}}function np(n,i){n&1&&I(0,"div",21)}function rp(n,i){if(n&1){let o=$();x(0),d(1,"div",2),G("esc",function(){let t=R(o).ngIf,r=l(2);return D(r.backToPDP(t))}),d(2,"div",3)(3,"div",4),y(4),g(5,"cxTranslate"),p(),d(6,"button",5),g(7,"cxTranslate"),G("click",function(){let t=R(o).ngIf,r=l(2);return D(r.backToPDP(t))}),d(8,"span",6),I(9,"cx-icon",7),p()()(),d(10,"div",8)(11,"div",9),y(12),g(13,"cxTranslate"),p(),d(14,"button",10),G("click",function(){let t=R(o).ngIf,r=l(2);return D(r.resume(t))}),y(15),g(16,"cxTranslate"),p(),d(17,"button",11),G("click",function(){R(o);let t=l().ngIf,r=l();return D(r.restart(t.owner))}),y(18),g(19,"cxTranslate"),p()()(),b()}if(n&2){let o=l(2);c(),u("cxFocus",o.focusConfig),c(3),S(" ",f(5,7,"configurator.restartDialog.title")," "),c(2),E("title",f(7,9,"configurator.a11y.closeRestartDialog")),c(3),u("type",o.iconTypes.CLOSE),c(3),S(" ",f(13,11,"configurator.restartDialog.description")," "),c(3),S(" ",f(16,13,"configurator.restartDialog.resumeButton")," "),c(3),S(" ",f(19,15,"configurator.restartDialog.restartButton")," ")}}function op(n,i){if(n&1&&(x(0),_(1,rp,20,17,"ng-container",1),g(2,"async"),b()),n&2){let o=l();c(),u("ngIf",f(2,1,o.product$))}}var ap=["configTab"],cp=["overviewTab"];function sp(n,i){if(n&1){let o=$();d(0,"div",6)(1,"a",7,1),g(3,"cxTranslate"),g(4,"cxTranslate"),G("keydown",function(t){R(o);let r=l(4);return D(r.switchTabOnArrowPress(t,"#configTab"))})("keydown.enter",function(){R(o);let t=l(3).ngIf,r=l();return D(r.navigateToConfiguration(t))})("keydown.space",function(){R(o);let t=l(3).ngIf,r=l();return D(r.navigateToConfiguration(t))})("click",function(){R(o);let t=l(3).ngIf,r=l();return D(r.navigateToConfiguration(t))}),y(5),g(6,"cxTranslate"),p(),d(7,"a",7,2),g(9,"cxTranslate"),g(10,"cxTranslate"),G("keydown",function(t){R(o);let r=l(4);return D(r.switchTabOnArrowPress(t,"#overviewTab"))})("keydown.enter",function(){R(o);let t=l(3).ngIf,r=l();return D(r.navigateToOverview(t))})("keydown.space",function(){R(o);let t=l(3).ngIf,r=l();return D(r.navigateToOverview(t))})("click",function(){R(o);let t=l(3).ngIf,r=l();return D(r.navigateToOverview(t))}),y(11),g(12,"cxTranslate"),p()()}if(n&2){let o=i.ngIf,e=l(4);c(),se("active",!e.isOverviewPage(o)),u("tabindex",e.getTabIndexForConfigTab(o)),P("aria-selected",!e.isOverviewPage(o))("aria-label",e.isOverviewPage(o)?f(4,14,"configurator.a11y.configurationPageLink"):f(3,12,"configurator.a11y.configurationPage")),c(4),re(f(6,16,"configurator.tabBar.configuration")),c(2),se("active",e.isOverviewPage(o)),u("tabindex",e.getTabIndexForOverviewTab(o)),P("aria-selected",e.isOverviewPage(o))("aria-label",e.isOverviewPage(o)?f(9,18,"configurator.a11y.overviewPage"):f(10,20,"configurator.a11y.overviewPageLink")),c(4),re(f(12,22,"configurator.tabBar.overview"))}}function up(n,i){if(n&1&&(x(0),_(1,sp,13,24,"div",5),g(2,"async"),b()),n&2){let o=l(3);c(),u("ngIf",f(2,1,o.pageType$))}}function lp(n,i){if(n&1&&(x(0),_(1,up,3,3,"ng-container",3),b()),n&2){let o=l().ngIf;c(),u("ngIf",!o.displayOnly)}}function pp(n,i){n&1&&I(0,"div",8)}function dp(n,i){if(n&1&&(x(0),_(1,lp,2,1,"ng-container",4),g(2,"async"),_(3,pp,1,0,"ng-template",null,0,ge),b()),n&2){let o=ae(4),e=l();c(),u("ngIf",f(2,2,e.configuration$))("ngIfElse",o)}}var gp=n=>({title:n});function fp(n,i){if(n&1&&I(0,"cx-product-carousel-item",4),n&2){let o=i.item;u("item",o)}}function mp(n,i){if(n&1&&(x(0),d(1,"div",2),I(2,"cx-carousel",3),g(3,"async"),g(4,"async"),g(5,"cxTranslate"),_(6,fp,1,1,"ng-template",null,0,ge),p(),b()),n&2){let o=i.ngIf,e=ae(7),t=l();c(2),u("items",o)("title",f(3,4,t.title$))("template",e),P("aria-label",z(5,8,"productCarousel.carouselLabel",L(11,gp,f(4,6,t.title$))))}}var m;(function(n){let i;(function(v){v.ATTRIBUTE_GROUP="AttributeGroup",v.SUB_ITEM_GROUP="SubItemGroup",v.CONFLICT_HEADER_GROUP="ConflictHeaderGroup",v.CONFLICT_GROUP="ConflictGroup"})(i=n.GroupType||(n.GroupType={}));let o;(function(v){v.NOT_IMPLEMENTED="not_implemented",v.RADIOBUTTON="radioGroup",v.RADIOBUTTON_ADDITIONAL_INPUT="radioGroup_add",v.CHECKBOX="checkBox",v.CHECKBOXLIST="checkBoxList",v.DROPDOWN="dropdown",v.DROPDOWN_ADDITIONAL_INPUT="dropdown_add",v.LISTBOX="listbox",v.LISTBOX_MULTI="listboxmulti",v.READ_ONLY="readonly",v.READ_ONLY_SINGLE_SELECTION_IMAGE="read_only_single_selection_image",v.READ_ONLY_MULTI_SELECTION_IMAGE="read_only_multi_selection_image",v.STRING="string",v.NUMERIC="numeric",v.SAP_DATE="sap_date",v.AUTO_COMPLETE_CUSTOM="input_autocomplete",v.MULTI_SELECTION_IMAGE="multi_selection_image",v.SINGLE_SELECTION_IMAGE="single_selection_image",v.CHECKBOXLIST_PRODUCT="checkBoxListProduct",v.DROPDOWN_PRODUCT="dropdownProduct",v.RADIOBUTTON_PRODUCT="radioGroupProduct"})(o=n.UiType||(n.UiType={}));let e;(function(v){v.VALUE_IMAGE="VALUE_IMAGE",v.ATTRIBUTE_IMAGE="ATTRIBUTE_IMAGE"})(e=n.ImageFormatType||(n.ImageFormatType={}));let t;(function(v){v.PRIMARY="PRIMARY",v.GALLERY="GALLERY"})(t=n.ImageType||(n.ImageType={}));let r;(function(v){v.INPUT_STRING="String",v.INPUT_NUMBER="Number",v.USER_SELECTION_QTY_ATTRIBUTE_LEVEL="UserSelectionWithAttributeQuantity",v.USER_SELECTION_QTY_VALUE_LEVEL="UserSelectionWithValueQuantity",v.USER_SELECTION_NO_QTY="UserSelectionWithoutQuantity",v.NOT_IMPLEMENTED="not_implemented"})(r=n.DataType||(n.DataType={}));let a;(function(v){v.ATTRIBUTE="Attribute",v.ATTRIBUTE_QUANTITY="AttributeQuantity",v.VALUE_QUANTITY="ValueQuantity"})(a=n.UpdateType||(n.UpdateType={}));let s;(function(v){v.GENERAL="general",v.BUNDLE="bundle"})(s=n.AttributeOverviewType||(n.AttributeOverviewType={}));let C;(function(v){v.NONE="NONE",v.NUMERIC="NUMERIC",v.SAP_DATE="SAP_DATE"})(C=n.ValidationType||(n.ValidationType={}));let T;(function(v){v.VISIBLE="PRIMARY",v.USER_INPUT="USER_INPUT",v.PRICE_RELEVANT="PRICE_RELEVANT"})(T=n.OverviewFilter||(n.OverviewFilter={})),n.ConflictIdPrefix="CONFLICT",n.ConflictHeaderId="CONFLICT_HEADER",n.CustomUiTypeIndicator="___",n.RetractValueCode="###RETRACT_VALUE_CODE###"})(m||(m={}));var Bo="productConfigurator",X="[Configurator] Configuration Data",$n="[Configurator] Read Cart Entry Configuration",jn="[Configurator] Read Cart Entry Configuration Success",Lo="[Configurator] Read Cart Entry Configuration Fail",qn="[Configurator] Read Order Entry Configuration",Kn="[Configurator] Read Order Entry Configuration Success",ko="[Configurator] Read Order Entry Configuration Fail",Qn="[Configurator] Add to cart",nn="[Configurator] Update cart entry",vp="[Configurator] Update cart entry success",Wn="[Configurator] Add next owner",Hn="[Configurator] Set next owner cart entry",Yn="[Configurator] Remove cart bound configurations",Ci=class extends Q.EntityLoadAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=$n}},yi=class extends Q.EntitySuccessAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=jn}},xi=class extends Q.EntityFailAction{constructor(i){super(X,i.ownerKey,i.error),this.payload=i,this.type=Lo}},bi=class extends Q.EntityLoadAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=qn}},Ii=class extends Q.EntitySuccessAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=Kn}},Ti=class extends Q.EntityFailAction{constructor(i){super(X,i.ownerKey,i.error),this.payload=i,this.type=ko}},Si=class extends Q.EntityProcessesIncrementAction{constructor(i){super(Un,i.cartId),this.payload=i,this.type=Qn}},Ei=class extends Q.EntityProcessesIncrementAction{constructor(i){super(Un,i.cartId),this.payload=i,this.type=nn}},wi=class{constructor(i){this.payload=i,this.type=Wn}},Oi=class{constructor(){this.type=Yn}},Ai=class extends Q.EntitySuccessAction{constructor(i){super(X,i.configuration.owner.key),this.payload=i,this.type=Hn}},Fi="[Configurator] Search Variants",$o="[Configurator]  Search Variants fail",zn="[Configurator] Search Variants success",Nt=class extends Q.EntityLoadAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=Fi}},Ri=class extends Q.EntityFailAction{constructor(i){super(X,i.ownerKey,i.error),this.payload=i,this.type=$o}},Xt=class extends Q.EntitySuccessAction{constructor(i){super(X,i.ownerKey),this.payload=i,this.type=zn}},Xn="[Configurator] Create Configuration",jo="[Configurator] Create Configuration Fail",Zn="[Configurator] Create Configuration Sucess",Jn="[Configurator] Read Configuration",qo="[Configurator] Read Configuration Fail",er="[Configurator] Read Configuration Sucess",tr="[Configurator] Update Configuration",ir="[Configurator] Update Configuration Fail",nr="[Configurator] Update Configuration Success",rr="[Configurator] Update Configuration finalize success",or="[Configurator] Update Configuration finalize fail",rn="[Configurator] Change group",Ko="[Configurator] Change group finalize",Qo="[Configurator] Remove configuration",ar="[Configurator] Update Configuration Summary Price",Wo="[Configurator] Update Configuration Price Summary fail",cr="[Configurator] Update Configuration Price Summary success",sr="[Configurator] Get Configuration Overview",Ho="[Configurator] Get Configuration Overview fail",ur="[Configurator] Get Configuration Overview success",lr="[Configurator] Update Configuration Overview",Yo="[Configurator] Update Configuration Overview fail",pr="[Configurator] Update Configuration Overview success",dr="[Configurator] Set interaction state",gr="[Configurator] Set current group to State",fr="[Configurator] Set current parent group for menu to State",mr="[Configurator] Set groups to visited",vr="[Configurator] Remove product bound configurations",on="[Configurator] Dismiss conflict dialog",_r="[Configurator] Check conflict dialog",Zt=class extends Q.EntityLoadAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=Xn}},Di=class extends Q.EntityFailAction{constructor(i){super(X,i.ownerKey,i.error),this.payload=i,this.type=jo}},Ni=class extends Q.EntitySuccessAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=Zn}},Pi=class extends Q.EntityLoadAction{constructor(i){super(X,i.configuration.owner.key),this.payload=i,this.type=Jn}},Jt=class extends Q.EntityFailAction{constructor(i){super(X,i.ownerKey,i.error),this.payload=i,this.type=qo}},ei=class extends Q.EntitySuccessAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=er}},Vi=class extends Q.EntityProcessesIncrementAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=tr,this.meta.loader={load:!0}}},Ui=class extends Q.EntityProcessesDecrementAction{constructor(i){super(X,i.configuration.owner.key),this.payload=i,this.type=ir,this.meta.loader={error:i.error}}},Gi=class extends Q.EntityProcessesDecrementAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=nr}},Mi=class extends Q.EntitySuccessAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=rr}},Bi=class extends Q.EntityFailAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=or}},mt=class extends Q.EntityLoadAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=ar}},Li=class extends Q.EntityFailAction{constructor(i){super(X,i.ownerKey,i.error),this.payload=i,this.type=Wo}},ki=class extends Q.EntitySuccessAction{constructor(i,o){super(X,i.owner.key),this.payload=i,this.type=cr,this.isDeltaRendering=o?.isDeltaRendering??!1}},ti=class extends Q.EntityLoadAction{constructor(i){super(X,i.configuration.owner.key),this.payload=i,this.type=rn}},Bn=class extends Q.EntityLoadAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=Ko}},ht=class extends Q.EntityLoaderResetAction{constructor(i){super(X,i.ownerKey),this.payload=i,this.type=Qo}},$i=class extends Q.EntityLoadAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=sr}},ji=class extends Q.EntityFailAction{constructor(i){super(X,i.ownerKey,i.error),this.payload=i,this.type=Ho}},qi=class extends Q.EntitySuccessAction{constructor(i){super(X,i.ownerKey),this.payload=i,this.type=ur}},Ki=class extends Q.EntityLoadAction{constructor(i){super(X,i.owner.key),this.payload=i,this.type=lr}},Qi=class extends Q.EntityFailAction{constructor(i){super(X,i.ownerKey,i.error),this.payload=i,this.type=Yo}},Wi=class extends Q.EntitySuccessAction{constructor(i){super(X,i.ownerKey),this.payload=i,this.type=pr}},Hi=class extends Q.EntitySuccessAction{constructor(i){super(X,i.entityKey,i.interactionState),this.payload=i,this.type=dr}},Yi=class extends Q.EntitySuccessAction{constructor(i){super(X,i.entityKey,i.currentGroup),this.payload=i,this.type=gr}},ii=class extends Q.EntitySuccessAction{constructor(i){super(X,i.entityKey,i.menuParentGroup),this.payload=i,this.type=fr}},zi=class extends Q.EntitySuccessAction{constructor(i){super(X,i.entityKey,i.visitedGroups),this.payload=i,this.type=mr}},Xi=class{constructor(){this.type=vr}},Zi=class extends Q.EntitySuccessAction{constructor(i){super(X,i),this.ownerKey=i,this.type=on}},Ji=class extends Q.EntitySuccessAction{constructor(i){super(X,i),this.ownerKey=i,this.type=_r}},xf=Object.freeze({__proto__:null,ADD_NEXT_OWNER:Wn,ADD_TO_CART:Qn,AddNextOwner:wi,AddToCart:Si,CHANGE_GROUP:rn,CHANGE_GROUP_FINALIZE:Ko,CHECK_CONFLICT_DIALOG:_r,CREATE_CONFIGURATION:Xn,CREATE_CONFIGURATION_FAIL:jo,CREATE_CONFIGURATION_SUCCESS:Zn,ChangeGroup:ti,ChangeGroupFinalize:Bn,CheckConflictDialoge:Ji,CreateConfiguration:Zt,CreateConfigurationFail:Di,CreateConfigurationSuccess:Ni,DISMISS_CONFLICT_DIALOG:on,DissmissConflictDialoge:Zi,GET_CONFIGURATION_OVERVIEW:sr,GET_CONFIGURATION_OVERVIEW_FAIL:Ho,GET_CONFIGURATION_OVERVIEW_SUCCESS:ur,GetConfigurationOverview:$i,GetConfigurationOverviewFail:ji,GetConfigurationOverviewSuccess:qi,READ_CART_ENTRY_CONFIGURATION:$n,READ_CART_ENTRY_CONFIGURATION_FAIL:Lo,READ_CART_ENTRY_CONFIGURATION_SUCCESS:jn,READ_CONFIGURATION:Jn,READ_CONFIGURATION_FAIL:qo,READ_CONFIGURATION_SUCCESS:er,READ_ORDER_ENTRY_CONFIGURATION:qn,READ_ORDER_ENTRY_CONFIGURATION_FAIL:ko,READ_ORDER_ENTRY_CONFIGURATION_SUCCESS:Kn,REMOVE_CART_BOUND_CONFIGURATIONS:Yn,REMOVE_CONFIGURATION:Qo,REMOVE_PRODUCT_BOUND_CONFIGURATIONS:vr,ReadCartEntryConfiguration:Ci,ReadCartEntryConfigurationFail:xi,ReadCartEntryConfigurationSuccess:yi,ReadConfiguration:Pi,ReadConfigurationFail:Jt,ReadConfigurationSuccess:ei,ReadOrderEntryConfiguration:bi,ReadOrderEntryConfigurationFail:Ti,ReadOrderEntryConfigurationSuccess:Ii,RemoveCartBoundConfigurations:Oi,RemoveConfiguration:ht,RemoveProductBoundConfigurations:Xi,SEARCH_VARIANTS:Fi,SEARCH_VARIANTS_FAIL:$o,SEARCH_VARIANTS_SUCCESS:zn,SET_CURRENT_GROUP:gr,SET_GROUPS_VISITED:mr,SET_INTERACTION_STATE:dr,SET_MENU_PARENT_GROUP:fr,SET_NEXT_OWNER_CART_ENTRY:Hn,SearchVariants:Nt,SearchVariantsFail:Ri,SearchVariantsSuccess:Xt,SetCurrentGroup:Yi,SetGroupsVisited:zi,SetInteractionState:Hi,SetMenuParentGroup:ii,SetNextOwnerCartEntry:Ai,UPDATE_CART_ENTRY:nn,UPDATE_CART_ENTRY_SUCCESS:vp,UPDATE_CONFIGURATION:tr,UPDATE_CONFIGURATION_FAIL:ir,UPDATE_CONFIGURATION_FINALIZE_FAIL:or,UPDATE_CONFIGURATION_FINALIZE_SUCCESS:rr,UPDATE_CONFIGURATION_OVERVIEW:lr,UPDATE_CONFIGURATION_OVERVIEW_FAIL:Yo,UPDATE_CONFIGURATION_OVERVIEW_SUCCESS:pr,UPDATE_CONFIGURATION_SUCCESS:nr,UPDATE_PRICE_SUMMARY:ar,UPDATE_PRICE_SUMMARY_FAIL:Wo,UPDATE_PRICE_SUMMARY_SUCCESS:cr,UpdateCartEntry:Ei,UpdateConfiguration:Vi,UpdateConfigurationFail:Ui,UpdateConfigurationFinalizeFail:Bi,UpdateConfigurationFinalizeSuccess:Mi,UpdateConfigurationOverview:Ki,UpdateConfigurationOverviewFail:Qi,UpdateConfigurationOverviewSuccess:Wi,UpdateConfigurationSuccess:Gi,UpdatePriceSummary:mt,UpdatePriceSummaryFail:Li,UpdatePriceSummarySuccess:ki}),an=Yr(Bo),hr=Ze(an,n=>n.configurations),vt=n=>Ze(hr,i=>Q.entityProcessesLoaderStateSelector(i,n)),Yt=n=>Ze(hr,i=>Q.entityHasPendingProcessesSelector(i,n)),Ct=n=>Ze(vt(n),i=>Q.loaderValueSelector(i)),zo=n=>Ze(Ct(n),i=>i?.interactionState?.currentGroup),Xo=(n,i)=>Ze(Ct(n),o=>{let e=o?.interactionState?.groupsVisited;return e?e[i]:!1}),Zo=(n,i)=>Ze(Ct(n),o=>i.map(e=>{let t=o?.interactionState?.groupsVisited;return t?t[e]:!1}).filter(e=>!e).length===0),bf=Object.freeze({__proto__:null,areGroupsVisited:Zo,getConfigurationFactory:Ct,getConfigurationProcessLoaderStateFactory:vt,getConfigurationState:hr,getConfigurationsState:an,getCurrentGroup:zo,hasPendingChanges:Yt,isGroupVisited:Xo}),Pt=(()=>{let i=class i{getParentGroup(e,t,r){return e.includes(t)?r:e.map(a=>a.subGroups?this.getParentGroup(a.subGroups,t,a):void 0).filter(a=>a).pop()}getGroupById(e,t){let r=e.find(s=>s.id===t);if(r)return r;let a=this.getGroupFromSubGroups(e,t);return a||e[0]}getOptionalGroupById(e,t){let r=e.find(a=>a.id===t);return r||this.getGroupFromSubGroups(e,t)}getGroupByIdIfPresent(e,t){let r=e.find(a=>a.id===t);return r||this.getGroupFromSubGroups(e,t)}getGroupFromSubGroups(e,t){return e.map(a=>a.subGroups?this.getGroupByIdIfPresent(a.subGroups,t):void 0).filter(a=>a).pop()}hasSubGroups(e){return e.subGroups?e.subGroups.length>0:!1}isConfigurationCreated(e){let t=e?.configId;return t!==void 0&&t.length!==0&&e!==void 0&&(e.flatGroups.length>0||e.overview!==void 0)}createConfigurationExtract(e,t,r){r||(r=m.UpdateType.ATTRIBUTE);let a={configId:t.configId,groups:[],flatGroups:[],interactionState:{isConflictResolutionMode:t.interactionState.isConflictResolutionMode},owner:t.owner,productCode:t.productCode,updateType:r},s=[];if(e.groupId)this.buildGroupPath(e.groupId,t.groups,s);else throw Error("GroupId must be available at attribute level during update");let C=s.length;if(C===0)throw new Error("At this point we expect that group is available in the configuration: "+e.groupId+", "+JSON.stringify(t.groups.map(w=>w.id)));let T=this.buildGroupForExtract(s[C-1]),v=T;a.groups.push(T);for(let w=s.length-1;w>0;w--)v=this.buildGroupForExtract(s[w-1]),T.subGroups=[v],T=v;return v.attributes=[e],a}buildGroupPath(e,t,r){let a=!1,s=t.find(C=>C.id===e);return s?(r.push(s),a=!0):t.filter(C=>C.subGroups).forEach(C=>{C.subGroups&&this.buildGroupPath(e,C.subGroups,r)&&(r.push(C),a=!0)}),a}getConfigurationFromState(e){let t=e.value;if(t)return t;throw new Error("Configuration must be defined at this point")}buildGroupForExtract(e){return{groupType:e.groupType,id:e.id,subGroups:[]}}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Cr=(()=>{let i=class i{constructor(e,t,r,a,s,C){this.store=e,this.activeCartService=t,this.commonConfigUtilsService=r,this.checkoutQueryFacade=a,this.userIdService=s,this.configuratorUtilsService=C}readConfigurationForCartEntry(e){return this.store.pipe(Ee(vt(e.key)),pn(()=>this.activeCartService.isStable().pipe(Y(t=>t))),pn(()=>this.checkoutQueryFacade.getCheckoutDetailsState().pipe(A(t=>t.loading),Y(t=>!t))),Ce(t=>{this.configurationNeedsReading(t)&&this.activeCartService.requireLoadedCart().pipe(O(1)).subscribe(r=>{this.userIdService.getUserId().pipe(O(1)).subscribe(a=>{let s={userId:a,cartId:this.commonConfigUtilsService.getCartId(r),cartEntryNumber:e.id,owner:e};this.store.dispatch(new Ci(s))})})}),Y(t=>t.value!==void 0&&this.isConfigurationCreated(t.value)),A(t=>this.configuratorUtilsService.getConfigurationFromState(t)))}readConfigurationForOrderEntry(e){return this.store.pipe(Ee(vt(e.key)),Ce(t=>{if(this.configurationNeedsReading(t)){let r=this.commonConfigUtilsService.decomposeOwnerId(e.id);this.userIdService.getUserId().pipe(O(1)).subscribe(a=>{let s={userId:a,orderId:r.documentId,orderEntryNumber:r.entryNumber,owner:e};this.store.dispatch(new bi(s))})}}),Y(t=>t.value!==void 0&&this.isConfigurationCreated(t.value)),A(t=>this.configuratorUtilsService.getConfigurationFromState(t)))}addToCart(e,t,r,a){this.activeCartService.requireLoadedCart().pipe(O(1)).subscribe(s=>{this.userIdService.getUserId().pipe(O(1)).subscribe(C=>{let T={userId:C,cartId:this.commonConfigUtilsService.getCartId(s),productCode:e,quantity:a??1,configId:t,owner:r};this.store.dispatch(new Si(T))})})}updateCartEntry(e){this.activeCartService.requireLoadedCart().pipe(O(1)).subscribe(t=>{this.userIdService.getUserId().pipe(O(1)).subscribe(r=>{let a={userId:r,cartId:this.commonConfigUtilsService.getCartId(t),cartEntryNumber:e.owner.id,configuration:e};this.store.dispatch(new Ei(a))})})}activeCartHasIssues(){return this.activeCartService.requireLoadedCart().pipe(A(e=>e?e.entries:[]),A(e=>e?e.filter(t=>this.commonConfigUtilsService.getNumberOfIssues(t)):[]),A(e=>e.length>0))}getEntry(e){return this.activeCartService.requireLoadedCart().pipe(A(t=>t.entries?t.entries:[]),A(t=>{let r=t.filter(a=>a.entryNumber?.toString()===e);return r?r[r.length-1]:void 0}))}removeCartBoundConfigurations(){this.store.dispatch(new Oi)}isConfigurationCreated(e){return e.configId.length!==0}configurationNeedsReading(e){let t=e.value;return t===void 0||!this.isConfigurationCreated(t)&&!e.loading&&!e.error}};i.\u0275fac=function(t){return new(t||i)(U(st),U(Qt),U(nt),U(bo),U(Jr),U(Pt))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),ie=(()=>{let i=class i{constructor(e,t,r,a,s){this.store=e,this.commonConfigUtilsService=t,this.configuratorCartService=r,this.activeCartService=a,this.configuratorUtils=s,this.logger=ee(je)}hasPendingChanges(e){return this.store.pipe(Ee(Yt(e.key)))}isConfigurationLoading(e){return this.store.pipe(Ee(vt(e.key)),A(t=>t.loading??!1))}getConfiguration(e){return this.store.pipe(Ee(Ct(e.key)),Y(t=>this.configuratorUtils.isConfigurationCreated(t)))}getOrCreateConfiguration(e,t){switch(e.type){case ce.OwnerType.CART_ENTRY:return this.configuratorCartService.readConfigurationForCartEntry(e);case ce.OwnerType.ORDER_ENTRY:case ce.OwnerType.QUOTE_ENTRY:case ce.OwnerType.SAVED_CART_ENTRY:return this.configuratorCartService.readConfigurationForOrderEntry(e);default:return this.getOrCreateConfigurationForProduct(e,t)}}updateConfiguration(e,t,r){r||(r=m.UpdateType.ATTRIBUTE),this.activeCartService.getActive().pipe(O(1),N(a=>this.activeCartService.isStable().pipe(O(1),Ce(s=>{Xe()&&a.code&&!s&&this.logger.warn("Cart is busy, no configuration updates possible")}),Y(s=>!a.code||s),N(()=>this.store.pipe(Ee(Ct(e)),O(1)))))).subscribe(a=>{this.store.dispatch(new Vi(this.configuratorUtils.createConfigurationExtract(t,a,r)))})}getConfigurationWithOverview(e){return this.filterNotLoadingAndCreatedConfiguration(this.store.pipe(Ee(vt(e.owner.key)))).pipe(Ce(t=>{this.hasConfigurationOverview(t)||this.store.dispatch(new $i(e))}),Y(t=>this.hasConfigurationOverview(t)))}filterNotLoadingAndCreatedConfiguration(e){return e.pipe(Y(t=>t.loading===!1),Y(t=>this.configuratorUtils.isConfigurationCreated(t.value)),A(t=>t.value))}updateConfigurationOverview(e){this.store.dispatch(new Ki(e))}removeConfiguration(e){this.store.dispatch(new ht({ownerKey:e.key}))}dismissConflictSolverDialog(e){this.store.dispatch(new Zi(e.key))}checkConflictSolverDialog(e){this.store.dispatch(new Ji(e.key))}hasConflicts(e){return this.getConfiguration(e).pipe(A(t=>t.immediateConflictResolution===!1&&t.groups[0]?.groupType===m.GroupType.CONFLICT_HEADER_GROUP))}forceNewConfiguration(e){this.store.dispatch(new ht({ownerKey:e.key})),this.store.dispatch(new Zt({owner:e,configIdTemplate:void 0,forceReset:!0}))}getOrCreateConfigurationForProduct(e,t){return this.store.pipe(Ee(vt(e.key)),Ce(r=>{(r.value===void 0||!this.configuratorUtils.isConfigurationCreated(r.value))&&r.loading!==!0&&r.error!==!0&&this.store.dispatch(new Zt({owner:e,configIdTemplate:t}))}),Y(r=>r.value!==void 0&&this.configuratorUtils.isConfigurationCreated(r.value)),A(r=>this.configuratorUtils.getConfigurationFromState(r)))}hasConfigurationOverview(e){return e.overview!==void 0}removeProductBoundConfigurations(){this.store.dispatch(new Xi)}};i.\u0275fac=function(t){return new(t||i)(U(st),U(nt),U(Cr),U(Qt),U(Pt))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Jo=(()=>{let i=class i{constructor(e,t){this.store=e,this.configuratorUtilsService=t}isGroupVisited(e,t){return this.store.select(Xo(e.key,t))}getFirstIncompleteGroup(e){return e.flatGroups?e.flatGroups.filter(t=>t.groupType!==m.GroupType.CONFLICT_GROUP).find(t=>!t.complete):void 0}setGroupStatusVisited(e,t){let r=this.configuratorUtilsService.getGroupById(e.groups,t),a=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,t)),s=[];s.push(r.id),a&&this.getParentGroupStatusVisited(e,r.id,a,s),this.store.dispatch(new zi({entityKey:e.owner.key,visitedGroups:s}))}areGroupsVisited(e,t){return this.store.select(Zo(e.key,t))}getParentGroupStatusVisited(e,t,r,a){let s=[];r.subGroups.forEach(C=>{C.id!==t&&s.push(C.id)}),this.areGroupsVisited(e.owner,s).pipe(O(1)).subscribe(C=>{if(C){a.push(r.id);let T=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,r.id));T&&this.getParentGroupStatusVisited(e,r.id,T,a)}})}};i.\u0275fac=function(t){return new(t||i)(U(st),U(Pt))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Ye=(()=>{let i=class i{constructor(e,t,r,a){this.store=e,this.configuratorCommonsService=t,this.configuratorUtilsService=r,this.configuratorGroupStatusService=a}getCurrentGroupId(e){return this.configuratorCommonsService.getConfiguration(e).pipe(A(t=>t.interactionState.currentGroup?t.interactionState.currentGroup:t.groups[0]?.id))}getFirstConflictGroup(e){return e.flatGroups.find(t=>t.groupType===m.GroupType.CONFLICT_GROUP)}navigateToFirstIncompleteGroup(e){this.configuratorCommonsService.getConfiguration(e).pipe(O(1)).subscribe(t=>{let r=this.configuratorGroupStatusService.getFirstIncompleteGroup(t)?.id;r&&this.navigateToGroup(t,r,!0)})}navigateToConflictSolver(e){this.configuratorCommonsService.getConfiguration(e).pipe(O(1)).subscribe(t=>{let r=this.getFirstConflictGroup(t)?.id;r&&this.navigateToGroup(t,r,!0,!0)})}getMenuParentGroup(e){return this.configuratorCommonsService.getConfiguration(e).pipe(A(t=>{let r=t.interactionState.menuParentGroup;return r?this.configuratorUtilsService.getOptionalGroupById(t.groups,r):void 0}))}setMenuParentGroup(e,t){this.store.dispatch(new ii({entityKey:e.key,menuParentGroup:t}))}getCurrentGroup(e){return this.getCurrentGroupId(e).pipe(N(t=>this.configuratorCommonsService.getConfiguration(e).pipe(A(r=>this.configuratorUtilsService.getGroupById(r.groups,t)))))}getConflictGroupForImmediateConflictResolution(e){return this.configuratorCommonsService.getConfiguration(e).pipe(Ge(0),A(t=>{if(t.interactionState.showConflictSolverDialog)return t.flatGroups.find(r=>r.groupType===m.GroupType.CONFLICT_GROUP)}))}setGroupStatusVisited(e,t){this.configuratorCommonsService.getConfiguration(e).pipe(A(r=>this.configuratorGroupStatusService.setGroupStatusVisited(r,t)),O(1)).subscribe()}navigateToGroup(e,t,r=!0,a=!1){r&&this.getCurrentGroup(e.owner).pipe(O(1)).subscribe(C=>{this.configuratorGroupStatusService.setGroupStatusVisited(e,C.id)});let s=this.configuratorUtilsService.getParentGroup(e.groups,this.configuratorUtilsService.getGroupById(e.groups,t));this.store.dispatch(new ti({configuration:e,groupId:t,parentGroupId:s?s.id:void 0,conflictResolutionMode:a}))}getNextGroupId(e){return this.getNeighboringGroupId(e,1)}getPreviousGroupId(e){return this.getNeighboringGroupId(e,-1)}isGroupVisited(e,t){return this.configuratorGroupStatusService.isGroupVisited(e,t)}getParentGroup(e,t){return this.configuratorUtilsService.getParentGroup(e,t)}hasSubGroups(e){return this.configuratorUtilsService.hasSubGroups(e)}isConflictGroupInImmediateConflictResolutionMode(e,t=!1){return e?e===m.GroupType.CONFLICT_GROUP&&t:!1}getNeighboringGroupId(e,t){return this.getCurrentGroupId(e).pipe(N(r=>this.configuratorCommonsService.getConfiguration(e).pipe(A(a=>{let s;return a.flatGroups.forEach((C,T)=>{C.id===r&&a.flatGroups&&a.flatGroups[T+t]&&!this.isConflictGroupInImmediateConflictResolutionMode(a.flatGroups[T+t]?.groupType,a.immediateConflictResolution)&&(s=a.flatGroups[T+t].id)}),s}),O(1))))}isConflictGroupType(e){return e===m.GroupType.CONFLICT_HEADER_GROUP||e===m.GroupType.CONFLICT_GROUP}};i.\u0275fac=function(t){return new(t||i)(U(st),U(ie),U(Pt),U(Jo))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),de=(()=>{let i=class i{constructor(e,t,r){this.configuratorGroupsService=e,this.windowRef=t,this.keyboardFocusService=r,this.productService=ee(We),this.routingService=ee(Je),this.CX_PREFIX="cx",this.SEPARATOR="--",this.ADD_TO_CART_BUTTON_HEIGHT=82,this.logger=ee(je)}isCartEntryOrGroupVisited(e,t){return this.configuratorGroupsService.isGroupVisited(e,t).pipe(O(1),A(r=>r?!0:e.type===ce.OwnerType.CART_ENTRY))}assembleValuesForMultiSelectAttributes(e,t){let r=[];for(let a=0;a<e.length;a++){let s=t.values?t.values[a]:void 0;if(s){let C={valueCode:s.valueCode};C.name=s.name,C.quantity=s.quantity,C.selected=e[a].value,r.push(C)}else Xe()&&this.logger.warn("ControlArray does not match values, at least one value could not been found")}return r}scroll(e){let t=0;e instanceof HTMLElement&&(t=e.offsetTop),this.windowRef.nativeWindow?.scroll(0,t)}scrollToConfigurationElement(e){if(this.windowRef.isBrowser()){let t=this.getElement(e);t&&this.scroll(t)}}focusFirstAttribute(){this.focusFirstActiveElement("cx-configurator-form")}focusFirstActiveElement(e){if(!this.windowRef.isBrowser())return;let t=this.getElement(e);if(t){let r=this.keyboardFocusService.findFocusable(t);r&&r.length>0&&r[0].focus()}}getFocusableElementById(e,t){return e.find(r=>{if(t&&(r.nodeName.toLocaleLowerCase().indexOf(t)!==-1||r.id.indexOf(t)!==-1))return r})}getFocusableConflictDescription(e){return this.getFocusableElementById(e,"cx-configurator-conflict-description")}getFocusableElementByValueUiKey(e,t){return this.getFocusableElementById(e,t)}getFocusableElementByAttributeId(e,t){return this.getFocusableElementById(e,t)}createAttributeValueUiKey(e,t){return e+this.SEPARATOR+t}focusValue(e){if(!this.windowRef.isBrowser())return;let t=this.getElement("cx-configurator-form");if(t){let r=this.keyboardFocusService.findFocusable(t);r.length>0&&this.focusOnElements(r,e)}}focusOnElements(e,t){let r=this.getFocusableConflictDescription(e);r||(r=this.focusOnElementForConflicting(t,r,e)),r&&r.focus()}focusOnElementForConflicting(e,t,r){let a=e.values?.find(s=>s.selected);if(a){let s=this.createAttributeValueUiKey(e.name,a.valueCode);t=this.getFocusableElementByValueUiKey(r,s)}return t||(t=this.getFocusableElementByAttributeId(r,e.name)),t}getPrefixId(e,t){return e?e+this.SEPARATOR+t:this.CX_PREFIX+this.SEPARATOR+t}createGroupId(e){if(e)return e+"-group"}createOvGroupId(e,t){return this.getPrefixId(e,t)+"-ovGroup"}createOvMenuItemId(e,t){return this.getPrefixId(e,t)+"-ovMenuItem"}setFocus(e,t){e&&this.keyboardFocusService.set(e,t)}changeStyling(e,t,r){let a=this.getElement(e);a&&a.style.setProperty(t,r)}removeStyling(e,t){let r=this.getElement(e);r&&r.style.removeProperty(t)}getElement(e){if(this.windowRef.isBrowser())return this.windowRef.document.querySelector(e)}getElements(e){if(this.windowRef.isBrowser())return Array.from(this.windowRef.document.querySelectorAll(e))}getVerticallyScrolledPixels(){if(this.windowRef.isBrowser())return this.windowRef.nativeWindow?.scrollY}hasScrollbar(e){let t=this.getElement(e);return t?t.scrollHeight>t.clientHeight:!1}isInViewport(e){if(e){let t=e.getBoundingClientRect(),r=e.offsetHeight,a=e.offsetWidth;return t.top>=-r&&t.left>=-a&&t.right<=(this.windowRef.nativeWindow?.innerWidth||e.clientWidth)+a&&t.bottom<=(this.windowRef.nativeWindow?.innerHeight||e.clientHeight)+r}return!1}getHeight(e){let t=this.getElement(e);return this.isInViewport(t)&&t?.offsetHeight?t?.offsetHeight:0}getSpareViewportHeight(){if(this.windowRef.isBrowser()){let e=this.getHeight("header"),t=this.getHeight(".VariantConfigOverviewHeader"),r=this.getHeight("cx-configurator-add-to-cart-button")!==0?this.getHeight("cx-configurator-add-to-cart-button"):this.ADD_TO_CART_BUTTON_HEIGHT,a=e+t+r*2;return this.windowRef.nativeWindow?this.windowRef.nativeWindow.innerHeight-a:0}return 0}ensureElementVisible(e,t){let r=this.getElement(e);if(t&&r)if(t.offsetTop>r.scrollTop){let a=t.offsetTop+t.offsetHeight;a>r.scrollTop&&(r.scrollTop=a-r.offsetHeight)}else r.scrollTop=t.getBoundingClientRect()?.top-10}isDisplayOnlyVariant(){return this.routingService.getRouterState().pipe(N(e=>e.state.params.displayOnly&&e.state.queryParams.productCode?this.productService.get(e.state.queryParams.productCode,"list"):Se(void 0)),A(e=>(e&&!!e.baseProduct)??!1))}setLastSelected(e,t){this.lastSelected={attributeName:e,valueCode:t}}isLastSelected(e,t){return!!this.lastSelected&&this.lastSelected.attributeName===e&&this.lastSelected.valueCode===t}};i.\u0275fac=function(t){return new(t||i)(U(Ye),U(At),U(dt))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),ea=(()=>{let i=class i{constructor(){this._quantity=new ai(1)}setQuantity(e){this._quantity.next(e)}getQuantity(){return this._quantity}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),So="cx-configurator-add-to-cart-button",_p=(()=>{let i=class i{constructor(e,t,r,a,s,C,T,v,w,K,oe){this.routingService=e,this.configuratorCommonsService=t,this.configuratorCartService=r,this.configuratorGroupsService=a,this.configRouterExtractorService=s,this.globalMessageService=C,this.orderHistoryFacade=T,this.commonConfiguratorUtilsService=v,this.configUtils=w,this.intersectionService=K,this.configuratorQuantityService=oe,this.subscription=new $e,this.multiCartFacade=ee(yo),this.focusService=ee(dt),this.activeCartFacade=ee(Qt),this.quantityControl=new Te(1),this.iconType=pe,this.container$=this.configRouterExtractorService.extractRouterData().pipe(N(Et=>this.configuratorCommonsService.getConfiguration(Et.owner).pipe(A(Gt=>({routerData:Et,configuration:Gt}))).pipe(N(Gt=>this.configuratorCommonsService.hasPendingChanges(Gt.configuration.owner).pipe(A(_a=>({routerData:Gt.routerData,configuration:Gt.configuration,hasPendingChanges:_a})))))))}ngOnInit(){this.makeAddToCartButtonSticky(),this.configuratorQuantityService.getQuantity().pipe(O(1)).subscribe(e=>{this.quantityControl.setValue(e)}),this.subscription.add(this.quantityControl.valueChanges.pipe(Bt()).subscribe(()=>this.configuratorQuantityService.setQuantity(this.quantityControl.value)))}navigateToCart(){this.routingService.go("cart")}navigateToOverview(e,t,r){this.routingService.go({cxRoute:"configureOverview"+e,params:{ownerType:"cartEntry",entityKey:t.id}},{queryParams:{productCode:r}}).then(()=>{this.focusOverviewInTabBar()})}focusOverviewInTabBar(){this.configRouterExtractorService.extractRouterData().pipe(N(e=>this.configuratorCommonsService.getConfiguration(e.owner)),Y(e=>e.overview!=null),O(1),Ge(0)).subscribe(()=>{this.focusService.clear(),this.configUtils.focusFirstActiveElement("cx-configurator-tab-bar")})}displayConfirmationMessage(e){this.globalMessageService.add({key:e},xn.MSG_TYPE_CONFIRMATION)}isQuoteCartActive(){return this.activeCartFacade.getActive().pipe(A(e=>e.quoteCode!==void 0))}getTranslationKeyForAddToCart(e){return this.isQuoteCartActive().pipe(A(t=>t?"configurator.addToCart.confirmationQuoteUpdate":e?"configurator.addToCart.confirmation":"configurator.addToCart.confirmationUpdate"))}performNavigation(e,t,r,a,s,C){a?this.navigateToCart():this.navigateToOverview(e,t,C),s&&this.getTranslationKeyForAddToCart(r).pipe(O(1)).subscribe(T=>{this.displayConfirmationMessage(T)})}getButtonResourceKey(e,t,r=!1){return(e.isOwnerCartEntry||r)&&t.isCartEntryUpdateRequired?"configurator.addToCart.buttonUpdateCart":e.isOwnerCartEntry&&!t.isCartEntryUpdateRequired?r?"configurator.addToCart.buttonForQuote":"configurator.addToCart.buttonAfterAddToCart":"configurator.addToCart.button"}isCartEntry(e){return e.isOwnerCartEntry?e.isOwnerCartEntry:!1}onAddToCart(e,t){let r=t.pageType,a=e.owner.configuratorType,s=r===ft.PageType.OVERVIEW,C=t.owner.type===ce.OwnerType.CART_ENTRY,T=e.owner,v=t.productCode?t.productCode:e.productCode,w=e.interactionState.currentGroup;w&&this.configuratorGroupsService.setGroupStatusVisited(e.owner,w),this.container$.pipe(Y(K=>!K.hasPendingChanges),O(1)).subscribe(()=>{C?this.onUpdateCart(e,a,T,s,v):this.onAddToCartForProduct(T,e,a,s,v)})}onAddToCartForProduct(e,t,r,a,s){let C=this.quantityControl.value;this.configuratorCartService.addToCart(e.id,t.configId,e,C),this.configuratorCommonsService.getConfiguration(e).pipe(Y(T=>T.nextOwner!==void 0),O(1)).subscribe(T=>{this.navigateForProductBound(T,r,a,s)})}navigateForProductBound(e,t,r,a){let s=e.nextOwner??it.createInitialOwner();this.performNavigation(t,s,!0,r,!0,a),r||this.configuratorCommonsService.removeConfiguration(s)}onUpdateCart(e,t,r,a,s){e.isCartEntryUpdateRequired&&this.configuratorCartService.updateCartEntry(e),this.performNavigation(t,r,!1,a,e.isCartEntryUpdateRequired??!1,s),e.isCartEntryUpdateRequired&&!a&&this.configuratorCommonsService.removeConfiguration(r)}leaveConfigurationOverview(){this.container$.pipe(O(1)).subscribe(e=>{e.routerData.owner.type===ce.OwnerType.ORDER_ENTRY?this.goToOrderDetails(e.routerData.owner):e.routerData.owner.type===ce.OwnerType.QUOTE_ENTRY?this.goToQuoteDetails(e.routerData.owner):e.routerData.owner.type===ce.OwnerType.SAVED_CART_ENTRY?this.goToSavedCartDetails(e.routerData.owner):e.routerData.owner.type===ce.OwnerType.CART_ENTRY&&!e.routerData.navigateToCheckout?this.routingService.go({cxRoute:"cart"}):e.routerData.owner.type===ce.OwnerType.PRODUCT?this.routingService.go({cxRoute:"product",params:{code:e.routerData.owner.id}}):this.routingService.go({cxRoute:"checkoutReviewOrder"})})}goToOrderDetails(e){this.orderHistoryFacade.loadOrderDetails(this.commonConfiguratorUtilsService.decomposeOwnerId(e.id).documentId),this.orderHistoryFacade.getOrderDetails().pipe(Y(t=>t!==void 0),O(1)).subscribe(t=>this.routingService.go({cxRoute:"orderDetails",params:t}))}goToQuoteDetails(e){let t=this.commonConfiguratorUtilsService.decomposeOwnerId(e.id);this.routingService.go({cxRoute:"quoteDetails",params:{quoteId:t.documentId}})}goToSavedCartDetails(e){let t=this.commonConfiguratorUtilsService.decomposeOwnerId(e.id);this.multiCartFacade.getCart(t.documentId).pipe(O(1)).subscribe(r=>{this.routingService.go({cxRoute:"quoteDetails",params:{quoteId:r.quoteCode}})})}extractConfigPrices(e){let t=e.priceSummary,r=t?.basePrice?.formattedValue,a=t?.selectedOptions?.formattedValue,s=t?.currentTotal?.formattedValue,C={basePrice:r,selectedOptions:a,totalPrice:s};return(!r||r==="-")&&(C.basePrice="0"),(!a||a==="-")&&(C.selectedOptions="0"),(!s||s==="-")&&(C.totalPrice="0"),C}makeAddToCartButtonSticky(){let e={rootMargin:"9999px 0px -100px 0px"};this.subscription.add(this.container$.pipe(O(1),Ge(0),A(()=>this.configUtils.getElement("cx-configurator-price-summary")),N(t=>t?this.intersectionService.isIntersecting(t,e):Se(void 0)),Y(t=>t!==void 0)).subscribe(t=>{t?this.configUtils.changeStyling(So,"position","sticky"):this.configUtils.changeStyling(So,"position","fixed")}))}ngOnDestroy(){this.subscription.unsubscribe()}};i.\u0275fac=function(t){return new(t||i)(h(Je),h(ie),h(Cr),h(Ye),h(he),h(bn),h(xo),h(nt),h(de),h(lo),h(ea))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-add-to-cart-button"]],decls:2,vars:3,consts:[["displayOnly",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"cx-add-to-cart-btn-container"],[1,"cx-quantity-add-to-cart-container"],[1,"cx-quantity-add-to-cart-row"],[1,"cx-quantity"],[3,"control"],[1,"cx-btn","btn","btn-block","btn-primary","cx-add-to-cart-btn",3,"click","title"],[3,"type"],[1,"cx-btn","btn","btn-block","btn-primary","cx-add-to-cart-btn",3,"click"],[1,"cx-display-only-btn-container"],[1,"cx-btn","btn","btn-block","btn-secondary","cx-display-only-btn",3,"click"]],template:function(t,r){t&1&&(_(0,ba,4,2,"ng-container",1),g(1,"async")),t&2&&u("ngIf",f(1,1,r.container$))},dependencies:[H,Dn,be,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),hp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorAddToCartButton:{component:_p}}})],imports:[k,W,_i,Ie]});let n=i;return n})(),Cp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:function(t){let r=null;return t?r=new(t||i):r=U(Qe),r},providedIn:"root"});let n=i;return n})(),Ae=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac});let n=i;return n})(),yp=(()=>{let i=class i{constructor(e,t){this.vcr=e,this.configuratorAttributeCompositionConfig=t,this.logger=ee(je),this.featureConfigService=ee(lt),this.attrComponentAssignment=this.configuratorAttributeCompositionConfig.productConfigurator?.assignment??[]}ngOnInit(){if(!this.featureConfigService.isEnabled("productConfiguratorDeltaRendering")){let e=this.context.componentKey;this.renderComponent(this.attrComponentAssignment[e],e)}}ngOnChanges(){if(this.featureConfigService.isEnabled("productConfiguratorDeltaRendering")){let e=!In.deepEqualObjects(this.lastRenderedAttribute,this.context.attribute),t=this.lastRenderedGroupId!==this.context.group.id;if(e||t){let r=this.context.componentKey;this.renderComponent(this.attrComponentAssignment[r],r)}}}renderComponent(e,t){e?(this.lastRenderedAttribute=this.context.attribute,this.lastRenderedGroupId=this.context.group.id,this.vcr.clear(),this.vcr.createComponent(e,{injector:this.getComponentInjector()})):Xe()&&this.logger.warn("No attribute type component available for: "+t)}getComponentInjector(){return Ur.create({providers:[{provide:Ae,useValue:this.context}],parent:this.vcr.injector})}};i.\u0275fac=function(t){return new(t||i)(h(Mr),h(Cp))},i.\u0275dir=ui({type:i,selectors:[["","cxConfiguratorAttributeComponent",""]],inputs:{context:[Vr.None,"cxConfiguratorAttributeComponent","context"]},features:[dn]});let n=i;return n})(),ta=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k]});let n=i;return n})(),Vt=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:function(t){let r=null;return t?r=new(t||i):r=U(Qe),r},providedIn:"root"});let n=i;return n})(),rt=(()=>{let i=class i{constructor(){this.configuratorRouterExtractorService=ee(he),this.configuratorCommonsService=ee(ie)}getChangedPrices(e){let t=!0;return this.configuratorRouterExtractorService.extractRouterData().pipe(N(r=>this.configuratorCommonsService.getConfiguration(r.owner).pipe(Y(a=>t||!!a.priceSupplements),N(a=>{if(!a.priceSupplements)return Se({});let s=this.checkForValuePriceChanges(a,e);return s?Se(s):ln}),Ce(()=>t=!1))),Nr({bufferSize:1,refCount:!0}))}checkForValuePriceChanges(e,t){let r=e.priceSupplements?.find(s=>s.attributeUiKey===t);if(!In.deepEqualObjects(this.lastAttributeSupplement??{},r??{})){let s={};return this.lastAttributeSupplement=r,r?.valueSupplements.forEach(C=>s[C.attributeValueKey]=C.priceValue),s}}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac});let n=i;return n})(),qe=(()=>{let i=class i{constructor(){this.configuratorUISettingsConfig=ee(Vt),this.translation=ee(we),this.configuratorAttributePriceChangeService=ee(rt,{optional:!0}),this.configuratorStorefrontUtilsService=ee(de),this._featureConfigService=ee(lt),this.changedPrices$=Se({})}initPriceChangedEvent(e=!1,t){e&&this.configuratorAttributePriceChangeService&&this._featureConfigService.isEnabled("productConfiguratorDeltaRendering")&&(this.listenForPriceChanges=!0,this.changedPrices$=this.configuratorAttributePriceChangeService.getChangedPrices(t))}createValueUiKey(e,t,r){return this.createAttributeUiKey(e,t)+i.SEPERATOR+r}createAttributeValueIdForConfigurator(e,t){return this.createValueUiKey(this.getUiType(e),e.name,t)}getUiType(e){return e.uiType?e.uiType:m.UiType.NOT_IMPLEMENTED}createAttributeUiKey(e,t){return i.PREFIX+i.SEPERATOR+e+i.SEPERATOR+t}createAttributeIdForConfigurator(e){return this.createAttributeUiKey(this.getUiType(e),e.name)}createAriaLabelledBy(e,t,r,a){let s=this.createAttributeUiKey(i.PREFIX_LABEL,t);return r&&(s+=" "+this.createAttributeUiKey(e,t)+i.SEPERATOR+r+" ",typeof a=="boolean"&&!a?s+=this.createAttributeUiKey(i.PREFIX_DDLB_OPTION_PRICE_VALUE,t)+i.SEPERATOR+r:s+=this.createAttributeUiKey(i.PREFIX_OPTION_PRICE_VALUE,t)+i.SEPERATOR+r),s}createFocusId(e,t){return`${e}--${t}--focus`}getLabel(e,t,r,a){let s=t||"";return e&&r&&(s+=` / [${r}]`),s+=this.getValuePrice(a),s}getImageLabel(e,t,r,a){let s=this.getLabel(e,t,r,a);return s?.trim().length>=i.MAX_IMAGE_LABEL_CHARACTERS?s.substring(0,i.MAX_IMAGE_LABEL_CHARACTERS).concat("..."):s}getImage(e){let t=e.images;return t?t[0]:void 0}getAriaLabelForValueWithPrice(e){return e?"configurator.a11y.readOnlyValueOfAttributeFullWithPrice":"configurator.a11y.valueOfAttributeFullWithPrice"}getAriaLabelForValue(e){return e?"configurator.a11y.readOnlyValueOfAttributeFull":"configurator.a11y.valueOfAttributeFull"}getImgStyleClasses(e,t,r){return this.isReadOnly(e)||(r+=" cx-img-hover",t.selected&&(r+=" cx-img-selected")),r}getValuePrice(e){if(e?.valuePrice?.value&&!e.selected){if(e.valuePrice.value<0)return` [${e.valuePrice?.formattedValue}]`;if(e.valuePrice.value>0)return` [+${e.valuePrice?.formattedValue}]`}return""}getAttributeCode(e){let t=e.attrCode;if(t)return t;throw new Error("No attribute code for: "+e.name)}isWithAdditionalValues(e){let t=e.uiType;return t===m.UiType.RADIOBUTTON_ADDITIONAL_INPUT||t===m.UiType.DROPDOWN_ADDITIONAL_INPUT}isRequiredErrorMsg(e){return e.required&&e.incomplete||!1}isUserInput(e){return e.uiType===m.UiType.STRING||e.uiType===m.UiType.NUMERIC}isDropDown(e){return e.uiType===m.UiType.DROPDOWN||e.uiType===m.UiType.DROPDOWN_PRODUCT}getSelectedValue(e){return e.values?.find(t=>t.selected)}isNoValueSelected(e){let t=this.getSelectedValue(e);return t?t.valueCode===m.RetractValueCode:!0}getValueDescriptionLength(){return this.configuratorUISettingsConfig.productConfigurator?.descriptions?.valueDescriptionLength??70}isReadOnly(e){return e.uiType?e.uiType===m.UiType.READ_ONLY||e.uiType===m.UiType.READ_ONLY_SINGLE_SELECTION_IMAGE||e.uiType===m.UiType.READ_ONLY_MULTI_SELECTION_IMAGE:!1}isValueDisplayed(e,t){return this.isReadOnly(e)&&t.selected||!this.isReadOnly(e)}getAriaLabelGeneric(e,t,r=!1){let a="";if(t){let s={value:t.valueDisplay,attribute:e.label},C=r&&t.selected,T=C?"configurator.a11y.selectedValueOfAttributeFullWithPrice":this.getAriaLabelForValueWithPrice(this.isReadOnly(e));t.valuePriceTotal&&t.valuePriceTotal?.value!==0?s.price=t.valuePriceTotal.formattedValue:t.valuePrice&&t.valuePrice?.value!==0?s.price=t.valuePrice.formattedValue:T=C?"configurator.a11y.selectedValueOfAttributeFull":this.getAriaLabelForValue(this.isReadOnly(e)),this.translation.translate(T,s).pipe(O(1)).subscribe(v=>a=v)}return a}extractValuePriceFormulaParameters(e){return{quantity:e?.quantity,price:e?.valuePrice,priceTotal:e?.valuePriceTotal,isLightedUp:e?.selected}}enrichValueWithPrice(e,t){if(e&&t&&e.valueCode in t){let r=t[e.valueCode];r&&(e=V(F({},e),{valuePrice:r}))}return e}isLastSelected(e,t){return this.configuratorStorefrontUtilsService.isLastSelected(e,t)}};i.SEPERATOR="--",i.PREFIX="cx-configurator",i.PREFIX_LABEL="label",i.PREFIX_OPTION_PRICE_VALUE="price--optionsPriceValue",i.PREFIX_DDLB_OPTION_PRICE_VALUE="option--price",i.MAX_IMAGE_LABEL_CHARACTERS=16;let n=i;return n})(),xp=(()=>{let i=class i extends qe{constructor(e,t){super(),this.configUtils=e,this.attributeComponentContext=t,this.iconType=pe,this.attribute=t.attribute,this.owner=t.owner,this.groupId=t.group.id}ngOnInit(){this.showRequiredMessageForUserInput$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe(A(e=>e?this.needsRequiredAttributeErrorMsg():!1))}needsRequiredAttributeErrorMsg(){return this.needsUserInputMsg()||this.needsDropDownMsg()}needsDropDownMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isDropDown(this.attribute)&&this.isNoValueSelected(this.attribute)}isUserInputEmpty(e){return e!==void 0&&(!e.trim()||e.length===0)}needsUserInputMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isUserInput(this.attribute)&&this.isUserInputEmpty(this.attribute.userInput)}};i.\u0275fac=function(t){return new(t||i)(h(de),h(Ae))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-footer"]],features:[xe],decls:2,vars:3,consts:[["class","cx-required-error-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-required-error-msg",3,"id"],[3,"type"],[4,"ngIf"]],template:function(t,r){t&1&&(_(0,Sa,6,9,"div",0),g(1,"async")),t&2&&u("ngIf",f(1,1,r.showRequiredMessageForUserInput$))},dependencies:[H,be,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),bp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{Footer:xp}}})],imports:[ue,le,k,W,Ie]});let n=i;return n})(),xt=(()=>{let i=class i{constructor(e){this.cdRef=e,this.showMore=!1,this.showHiddenText=!1,this.config=ee(Qe),this.textSize=60,this.tabIndex=-1,et("productConfiguratorAttributeTypesV2")}ngAfterViewInit(){this.textNormalized=this.normalize(this.text),this.textNormalized.length>this.textSize?(this.showMore=!0,this.textToShow=this.textNormalized.substring(0,this.textSize)):this.textToShow=this.textNormalized,this.cdRef.detectChanges()}toggleShowMore(){this.showHiddenText=!this.showHiddenText,this.showHiddenText?this.textToShow=this.textNormalized:this.textToShow=this.textNormalized.substring(0,this.textSize),this.cdRef.detectChanges()}normalize(e=""){return e.replace(/<[^>]*>/g,"")}};i.\u0275fac=function(t){return new(t||i)(h(Lr))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-show-more"]],inputs:{text:"text",textSize:"textSize",productName:"productName",tabIndex:"tabIndex"},decls:1,vars:1,consts:[["less",""],[4,"ngIf"],[3,"innerHTML"],[3,"tabindex","click",4,"ngIf"],[3,"click","tabindex"],[4,"ngIf","ngIfElse"]],template:function(t,r){t&1&&_(0,Fa,4,8,"ng-container",1),t&2&&u("ngIf",r.text&&(r.config.features==null?null:r.config.features.productConfiguratorAttributeTypesV2))},dependencies:[H,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Ip=(()=>{let i=class i extends qe{constructor(e,t,r,a,s){super(),this.configUtils=e,this.configuratorCommonsService=t,this.configuratorGroupsService=r,this.configuratorUiSettings=a,this.attributeComponentContext=s,this.iconTypes=pe,this.logger=ee(je),this.attribute=s.attribute,this.owner=s.owner,this.groupId=s.group.id,this.groupType=s.group.groupType??m.GroupType.ATTRIBUTE_GROUP,this.expMode=s.expMode,this.isNavigationToGroupEnabled=s.isNavigationToGroupEnabled??!1}ngOnInit(){this.showRequiredMessageForDomainAttribute$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe(A(e=>e&&this.needsRequiredAttributeErrorMsg()))}getRequiredMessageKey(){return this.isSingleSelection()?this.isWithAdditionalValues(this.attribute)?"configurator.attribute.singleSelectAdditionalRequiredMessage":"configurator.attribute.singleSelectRequiredMessage":this.isMultiSelection?"configurator.attribute.multiSelectRequiredMessage":"configurator.attribute.singleSelectRequiredMessage"}get isMultiSelection(){switch(this.attribute.uiType){case m.UiType.CHECKBOXLIST:case m.UiType.CHECKBOXLIST_PRODUCT:case m.UiType.MULTI_SELECTION_IMAGE:return!0}return!1}isSingleSelection(){switch(this.attribute.uiType){case m.UiType.RADIOBUTTON:case m.UiType.RADIOBUTTON_ADDITIONAL_INPUT:case m.UiType.RADIOBUTTON_PRODUCT:case m.UiType.CHECKBOX:case m.UiType.DROPDOWN_ADDITIONAL_INPUT:case m.UiType.SINGLE_SELECTION_IMAGE:return!0}return!1}isAttributeWithoutErrorMsg(e){switch(e){case m.UiType.NOT_IMPLEMENTED:case m.UiType.STRING:case m.UiType.NUMERIC:case m.UiType.CHECKBOX:case m.UiType.DROPDOWN:case m.UiType.DROPDOWN_PRODUCT:return!1}return!0}needsRequiredAttributeErrorMsg(){return this.isRequiredAttributeWithoutErrorMsg()}isRequiredAttributeWithoutErrorMsg(){return this.isRequiredErrorMsg(this.attribute)&&this.isAttributeWithoutErrorMsg(this.attribute.uiType)}isAttributeGroup(){return m.GroupType.ATTRIBUTE_GROUP===this.groupType}isConflictResolutionActive(){return this.isAttributeGroup()&&this.isNavigationToGroupEnabled}getConflictMessageKey(){return this.groupType===m.GroupType.CONFLICT_GROUP?"configurator.conflict.viewConfigurationDetails":this.isNavigationToConflictEnabled()?"configurator.conflict.viewConflictDetails":"configurator.conflict.conflictDetected"}get hasImage(){let e=this.attribute.images;return e?e.length>0:!1}get image(){let e=this.attribute.images;return e&&this.hasImage?e[0]:void 0}navigateToGroup(){this.configuratorCommonsService.getConfiguration(this.owner).pipe(O(1)).subscribe(e=>{let t;this.groupType===m.GroupType.CONFLICT_GROUP?t=this.attribute.groupId:t=this.findConflictGroupId(e,this.attribute),t?(this.configuratorGroupsService.navigateToGroup(e,t),this.focusValue(this.attribute),this.scrollToAttribute(this.attribute.name)):this.logError('Attribute was not found in any conflict group. Note that for this navigation, commerce 22.05 or later is required. Consider to disable setting "enableNavigationToConflict"')})}scrollToAttribute(e){this.onNavigationCompleted(()=>this.configUtils.scrollToConfigurationElement("#"+this.createAttributeUiKey("label",e)))}findConflictGroupId(e,t){return e.flatGroups.filter(r=>r.groupType===m.GroupType.CONFLICT_GROUP).find(r=>r.attributes?.find(a=>a.key===t.key))?.id}logError(e){Xe()&&this.logger.error(e)}focusValue(e){this.onNavigationCompleted(()=>this.configUtils.focusValue(e))}onNavigationCompleted(e){this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe(Y(t=>t),O(1),N(()=>this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe(Y(t=>!t),O(1),Ge(0)))).subscribe(e)}isNavigationToConflictEnabled(){return(this.isNavigationToGroupEnabled&&this.configuratorUISettingsConfig.productConfigurator?.enableNavigationToConflict)??!1}getAttributeDescriptionLength(){return this.configuratorUISettingsConfig.productConfigurator?.descriptions?.attributeDescriptionLength??100}};i.\u0275fac=function(t){return new(t||i)(h(de),h(ie),h(Ye),h(Vt),h(Ae))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-header"]],features:[xe],decls:16,vars:27,consts:[["conflictGroup",""],["withoutLink",""],["class","cx-hidden-msg",4,"ngIf"],[3,"id"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],["class","cx-conflict-msg",3,"id",4,"ngIf"],["class","cx-required-error-msg",3,"id",4,"ngIf"],["class","cx-attribute-img",3,"src","alt",4,"ngIf"],[1,"cx-hidden-msg"],["aria-hidden","true",3,"type"],[3,"text","textSize","productName","tabIndex"],[1,"cx-conflict-msg",3,"id"],["aria-hidden","true",3,"type",4,"ngIf"],[4,"ngIf","ngIfElse"],["tabindex","0","role","link",1,"link","cx-action-link",3,"click","keydown.enter"],[1,"cx-required-error-msg",3,"id"],[3,"type"],[1,"cx-attribute-img",3,"src","alt"],["class","link cx-action-link","tabindex","0","role","link",3,"click","keydown.enter",4,"ngIf"],[1,"cx-conflict-msg"]],template:function(t,r){t&1&&(_(0,Da,4,4,"div",2),d(1,"label",3),g(2,"async"),g(3,"cxTranslate"),g(4,"cxTranslate"),d(5,"span"),y(6),p()(),_(7,Na,1,4,"cx-configurator-show-more",4)(8,Ga,4,10,"div",5)(9,Ma,5,8,"div",6),g(10,"async"),_(11,Ba,1,2,"img",7)(12,ka,1,1,"ng-template",null,0,ge)(14,$a,3,3,"ng-template",null,1,ge)),t&2&&(u("ngIf",!r.attribute.visible),c(),se("cx-required-error",f(2,13,r.showRequiredMessageForDomainAttribute$)),E("id",r.createAttributeUiKey("label",r.attribute.name)),P("aria-label",r.attribute.required?z(4,18,"configurator.a11y.requiredAttribute",L(25,Ra,r.attribute.label)):z(3,15,"configurator.a11y.attribute",L(23,_t,r.attribute.label))),c(4),se("cx-required-icon",r.attribute.required),P("aria-describedby",r.createAttributeUiKey("label",r.attribute.name)),c(),re(r.getLabel(r.expMode,r.attribute.label,r.attribute.name)),c(),u("ngIf",r.attribute.description),c(),u("ngIf",r.attribute.hasConflicts),c(),u("ngIf",f(10,21,r.showRequiredMessageForDomainAttribute$)),c(2),u("ngIf",r.hasImage))},dependencies:[H,be,xt,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),bt=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k,W]});let n=i;return n})(),Tp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{Header:Ip}}})],imports:[ue,le,k,W,Ie,tt,bt]});let n=i;return n})(),It=(()=>{let i=class i{constructor(e){this.config=e,this.quantity=new Te(1),this.optionsChangeSub=new $e,this.quantityChangeSub=new $e,this.changeQuantity=new Lt}ngOnInit(){this.quantity.setValue(this.quantityOptions?.initialQuantity),this.optionsChangeSub.add(this.quantityOptions.disableQuantityActions$?.pipe(Fr()).subscribe(e=>{e?(this.quantity.disable(),this.quantityChangeSub.unsubscribe()):(this.quantity.enable(),this.quantityChangeSub.add(this.subscribeToQuantityChange()))}))}subscribeToQuantityChange(){return this.quantity.valueChanges.pipe(si(()=>ci(this.config.productConfigurator?.updateDebounceTime?.quantity??0)),O(1)).subscribe(()=>this.onChangeQuantity())}ngOnDestroy(){this.optionsChangeSub.unsubscribe(),this.quantityChangeSub.unsubscribe()}onChangeQuantity(){this.changeQuantity.emit(this.quantity?.value)}};i.\u0275fac=function(t){return new(t||i)(h(Vt))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-quantity"]],inputs:{quantityOptions:"quantityOptions"},outputs:{changeQuantity:"changeQuantity"},decls:5,vars:6,consts:[[1,"cx-quantity"],[3,"allowZero","control","min"]],template:function(t,r){if(t&1&&(d(0,"div",0)(1,"label"),y(2),g(3,"cxTranslate"),p(),I(4,"cx-item-counter",1),p()),t&2){let a;c(2),re(f(3,4,"configurator.attribute.quantity")),c(2),u("allowZero",(a=r.quantityOptions.allowZero)!==null&&a!==void 0?a:!1)("control",r.quantity)("min",r.quantityOptions.allowZero?0:1)}},dependencies:[Dn,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Pe=(()=>{let i=class i{constructor(e){this.directionService=e,et("productConfiguratorAttributeTypesV2")}isRTLDirection(){return this.directionService.getDirection()===fi.RTL}removeSign(e,t){return e?e.replace(t,""):""}addSign(e,t,r){return e?r?t+e:e+t:""}compileFormattedValue(e,t,r){if(e>0)return this.addSign(t,"+",!r);if(r){let a=this.removeSign(t,"-");return this.addSign(a,"-",!1)}return t??""}get price(){return this.formula.priceTotal?this.priceTotal:this.compileFormattedValue(this.formula.price?.value??0,this.formula.price?.formattedValue,this.isRTLDirection())}get priceTotal(){return this.compileFormattedValue(this.formula.priceTotal?.value??0,this.formula.priceTotal?.formattedValue,this.isRTLDirection())}displayQuantityAndPrice(){let e=this.formula.quantity;return e?this.formula.price?.value!==0&&e>=1:!1}displayPriceOnly(){let e=this.formula.price?.value??0,t=this.formula.priceTotal?.value??0;return(e!==0||t!==0)&&!this.displayQuantityAndPrice()}displayFormula(){return(this.formula.quantity&&this.formula.quantity!==0||this.formula.price&&this.formula.price?.value!==0||this.formula.priceTotal&&this.formula.priceTotal?.value!==0)??!1}quantityWithPrice(e){return e+"x("+this.formula.price?.formattedValue+")"}isPriceLightedUp(){return this.formula.isLightedUp??!1}get styleClass(){let e="cx-price";return this.isPriceLightedUp()||(e+=" cx-greyed-out"),e}};i.\u0275fac=function(t){return new(t||i)(h(Nn))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-price"]],inputs:{formula:"formula"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],[1,"cx-quantity-price"],[1,"cx-price-total"]],template:function(t,r){t&1&&_(0,Ka,3,2,"ng-container",0),t&2&&u("ngIf",r.displayFormula())},dependencies:[Ue,H,te,Tn],encapsulation:2,changeDetection:0});let n=i;return n})(),yr=(()=>{let i=class i extends qe{constructor(e,t,r){super(),this.productService=e,this.keyBoardFocus=t,this.translation=r,this.loading$=new Mt(!0),this.showDeselectionNotPossible=!1,this.handleDeselect=new Lt,this.handleQuantity=new Lt,this.handleSelect=new Lt,this.iconType=pe}ngOnInit(){this.loading$.next(!0);let e=this.productCardOptions.productBoundValue.productSystemId;this.product$=this.productService.get(e||"",Io.CONFIGURATOR_PRODUCT_CARD).pipe(A(t=>t||this.transformToProductType(this.productCardOptions.productBoundValue)),Ce(()=>this.loading$.next(!1)))}get showQuantity(){return(this.productCardOptions.withQuantity&&this.productCardOptions.productBoundValue.selected&&this.productCardOptions.multiSelect)??!1}get focusConfig(){return{key:this.createFocusId(this.productCardOptions.attributeId.toString(),this.productCardOptions.productBoundValue.valueCode)}}onHandleSelect(){this.loading$.next(!0),this.productCardOptions.hideRemoveButton&&this.productCardOptions.fallbackFocusId&&this.keyBoardFocus.set(this.productCardOptions.fallbackFocusId),this.handleSelect.emit(this.productCardOptions.productBoundValue.valueCode)}onHandleDeselect(){{if(this.productCardOptions.productBoundValue.selected&&this.productCardOptions.hideRemoveButton){this.showDeselectionNotPossibleMessage();return}this.loading$.next(!0),this.handleDeselect.emit(this.productCardOptions.productBoundValue.valueCode)}}onChangeQuantity(e){e?this.onHandleQuantity(e):this.onHandleDeselect()}isProductCardSelected(){return(this.productCardOptions.productBoundValue&&this.productCardOptions.productBoundValue.selected&&!this.productCardOptions.singleDropdown)??!1}hasPriceDisplay(){return!!(this.productCardOptions.productBoundValue.valuePrice||this.productCardOptions.productBoundValue.quantity||this.productCardOptions.productBoundValue.valuePriceTotal)}extractPriceFormulaParameters(){return this.productCardOptions.multiSelect?{quantity:this.productCardOptions.productBoundValue.quantity,price:this.productCardOptions.productBoundValue.valuePrice,priceTotal:this.productCardOptions.productBoundValue.valuePriceTotal,isLightedUp:this.productCardOptions.productBoundValue.selected}:{price:this.productCardOptions.productBoundValue.valuePrice,isLightedUp:this.productCardOptions.productBoundValue.selected}}extractQuantityParameters(){let e=this.productCardOptions.productBoundValue.quantity,t=this.productCardOptions.loading$?Or([this.loading$,this.productCardOptions.loading$]).pipe(A(r=>r[0]||r[1])):this.loading$;return{allowZero:!this.productCardOptions.hideRemoveButton,initialQuantity:e||0,disableQuantityActions$:t}}isValueCodeDefined(e){return!!(e&&e!==m.RetractValueCode)}transformToProductType(e){return{code:e?.productSystemId,description:e?.description,images:{},name:e?.valueDisplay}}onHandleQuantity(e){this.loading$.next(!0),this.handleQuantity.emit({quantity:e,valueCode:this.productCardOptions.productBoundValue.valueCode})}showDeselectionNotPossibleMessage(){this.showDeselectionNotPossible=!0}getAriaLabelSingleUnselected(e){let t="",r=this.productCardOptions.itemIndex+1;return this.isValueCodeDefined(this.productCardOptions?.productBoundValue?.valueCode)?this.hasPriceDisplay()&&this.productCardOptions.productBoundValue.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe(O(1)).subscribe(a=>t=a):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount}).pipe(O(1)).subscribe(a=>t=a):this.translation.translate("configurator.a11y.selectNoItemOfAttribute",{attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount}).pipe(O(1)).subscribe(a=>t=a),t}getAriaLabelSingleSelected(e){let t="",r=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&this.productCardOptions.productBoundValue.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe(O(1)).subscribe(a=>t=a):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount}).pipe(O(1)).subscribe(a=>t=a),t}getAriaLabelSingleSelectedNoButton(e){let t="",r=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&this.productCardOptions.productBoundValue.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeSelectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe(O(1)).subscribe(a=>t=a):this.translation.translate("configurator.a11y.itemOfAttributeSelected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount}).pipe(O(1)).subscribe(a=>t=a),t}getAriaLabelMultiSelected(e){let t="",r=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&this.productCardOptions.productBoundValue.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe(O(1)).subscribe(a=>t=a):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount}).pipe(O(1)).subscribe(a=>t=a),t}getAriaLabelMultiUnselected(e){let t="",r=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&this.productCardOptions.productBoundValue.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe(O(1)).subscribe(a=>t=a):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:e.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:r,itemCount:this.productCardOptions.itemCount}).pipe(O(1)).subscribe(a=>t=a),t}};i.\u0275fac=function(t){return new(t||i)(h(We),h(dt),h(we))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-product-card"]],inputs:{productCardOptions:"productCardOptions"},outputs:{handleDeselect:"handleDeselect",handleQuantity:"handleQuantity",handleSelect:"handleSelect"},features:[xe],decls:2,vars:3,consts:[["single",""],["select",""],["deselect",""],[4,"ngIf"],[1,"cx-product-card",3,"ngClass"],[1,"cx-product-card-rows"],[1,"cx-product-card-imgs"],["format","product","aria-hidden","true",3,"container"],[1,"cx-product-card-info"],[1,"cx-product-card-name"],["class","cx-product-card-code",4,"ngIf"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],["class","cx-product-card-rows column",4,"ngIf"],[1,"cx-product-card-code"],[3,"text","textSize","productName","tabIndex"],[1,"cx-product-card-rows","column"],[1,"cx-product-card-quantity-price"],[1,"cx-product-card-quantity"],[3,"quantityOptions","changeQuantity",4,"ngIf"],[1,"cx-product-card-price"],[3,"formula"],[1,"cx-product-card-action"],["class","cx-product-card-action-btn",4,"ngIf"],[3,"changeQuantity","quantityOptions"],[1,"cx-product-card-action-btn"],[4,"ngIf","ngIfElse"],["class","btn btn-secondary",3,"cxFocus","click",4,"ngIf","ngIfElse"],[1,"btn","btn-secondary",3,"click","cxFocus"],[1,"btn","btn-primary",3,"click","disabled","cxFocus"],["class","btn btn-primary",3,"disabled","cxFocus","click",4,"ngIf","ngIfElse"],["class","btn btn-secondary",3,"disabled","cxFocus","click",4,"ngIf"],["class","cx-visually-hidden","tabindex","0",4,"ngIf"],[1,"btn","btn-secondary",3,"click","disabled","cxFocus"],["tabindex","0",1,"cx-visually-hidden"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-product-card-rows","deselection-error-message",3,"id"],["type","ERROR",1,"deselection-error-symbol"]],template:function(t,r){t&1&&(_(0,sc,14,15,"ng-container",3),g(1,"async")),t&2&&u("ngIf",f(1,1,r.product$))},dependencies:[Ue,H,xt,It,mi,Pe,Oe,be,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Ve=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k,W]});let n=i;return n})(),Sp={productConfigurator:{updateDebounceTime:{quantity:750,input:500,date:1500},addRetractOption:!1,enableNavigationToConflict:!0,descriptions:{attributeDescriptionLength:100,valueDescriptionLength:70}}},Tt=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z(Sp)],imports:[k,W,_i,me]});let n=i;return n})(),xr=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k,bt,Tt,W,ut,pt,ue,le,vi,Ve,me,Ie]});let n=i;return n})(),Ut=(()=>{let i=class i{disableQuantityActions(e){return!e||e==="0"||e===m.RetractValueCode}disableQuantityActionsMultiSelection(e){return e.dataType===m.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL&&(!e.values||!e.values.find(t=>t.selected)||e.quantity===0)}withQuantityOnAttributeLevel(e){return e.dataType===m.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL}withQuantity(e,t){switch(t){case m.UiType.DROPDOWN_PRODUCT:case m.UiType.DROPDOWN:case m.UiType.RADIOBUTTON_PRODUCT:case m.UiType.RADIOBUTTON:return e===m.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;case m.UiType.CHECKBOXLIST:case m.UiType.CHECKBOXLIST_PRODUCT:return e===m.DataType.USER_SELECTION_QTY_VALUE_LEVEL;default:return!1}}allowZeroValueQuantity(e){let t=e.values?e.values.filter(r=>r.selected).length:0;return!(e.required&&t<2)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),cn=(()=>{let i=class i extends qe{constructor(e,t,r,a,s){super(),this.quantityService=e,this.translation=t,this.attributeComponentContext=r,this.configuratorCommonsService=a,this.configuratorStorefrontUtilsService=s,this.loading$=new Mt(!1),this.showRequiredErrorMessage$=Se(!1),this.attribute=r.attribute,this.ownerKey=r.owner.key,this.ownerType=r.owner.type,this.language=r.language,this.expMode=r.expMode,this.showRequiredErrorMessage$=this.configuratorStorefrontUtilsService.isCartEntryOrGroupVisited(r.owner,r.group.id).pipe(A(C=>C&&this.isRequiredErrorMsg(this.attribute)&&this.isDropDown(this.attribute)&&this.isNoValueSelected(this.attribute)||!1)),this.initPriceChangedEvent(r.isPricingAsync,r.attribute.key)}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??m.DataType.NOT_IMPLEMENTED,this.attribute.uiType??m.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActions(this.attribute.selectedSingleValue)}onSelect(e){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,V(F({},this.attribute),{selectedSingleValue:e}),m.UpdateType.ATTRIBUTE)}onSelectAdditionalValue(e){let t=e.changedAttribute.userInput;t&&(this.loading$.next(!0),e.changedAttribute.selectedSingleValue=t,this.configuratorCommonsService.updateConfiguration(e.ownerKey,e.changedAttribute,m.UpdateType.ATTRIBUTE))}onHandleQuantity(e){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,V(F({},this.attribute),{quantity:e}),m.UpdateType.ATTRIBUTE_QUANTITY)}onChangeQuantity(e,t){e?this.onHandleQuantity(e):(t&&t.setValue("0"),this.onSelect(""))}getInitialQuantity(e){let t=this.attribute.quantity??0;return e?e.value!=="0"?t:0:this.attribute.selectedSingleValue?t:0}extractQuantityParameters(e){let t=this.getInitialQuantity(e),r=this.loading$.pipe(A(a=>a||this.disableQuantityActions));return{allowZero:!this.attribute.required,initialQuantity:t,disableQuantityActions$:r}}extractPriceFormulaParameters(){return{quantity:this.attribute.quantity,price:this.getSelectedValuePrice(),priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractValuePriceFormulaParameters(e){return{price:e?.valuePrice,isLightedUp:e?e.selected:!1}}getSelectedValuePrice(){return this.attribute.values?.find(e=>e.selected)?.valuePrice}get isAdditionalValueNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===m.ValidationType.NUMERIC}get isAdditionalValueAlphaNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===m.ValidationType.NONE}getAriaLabel(e,t){let r=this.getAriaLabelWithoutAdditionalValue(e,t);if(this.isWithAdditionalValues(this.attribute)){let a=this.getAdditionalValueAriaLabel();return r+" "+a}else return r}getAdditionalValueAriaLabel(){let e="";return this.translation.translate("configurator.a11y.additionalValue").pipe(O(1)).subscribe(t=>e=t),e}getAriaLabelWithoutAdditionalValue(e,t){return this.getAriaLabelGeneric(t,e,!0)}};i.\u0275fac=function(t){return new(t||i)(h(Ut),h(we),h(Ae),h(ie),h(de))},i.\u0275dir=ui({type:i,features:[xe]});let n=i;return n})(),ia=(()=>{let i=class i extends qe{constructor(e,t,r){super(),this.quantityService=e,this.attributeComponentContext=t,this.configuratorCommonsService=r,this.loading$=new Mt(!1),this.attribute=t.attribute,this.ownerKey=t.owner.key,this.expMode=t.expMode,this.initPriceChangedEvent(t.isPricingAsync,t.attribute.key)}get withQuantityOnAttributeLevel(){return this.quantityService.withQuantityOnAttributeLevel(this.attribute)}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??m.DataType.NOT_IMPLEMENTED,this.attribute.uiType??m.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActionsMultiSelection(this.attribute)}extractQuantityParameters(e,t){let r=this.loading$.pipe(A(a=>a||this.disableQuantityActions));return{allowZero:t??!this.attribute.required,initialQuantity:e,disableQuantityActions$:r}}onHandleAttributeQuantity(e){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,V(F({},this.attribute),{quantity:e}),m.UpdateType.ATTRIBUTE_QUANTITY)}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}};i.\u0275fac=function(t){return new(t||i)(h(Ut),h(Ae),h(ie))},i.\u0275dir=ui({type:i,features:[xe]});let n=i;return n})(),Ep=(()=>{let i=class i extends ia{constructor(e,t,r,a){super(t,r,a),this.configUtilsService=e,this.quantityService=t,this.attributeComponentContext=r,this.configuratorCommonsService=a,this.attributeCheckBoxForms=new Array,this.logger=ee(je),this.group=r.group.id}ngOnInit(){for(let e of this.attribute.values??[]){let t;e.selected?t=new Te(!0):t=new Te(!1),this.attributeCheckBoxForms.push(t)}}get allowZeroValueQuantity(){return this.quantityService.allowZeroValueQuantity(this.attribute)}onSelect(e){let t=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute);e&&this.listenForPriceChanges&&this.configUtilsService.setLastSelected(this.attribute.name,e),this.configuratorCommonsService.updateConfiguration(this.ownerKey,V(F({},this.attribute),{values:t}),m.UpdateType.ATTRIBUTE)}onChangeValueQuantity(e,t,r){if(e===0){this.attributeCheckBoxForms[r].setValue(!1),this.onSelect(t);return}let a=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute).find(s=>s.valueCode===t);if(!a){Xe()&&this.logger.warn("no value for event:",e);return}a.quantity=e,this.configuratorCommonsService.updateConfiguration(this.ownerKey,V(F({},this.attribute),{values:[a]}),m.UpdateType.VALUE_QUANTITY)}onChangeQuantity(e){e?this.onHandleAttributeQuantity(e):(this.attributeCheckBoxForms.forEach((t,r)=>this.attributeCheckBoxForms[r].setValue(!1)),this.onSelect())}};i.\u0275fac=function(t){return new(t||i)(h(de),h(Ut),h(Ae),h(ie))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-checkbox-list"]],features:[ze([rt]),xe],decls:5,vars:4,consts:[[2,"display","none"],[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula"],[1,"form-check"],[1,"cx-value-label-pair"],["type","checkbox",1,"form-check-input",3,"change","id","cxFocus","value","formControl","name"],["aria-hidden","true",1,"cx-configurator-attribute-value-label","form-check-label",3,"id","for"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],[1,"cx-value-price"],[3,"quantityOptions","changeQuantity",4,"ngIf"],[3,"text","textSize","productName","tabIndex"]],template:function(t,r){t&1&&(d(0,"fieldset")(1,"legend",0),y(2),p(),_(3,gc,3,3,"div",1),g(4,"async"),p()),t&2&&(c(2),re(r.attribute.label),c(),u("ngIf",f(4,2,r.changedPrices$)))},dependencies:[Oe,qt,Le,ke,ye,H,It,Pe,xt,J],encapsulation:2,changeDetection:0});let n=i;return n})(),wp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_checkBoxList:Ep}}})],imports:[me,ue,le,k,W,Tt,Ve,bt]});let n=i;return n})(),Op=(()=>{let i=class i extends qe{constructor(e,t){super(),this.attributeComponentContext=e,this.configuratorCommonsService=t,this.attributeCheckBoxForm=new Te(""),this.attribute=e.attribute,this.group=e.group.id,this.ownerKey=e.owner.key,this.expMode=e.expMode,this.initPriceChangedEvent(e.isPricingAsync,e.attribute.key)}ngOnInit(){this.attributeCheckBoxForm.setValue(this.attribute.selectedSingleValue),this.attributeValue=this.getValueFromAttribute()}onSelect(e){let t=this.assembleSingleValue();e&&this.listenForPriceChanges&&this.configuratorStorefrontUtilsService.setLastSelected(this.attribute.name,e),this.configuratorCommonsService.updateConfiguration(this.ownerKey,V(F({},this.attribute),{values:t}),m.UpdateType.ATTRIBUTE)}getValueFromAttribute(){return this.attribute.values?this.attribute.values[0]:{valueCode:""}}assembleSingleValue(){let e=[],t=this.getValueFromAttribute(),r={valueCode:t.valueCode};return r.name=t.name,r.selected=this.attributeCheckBoxForm.value,e.push(r),e}};i.\u0275fac=function(t){return new(t||i)(h(Ae),h(ie))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-checkbox"]],features:[ze([rt]),xe],decls:7,vars:5,consts:[[2,"display","none"],[3,"id"],["class","form-check",4,"ngIf"],[1,"form-check"],[1,"cx-value-label-pair"],["type","checkbox",1,"form-check-input",3,"change","id","value","cxFocus","formControl","name"],["aria-hidden","true",1,"form-check-label",3,"id","for"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],[1,"cx-value-price"],[3,"formula"],[3,"text","textSize","productName","tabIndex"]],template:function(t,r){t&1&&(x(0),d(1,"fieldset")(2,"legend",0),y(3),p(),d(4,"div",1),_(5,mc,8,15,"div",2),g(6,"async"),p()(),b()),t&2&&(c(3),re(r.attribute.label),c(),E("id",r.createAttributeIdForConfigurator(r.attribute)),c(),u("ngIf",f(6,3,r.changedPrices$)))},dependencies:[Oe,qt,Le,ke,H,Pe,xt,J],encapsulation:2,changeDetection:0});let n=i;return n})(),Ap=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_checkBox:Op}}})],imports:[me,ue,le,k,W,Ve,bt]});let n=i;return n})(),ni=(()=>{let i=class i extends qe{constructor(e,t,r,a){super(),this.config=e,this.attributeComponentContext=t,this.configuratorCommonsService=r,this.configuratorStorefrontUtilsService=a,this.attributeInputForm=new Te(""),this.showRequiredErrorMessage$=Se(!1),this.debounceForDateActive=!1,this.FALLBACK_DEBOUNCE_TIME=500,this.FALLBACK_DEBOUNCE_TIME_DATE=1500,this.attribute=t.attribute,this.group=t.group.id,this.owner=t.owner,this.ownerKey=t.owner.key,this.ownerType=t.owner.type,this.compileShowRequiredErrorMessage()}ngOnInit(){this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===ce.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.sub=this.attributeInputForm.valueChanges.pipe(si(()=>ci(this.calculateDebounceTime()))).subscribe(()=>{this.onChange()})}onChange(){this.attributeInputForm.invalid||this.configuratorCommonsService.updateConfiguration(this.ownerKey,V(F({},this.attribute),{userInput:this.attributeInputForm.value,selectedSingleValue:this.attributeInputForm.value}),m.UpdateType.ATTRIBUTE)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}get isUserInputEmpty(){return!this.attribute.userInput||this.attribute.userInput.trim().length===0}get isRequired(){return this.isUserInput(this.attribute)?this.attribute.required??!1:!1}get inputType(){return this.isDateBased(this.attribute)?"date":"text"}activateDebounceDate(){this.debounceForDateActive=!0}isDateBased(e){return e.uiType===m.UiType.SAP_DATE||this.isWithAdditionalValues(e)&&e.validationType===m.ValidationType.SAP_DATE}compileShowRequiredErrorMessage(){this.showRequiredErrorMessage$=this.configuratorStorefrontUtilsService.isCartEntryOrGroupVisited(this.owner,this.group).pipe(A(e=>e?this.isRequiredErrorMsg(this.attribute)&&this.isUserInput(this.attribute):!1))}calculateDebounceTime(){return this.isDateBased(this.attribute)?this.debounceForDateActive?this.config.productConfigurator?.updateDebounceTime?.date??this.FALLBACK_DEBOUNCE_TIME_DATE:0:this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME}};i.\u0275fac=function(t){return new(t||i)(h(Vt),h(Ae),h(ie),h(de))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-input-field"]],features:[xe],decls:6,vars:28,consts:[[1,"form-group",3,"id"],["class","cx-visually-hidden",3,"id",4,"ngIf"],[1,"form-control",3,"keydown","formControl","type","ngClass","maxlength","cxFocus"],[1,"cx-visually-hidden",3,"id"]],template:function(t,r){t&1&&(d(0,"div",0),_(1,vc,3,13,"label",1),d(2,"input",2),g(3,"async"),g(4,"cxTranslate"),g(5,"cxTranslate"),G("keydown",function(){return r.activateDebounceDate()}),p()()),t&2&&(E("id",r.createAttributeIdForConfigurator(r.attribute)),c(),u("ngIf",r.inputType==="date"),c(),se("ng-invalid",r.isRequired&&r.isUserInputEmpty),E("type",r.inputType),E("maxlength",r.attribute.maxlength),u("formControl",r.attributeInputForm)("ngClass",L(19,ri,f(3,11,r.showRequiredErrorMessage$)))("cxFocus",L(21,Ne,r.createAttributeIdForConfigurator(r.attribute))),P("aria-label",r.isUserInputEmpty?z(4,13,"configurator.a11y.valueOfAttributeBlank",L(23,_t,r.attribute.label)):z(5,16,"configurator.a11y.valueOfAttributeFull",Be(25,zt,r.attribute.userInput,r.attribute.label)))("aria-describedby",r.inputType==="date"?r.createAttributeUiKey("labelForDate",r.attribute.name):r.createAttributeUiKey("label",r.attribute.name)))},dependencies:[Oe,Kt,Le,An,ke,Ue,H,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Fp=(()=>{let i=class i{performValidationAccordingToMetaData(e,t,r,a,s){let C="\\",T=new RegExp(C+t,"g"),v=e.replace(T,""),w=v.split(r);return w.length>2?!0:w.length===1?v.length>a-s:w[0].length>a-s||w[1].length>s}formatIntervalValue(e,t,r){return t===void 0&&(t=0),hn(e,r,"1."+t+"-"+t)}getIntervals(e){let t=[];return e&&e.length>0&&e.forEach(r=>{let a=this.getInterval(r);a&&Object.keys(a).length!==0&&t.push(a)}),t}getInterval(e){let t={minValue:void 0,maxValue:void 0,minValueIncluded:!1,maxValueIncluded:!1};if(!e||!e.name||e.selected)return;let r,a;return e.name.includes(" - ")?{minVal:r,maxVal:a}=this.handleStandardInterval(e.name,t):{minVal:r,maxVal:a}=this.handleSingleOrInfinite(e.name,t),r&&r.length>0&&(t.minValue=+r),a&&a.length>0&&(t.maxValue=+a),t}handleSingleOrInfinite(e,t){let r="",a="";return e.includes(">")&&(r=e,t.minValueIncluded=!1,r=r.replace(">","")),e.includes("<")&&(a=e,t.maxValueIncluded=!1,a=a.replace("<","")),e.includes("\u2265")&&(r=e,t.minValueIncluded=!0,r=r.replace("\u2265","")),e.includes("\u2264")&&(a=e,t.maxValueIncluded=!0,a=a.replace("\u2264","")),!e.includes(">")&&!e.includes("<")&&!e.includes("\u2264")&&!e.includes("\u2265")&&(r=e,a=e,t.maxValueIncluded=!0,t.minValueIncluded=!0),{minVal:r,maxVal:a}}handleStandardInterval(e,t){let r=e.indexOf(" - "),a=e.substring(0,r),s=e.substring(r+3,e.length);return t.minValueIncluded=!0,t.maxValueIncluded=!0,a.includes(">")&&(t.minValueIncluded=!1,a=a.replace(">","")),s.includes("<")&&(t.maxValueIncluded=!1,s=s.replace("<","")),{minVal:a,maxVal:s}}getPatternForValidationMessage(e,t,r,a){let s=(10**t-1).toString();e>0&&(s=s.substring(0,t-e)+"."+s.substring(t-e,t));let C=Number(s),T=hn(C,a,"1."+e+"-"+e).replace(/9/g,"#");return r&&(T="-"+T),T}getNumberFormatValidator(e,t,r,a){return s=>{let C=s.value?.trim();return C?this.getValidationErrorsNumericFormat(C,e,t,r,a):null}}getValidationErrorsNumericFormat(e,t,r,a,s){let C=jt(t,$t.Group),T=jt(t,$t.Decimal),v=s?"^-?":"^";return new RegExp(v+"[0123456789"+C+T+"]*$").test(e)?this.createValidationError(this.performValidationAccordingToMetaData(e,C,T,a+(e.includes("-")?1:0),r)):this.createValidationError(!0)}getIntervalValidator(e,t,r,a,s,C){return T=>{let v=T.value?.trim();return v&&v!==C&&s.length!==0&&this.getValidationErrorsNumericFormat(v,e,t,r,a)==null?this.createIntervalValidationError(!this.checkIfPartOfIntervals(v,e,s)):null}}checkIfPartOfIntervals(e,t,r){return r.find(a=>this.inputMatchesInterval(e,t,a))!==void 0}inputMatchesInterval(e,t,r){let a=this.parseInput(e,t),s=!0;r.minValue&&(s=r.minValueIncluded?r.minValue<=a:r.minValue<a);let C=!0;return r.maxValue&&(C=r.maxValueIncluded?r.maxValue>=a:r.maxValue>a),s&&C}parseInput(e,t){let r=jt(t,$t.Group),a=jt(t,$t.Decimal);return this.parseInputForSeparators(e,r,a)}parseInputForSeparators(e,t,r){let a="\\",s=new RegExp(a+t,"g"),C=e.replace(s,"").replace(r,".");return parseFloat(C)}createValidationError(e){return e?{wrongFormat:{}}:null}createIntervalValidationError(e){return e?{intervalNotMet:{}}:null}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var br=(()=>{let i=class i extends ni{constructor(e,t,r,a,s,C){super(t,a,s,C),this.configAttributeNumericInputFieldService=e,this.config=t,this.translation=r,this.attributeComponentContext=a,this.configuratorCommonsService=s,this.configuratorStorefrontUtilsService=C,this.iconType=pe,this.intervals=[],this.logger=ee(je),this.language=a.language}mustDisplayValidationMessage(){return(this.attributeInputForm.dirty||this.attributeInputForm.touched)&&this.attributeInputForm.errors?.wrongFormat}mustDisplayIntervalMessage(){return(this.attributeInputForm.dirty||this.attributeInputForm.touched)&&this.attributeInputForm.errors?.intervalNotMet}ngOnInit(){this.initializeValidation(),this.attribute.userInput&&this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===ce.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.sub=this.attributeInputForm.valueChanges.pipe(si(()=>ci(this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME))).subscribe(()=>this.onChange())}initializeValidation(){this.locale=this.getInstalledLocale(this.language);let e=this.attribute.numDecimalPlaces,t=this.attribute.numTotalLength,r=this.attribute.negativeAllowed;if(e===void 0||t===void 0||r===void 0){let C=this.getDefaultSettings();e=C.numDecimalPlaces,t=C.numTotalLength,r=C.negativeAllowed,Xe()&&this.logger.warn("Meta data for numeric attribute not present, falling back to defaults")}this.attribute.intervalInDomain&&(this.intervals=this.configAttributeNumericInputFieldService.getIntervals(this.attribute.values));let s=[this.configAttributeNumericInputFieldService.getNumberFormatValidator(this.locale,e,t,r),this.configAttributeNumericInputFieldService.getIntervalValidator(this.locale,e,t,r,this.intervals,this.attribute.userInput)];this.attributeInputForm=new Te("",s),this.numericFormatPattern=this.configAttributeNumericInputFieldService.getPatternForValidationMessage(e,t,r,this.locale)}ngOnDestroy(){super.ngOnDestroy()}getHelpTextForInterval(){let e="",t="";return this.intervals.forEach((r,a)=>{e=this.getIntervalText(r),a>0?(e=e.charAt(0).toLowerCase()+e.slice(1),this.translation.translate("configurator.a11y.combinedIntervalsText",{combinedInterval:t,newInterval:e}).pipe(O(1)).subscribe(s=>t=s)):t=e}),t.trim()}getAriaLabelComplete(){let e="";return this.attribute.userInput?.length===0?this.translation.translate("configurator.a11y.valueOfAttributeBlank",{attribute:this.attribute.label}).pipe(O(1)).subscribe(t=>e=t):this.translation.translate("configurator.a11y.valueOfAttributeFull",{value:this.attribute.userInput,attribute:this.attribute.label}).pipe(O(1)).subscribe(t=>e=t),e+=" ",e+=this.getHelpTextForInterval(),e}getIntervalText(e){let t="",r="",a="";if(e.minValue&&(r=this.configAttributeNumericInputFieldService.formatIntervalValue(e.minValue,this.attribute.numDecimalPlaces,this.locale)),e.maxValue&&(a=this.configAttributeNumericInputFieldService.formatIntervalValue(e.maxValue,this.attribute.numDecimalPlaces,this.locale)),e.minValue&&e.maxValue){if(e.minValue===e.maxValue)return this.translation.translate("configurator.a11y.numericIntervalSingleValue",{value:r}).pipe(O(1)).subscribe(s=>t=s),t;t=this.getTextForRealInterval(r,a,t,e)}else t=this.getTextForPartialInterval(e,t,r,a);return t}getTextForPartialInterval(e,t,r,a){return e.minValue?e.minValueIncluded?t=this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMinValueIncluded",r):t=this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMinValue",r):e.maxValue&&(e.maxValueIncluded?t=this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMaxValueIncluded",a):t=this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMaxValue",a)),t}getTextForRealInterval(e,t,r,a){let s=r;return this.translation.translate("configurator.a11y.numericIntervalStandard",{minValue:e,maxValue:t}).pipe(O(1)).subscribe(C=>s=C),(!a.minValueIncluded||!a.maxValueIncluded)&&(!a.minValueIncluded&&!a.maxValueIncluded?(s+=" ",s+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardOpen")):(a.minValueIncluded||(s+=" ",s+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardLowerEndpointNotIncluded")),a.maxValueIncluded||(s+=" ",s+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardUpperEndpointNotIncluded")))),s}getAdditionalIntervalText(e){let t="";return this.translation.translate(e).pipe(O(1)).subscribe(r=>t=r),t}getInfiniteIntervalText(e,t){let r="";return this.translation.translate(e,{value:t}).pipe(O(1)).subscribe(a=>r=a),r}getDefaultSettings(){return{numDecimalPlaces:2,numTotalLength:6,negativeAllowed:!1}}getInstalledLocale(e){try{return $r(e),e}catch{return this.reportMissingLocaleData(e),"en"}}reportMissingLocaleData(e){Xe()&&this.logger.warn(`ConfigAttributeNumericInputFieldComponent: No locale data registered for '${e}' (see https://angular.io/api/common/registerLocaleData).`)}};i.\u0275fac=function(t){return new(t||i)(h(Fp),h(Vt),h(we),h(Ae),h(ie),h(de))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-numeric-input-field"]],features:[xe],decls:6,vars:20,consts:[["class","cx-intervalHelpText",4,"ngIf"],[1,"form-group",3,"id"],[1,"form-control",3,"change","formControl","ngClass","maxlength","cxFocus"],["class","cx-validation-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],[1,"cx-intervalHelpText"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-validation-msg",3,"id"],[3,"type"]],template:function(t,r){t&1&&(_(0,hc,2,1,"label",0),d(1,"div",1)(2,"input",2),g(3,"async"),G("change",function(){return r.onChange()}),p()(),_(4,Cc,4,8,"div",3)(5,yc,4,5,"div",3)),t&2&&(u("ngIf",r.attribute.intervalInDomain),c(),E("id",r.createAttributeIdForConfigurator(r.attribute)),c(),se("ng-invalid",r.isRequired&&r.isUserInputEmpty),E("maxlength",r.attribute.maxlength),u("formControl",r.attributeInputForm)("ngClass",L(16,ri,f(3,14,r.showRequiredErrorMessage$)))("cxFocus",L(18,Ne,r.createAttributeIdForConfigurator(r.attribute))),P("aria-describedby",r.mustDisplayValidationMessage()?r.createAttributeUiKey("label",r.attribute.name)+" "+r.createAttributeUiKey("attribute-msg",r.attribute.name):r.createAttributeUiKey("label",r.attribute.name))("role",r.attribute.dataType)("required",r.attribute.required===!0?"required":null)("aria-label",r.getAriaLabelComplete()),c(2),u("ngIf",r.mustDisplayValidationMessage()),c(),u("ngIf",r.mustDisplayIntervalMessage()))},dependencies:[Oe,Kt,Le,An,ke,Ue,H,be,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Eo=(()=>{let i=class i extends cn{constructor(e,t,r,a,s){super(e,t,r,a,s),this.quantityService=e,this.translation=t,this.attributeComponentContext=r,this.configuratorCommonsService=a,this.configuratorStorefrontUtilsService=s,this.attributeDropDownForm=new Te(""),this.config=ee(Qe),this.group=r.group.id,et("productConfiguratorAttributeTypesV2")}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue)}getSelectedValue(){return this.attribute.values?.find(e=>e?.selected)}getSelectedValueDescription(){return this.getSelectedValue()?.description??""}};i.\u0275fac=function(t){return new(t||i)(h(Ut),h(we),h(Ae),h(ie),h(de))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-drop-down"]],features:[ze([rt]),xe],decls:4,vars:5,consts:[[4,"ngIf"],["class","cx-configurator-attribute-additional-value",4,"ngIf"],["class","form-group",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],["class","cx-value-price",4,"ngIf"],[1,"form-control",3,"change","id","ngClass","formControl","cxFocus"],[3,"selected","label","value",4,"ngFor","ngForOf"],[3,"selected","label","value"],[1,"cx-value-label-pair"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],[3,"text","textSize","productName","tabIndex"],[1,"cx-value-price"],[3,"formula"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula",4,"ngIf"],[1,"cx-configurator-attribute-additional-value"]],template:function(t,r){t&1&&(_(0,Fc,3,2,"ng-container",0),g(1,"async"),_(2,Rc,2,3,"cx-configurator-attribute-numeric-input-field",1)(3,Dc,2,3,"cx-configurator-attribute-input-field",1)),t&2&&(u("ngIf",f(1,3,r.changedPrices$)),c(2),u("ngIf",r.isAdditionalValueNumeric),c(),u("ngIf",r.isAdditionalValueAlphaNumeric))},dependencies:[Ue,ye,H,It,wn,On,En,Le,Oe,ke,Pe,br,ni,xt,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Ir=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_string:ni,AttributeType_sap_date:ni}}})],imports:[me,ue,le,k,W]});let n=i;return n})(),Tr=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_numeric:br}}})],imports:[me,ue,le,k,W,Ie]});let n=i;return n})(),Rp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_dropdown:Eo,AttributeType_dropdown_add:Eo}}})],imports:[k,Tt,ue,W,me,tt,le,Ve,Tr,Ir,bt,ao]});let n=i;return n})(),Dp=(()=>{let i=class i extends ia{constructor(){super(...arguments),this.preventAction$=new Mt(!1),this.multipleSelectionValues=[]}ngOnInit(){this.initialize()}initialize(){this.attribute.values&&this.attribute.values.length>0&&(this.multipleSelectionValues=this.attribute.values.map(({name:e,quantity:t,selected:r,valueCode:a})=>({name:e,quantity:t,selected:r,valueCode:a}))),this.attribute.required&&this.multipleSelectionValues.filter(e=>e.selected).length<2&&this.preventAction$.next(!0)}updateMultipleSelectionValues(e,t){let r=this.multipleSelectionValues.findIndex(s=>s.valueCode===e);return this.multipleSelectionValues[r]=V(F({},this.multipleSelectionValues[r]),{selected:t}),{changedAttribute:V(F({},this.attribute),{values:this.multipleSelectionValues}),ownerKey:this.ownerKey,updateType:m.UpdateType.ATTRIBUTE}}updateMultipleSelectionValuesQuantity(e){let t=this.multipleSelectionValues.find(a=>a.valueCode===e.valueCode);return t?(t.quantity=e.quantity,{changedAttribute:V(F({},this.attribute),{values:[t]}),ownerKey:this.ownerKey,updateType:m.UpdateType.VALUE_QUANTITY}):void 0}onSelect(e){this.loading$.next(!0);let t=this.updateMultipleSelectionValues(e,!0);this.configuratorCommonsService.updateConfiguration(t.ownerKey,t.changedAttribute,t.updateType)}onDeselect(e){this.loading$.next(!0);let t=this.updateMultipleSelectionValues(e,!1);this.configuratorCommonsService.updateConfiguration(t.ownerKey,t.changedAttribute,t.updateType)}onDeselectAll(){this.loading$.next(!0),this.configuratorCommonsService.updateConfiguration(this.ownerKey,V(F({},this.attribute),{values:[]}),m.UpdateType.ATTRIBUTE)}onChangeValueQuantity(e){this.loading$.next(!0);let t=this.updateMultipleSelectionValuesQuantity(e);t&&this.configuratorCommonsService.updateConfiguration(t.ownerKey,t.changedAttribute,t.updateType)}onChangeAttributeQuantity(e){this.loading$.next(!0),e?this.onHandleAttributeQuantity(e):this.onDeselectAll()}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractProductCardParameters(e,t,r,a){return{disableAllButtons:e??!1,hideRemoveButton:t??!1,productBoundValue:r,multiSelect:!0,withQuantity:this.withQuantity,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:a}}};i.\u0275fac=(()=>{let e;return function(r){return(e||(e=gn(i)))(r||i)}})(),i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-multi-selection-bundle"]],features:[xe],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleQuantity","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula"],[3,"handleDeselect","handleQuantity","handleSelect","id","productCardOptions"]],template:function(t,r){t&1&&_(0,Vc,3,3,"div",0),t&2&&u("ngIf",r.attribute==null||r.attribute.values==null?null:r.attribute.values.length)},dependencies:[ye,H,yr,It,Pe,J],encapsulation:2,changeDetection:0});let n=i;return n})(),Np=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_checkBoxListProduct:Dp}}})],imports:[k,xr,ue,W,me,le,ut,pt,Tt,Ve]});let n=i;return n})(),wo=(()=>{let i=class i extends qe{constructor(e,t,r){super(),this.configUtilsService=e,this.attributeComponentContext=t,this.configuratorCommonsService=r,this.iconTypes=pe,this.config=ee(Qe),this.attributeCheckBoxForms=new Array,this.attribute=t.attribute,this.ownerKey=t.owner.key,this.expMode=t.expMode,this.initPriceChangedEvent(t.isPricingAsync,t.attribute.key),et("productConfiguratorAttributeTypesV2")}ngOnInit(){let e=this.attribute.values;if(e)for(let t of e){let r;t.selected?r=new Te(!0):r=new Te(!1),this.attributeCheckBoxForms.push(r)}}onSelect(e){this.attributeCheckBoxForms[e].setValue(!this.attributeCheckBoxForms[e].value);let t=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute);this.listenForPriceChanges&&this.configUtilsService.setLastSelected(this.attribute.name,t[e].valueCode),this.configuratorCommonsService.updateConfiguration(this.ownerKey,V(F({},this.attribute),{values:t}),m.UpdateType.ATTRIBUTE)}};i.\u0275fac=function(t){return new(t||i)(h(de),h(Ae),h(ie))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-multi-selection-image"]],features:[ze([rt]),xe],decls:5,vars:7,consts:[[1,"cx-row",3,"id"],[4,"ngIf"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","checkbox",1,"form-input",3,"click","id","value","formControl","name","cxFocus"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"],[4,"ngFor","ngForOf"],["class","cx-configurator-select",3,"id",4,"ngIf"],["aria-hidden","true",1,"form-check-label",3,"id","for","title"],[3,"ngClass","src","alt",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"cxPopover","cxPopoverOptions",4,"ngIf"],[3,"ngClass","src","alt"],[3,"ngClass"],[3,"cxPopover","cxPopoverOptions"],[3,"type"]],template:function(t,r){t&1&&(d(0,"div",0),_(1,Lc,2,1,"ng-container",1),g(2,"async"),_(3,Qc,2,1,"ng-container",1),g(4,"async"),p()),t&2&&(E("id",r.createAttributeIdForConfigurator(r.attribute)),c(),u("ngIf",!(r.config.features!=null&&r.config.features.productConfiguratorAttributeTypesV2)&&f(2,3,r.changedPrices$)),c(2),u("ngIf",(r.config.features==null?null:r.config.features.productConfiguratorAttributeTypesV2)&&f(4,5,r.changedPrices$)))},dependencies:[Oe,qt,Le,ke,Ue,ye,H,be,Pe,Fn,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Pp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_multi_selection_image:wo,AttributeType_read_only_multi_selection_image:wo}}})],imports:[me,ue,le,k,W,Ie,Ve,Rn]});let n=i;return n})(),Vp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-not-supported"]],decls:3,vars:3,template:function(t,r){t&1&&(d(0,"em"),y(1),g(2,"cxTranslate"),p()),t&2&&(c(),re(f(2,1,"configurator.attribute.notSupported")))},dependencies:[te],encapsulation:2,changeDetection:0});let n=i;return n})(),Up=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_not_implemented:Vp}}})],imports:[k,W]});let n=i;return n})(),Oo=(()=>{let i=class i extends cn{constructor(e,t,r,a,s){super(e,t,r,a,s),this.quantityService=e,this.translation=t,this.attributeComponentContext=r,this.configuratorCommonsService=a,this.configuratorStorefrontUtilsService=s,this.attributeRadioButtonForm=new Te("")}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}};i.\u0275fac=function(t){return new(t||i)(h(Ut),h(we),h(Ae),h(ie),h(de))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-radio-button"]],features:[ze([rt]),xe],decls:9,vars:8,consts:[[2,"display","none"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[4,"ngIf"],["class","cx-configurator-attribute-additional-value",4,"ngIf"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula",4,"ngIf"],[3,"formula"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],[1,"cx-value-label-pair"],["type","radio","formcontrolname","attributeRadioButtonForm",1,"form-check-input",3,"change","id","formControl","value","name","cxFocus"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],[1,"cx-value-price"],[3,"text","textSize","productName","tabIndex"],[1,"cx-configurator-attribute-additional-value"]],template:function(t,r){t&1&&(d(0,"fieldset")(1,"legend",0),y(2),p(),d(3,"div",1),_(4,Hc,3,2,"div",2)(5,Xc,2,1,"ng-container",3),g(6,"async"),_(7,Zc,1,0,"cx-configurator-attribute-numeric-input-field",4)(8,Jc,1,0,"cx-configurator-attribute-input-field",4),p()()),t&2&&(c(2),re(r.attribute.label),c(),E("id",r.createAttributeIdForConfigurator(r.attribute)),c(),u("ngIf",r.withQuantity),c(),u("ngIf",f(6,6,r.changedPrices$)),c(2),u("ngIf",r.isAdditionalValueNumeric),c(),u("ngIf",r.isAdditionalValueAlphaNumeric))},dependencies:[ye,H,It,Kt,Sn,Le,Oe,ke,Pe,br,ni,xt,J],encapsulation:2,changeDetection:0});let n=i;return n})(),Gp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_radioGroup:Oo,AttributeType_radioGroup_add:Oo}}})],imports:[k,Tt,ue,W,me,le,Ve,Tr,Ir,bt]});let n=i;return n})(),Mp=(()=>{let i=class i extends qe{constructor(e,t){super(),this.translationService=e,this.attributeComponentContext=t,this.attribute=t.attribute,this.group=t.group.id,this.expMode=t.expMode,this.initPriceChangedEvent(t.isPricingAsync,t.attribute.key)}getCurrentValueName(e,t){let r="";return e.selectedSingleValue&&!t?r=e.selectedSingleValue:e.userInput&&!t?r=e.userInput:t&&t.valueDisplay&&(r=t?.valueDisplay),r}getAriaLabel(e,t){let r="";if(t){let a=this.getCurrentValueName(e,t);t.valuePrice&&t.valuePrice?.value!==0?t.valuePriceTotal&&t.valuePriceTotal?.value!==0?r=this.translate("configurator.a11y.readOnlyValueOfAttributeFullWithPrice",a,e,t.valuePriceTotal?.formattedValue):r=this.translate("configurator.a11y.readOnlyValueOfAttributeFullWithPrice",a,e,t.valuePrice?.formattedValue):r=this.translate("configurator.a11y.readOnlyValueOfAttributeFull",a,e)}else{let a=this.getCurrentValueName(e);r=this.translate("configurator.a11y.readOnlyValueOfAttributeFull",a,e)}return r}translate(e,t,r,a){let s="",C=a?{value:t,attribute:r.label,price:a}:{value:t,attribute:r.label};return this.translationService.translate(e,C).pipe(O(1)).subscribe(T=>s=T),s}};i.\u0275fac=function(t){return new(t||i)(h(we),h(Ae))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-read-only"]],features:[ze([rt]),xe],decls:5,vars:3,consts:[["noStaticDomain",""],[3,"id"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["class","form-check",4,"ngIf"],[1,"form-check"],["role","note","tabindex","0",1,"cx-visually-hidden",3,"id"],[1,"cx-value-label-pair"],["aria-hidden","true",1,"cx-read-only-attribute-label",3,"id"],[3,"text","textSize","productName","tabIndex",4,"ngIf"],[1,"cx-value-price"],[3,"formula"],[3,"text","textSize","productName","tabIndex"],[4,"ngIf"],["aria-hidden","true",1,"cx-read-only-attribute-label"],["aria-hidden","true"]],template:function(t,r){if(t&1&&(d(0,"fieldset")(1,"div",1),_(2,ns,2,1,"ng-container",2)(3,as,2,2,"ng-template",null,0,ge),p()()),t&2){let a=ae(4);c(),E("id",r.createAttributeIdForConfigurator(r.attribute)),c(),u("ngIf",r.attribute.values&&r.attribute.values.length>0)("ngIfElse",a)}},dependencies:[Pe,xt,ye,H,J],encapsulation:2,changeDetection:0});let n=i;return n})(),Bp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_readonly:Mp}}})],imports:[me,ue,le,Ve,bt,k,W]});let n=i;return n})(),Lp=(()=>{let i=class i extends cn{constructor(e,t,r,a,s){super(e,t,r,a,s),this.quantityService=e,this.translation=t,this.attributeComponentContext=r,this.configuratorCommonsService=a,this.configuratorStorefrontUtilsService=s,this.RETRACT_VALUE_CODE=m.RetractValueCode,this.attributeDropDownForm=new Te(""),this.group=r.group.id,et("productConfiguratorAttributeTypesV2")}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue);let e=this.attribute.values;if(e&&e.length>0){let t=e.find(r=>r.selected);t&&(this.selectionValue=t)}}get selectedValue(){let e;if(this.selectionValue)e=this.selectionValue;else throw new Error("selectedValue called without a defined selectionValue");return e}extractProductCardParameters(){return{hideRemoveButton:!0,productBoundValue:this.selectedValue,singleDropdown:!0,withQuantity:!1,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeName:this.attribute.name,itemCount:0,itemIndex:0}}isNotRetractValue(){return(this.selectionValue&&this.selectionValue?.valueCode!==m.RetractValueCode)??!1}isRetractValue(e){return e===m.RetractValueCode}};i.\u0275fac=function(t){return new(t||i)(h(Ut),h(we),h(Ae),h(ie),h(de))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-single-selection-bundle-dropdown"]],features:[xe],decls:3,vars:3,consts:[["class","form-group",4,"ngIf"],[3,"id","productCardOptions","handleDeselect",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],[1,"form-control",3,"change","id","ngClass","formControl","cxFocus"],[3,"label","selected","value",4,"ngFor","ngForOf"],[3,"label","selected","value"],[3,"handleDeselect","id","productCardOptions"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula"]],template:function(t,r){t&1&&_(0,ss,7,19,"div",0)(1,us,1,2,"cx-configurator-attribute-product-card",1)(2,ls,3,2,"div",2),t&2&&(u("ngIf",r.attribute==null||r.attribute.values==null?null:r.attribute.values.length),c(),u("ngIf",r.isNotRetractValue()),c(),u("ngIf",r.withQuantity))},dependencies:[Ue,ye,H,yr,wn,On,En,Le,Oe,ke,It,Pe,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),kp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_dropdownProduct:Lp}}})],imports:[k,xr,ue,W,me,tt,le,Tt,Ve]});let n=i;return n})(),$p=(()=>{let i=class i extends cn{extractProductCardParameters(e,t){return{hideRemoveButton:this.attribute.required,fallbackFocusId:this.getFocusIdOfNearestValue(e),productBoundValue:e,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:t}}getFocusIdOfNearestValue(e){if(!this.attribute.values)return"n/a";let t=this.attribute.values.findIndex(r=>r.valueCode===e.valueCode);return t--,t<0&&(t=this.attribute.values.length>1?1:0),this.createFocusId(this.getAttributeCode(this.attribute).toString(),this.attribute.values[t].valueCode)}};i.\u0275fac=(()=>{let e;return function(r){return(e||(e=gn(i)))(r||i)}})(),i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-single-selection-bundle"]],features:[xe],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"changeQuantity","quantityOptions"],[3,"formula"],[3,"handleDeselect","handleSelect","id","productCardOptions"]],template:function(t,r){t&1&&_(0,gs,3,3,"div",0),t&2&&u("ngIf",r.attribute==null||r.attribute.values==null?null:r.attribute.values.length)},dependencies:[ye,H,yr,It,Pe],encapsulation:2,changeDetection:0});let n=i;return n})(),jp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_radioGroupProduct:$p}}})],imports:[k,xr,Tt,ue,W,_i,me,le,ut,pt,Ve]});let n=i;return n})(),Ao=(()=>{let i=class i extends qe{constructor(e,t){super(),this.attributeComponentContext=e,this.configuratorCommonsService=t,this.attributeRadioButtonForm=new Te(""),this.iconTypes=pe,this.config=ee(Qe),this.featureConfigService=ee(lt),this.attribute=e.attribute,this.ownerKey=e.owner.key,this.expMode=e.expMode,et("productConfiguratorAttributeTypesV2"),this.initPriceChangedEvent(e.isPricingAsync,e.attribute.key)}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}onClick(e){this.configuratorCommonsService.updateConfiguration(this.ownerKey,V(F({},this.attribute),{selectedSingleValue:e}),m.UpdateType.ATTRIBUTE)}extractValuePriceFormulaParameters(e){return{price:e?.valuePrice,isLightedUp:e?e.selected:!1}}getValueDescriptionStyleClasses(){return this.featureConfigService?.isEnabled("a11yImproveContrast")?"cx-value-description santorini-updated":"cx-value-description"}};i.\u0275fac=function(t){return new(t||i)(h(Ae),h(ie))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-attribute-single-selection-image"]],features:[ze([rt]),xe],decls:5,vars:7,consts:[["role","radiogroup",1,"cx-row",3,"id"],[4,"ngIf"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","radio","formcontrolname","attributeRadioButtonForm","role","radio",1,"form-input",3,"click","id","value","formControl","name","cxFocus"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"],[4,"ngFor","ngForOf"],["class","cx-configurator-select",3,"id",4,"ngIf"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for","title"],[3,"ngClass","src","alt",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"cxPopover","cxPopoverOptions",4,"ngIf"],[3,"ngClass","src","alt"],[3,"ngClass"],[3,"cxPopover","cxPopoverOptions"],[3,"type"]],template:function(t,r){t&1&&(d(0,"div",0),_(1,hs,2,1,"ng-container",1),g(2,"async"),_(3,Ts,2,1,"ng-container",1),g(4,"async"),p()),t&2&&(E("id",r.createAttributeIdForConfigurator(r.attribute)),c(),u("ngIf",!(r.config.features!=null&&r.config.features.productConfiguratorAttributeTypesV2)&&f(2,3,r.changedPrices$)),c(2),u("ngIf",(r.config.features==null?null:r.config.features.productConfiguratorAttributeTypesV2)&&f(4,5,r.changedPrices$)))},dependencies:[Oe,Kt,Sn,Le,ke,Ue,ye,H,be,Pe,Fn,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),qp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({productConfigurator:{assignment:{AttributeType_single_selection_image:Ao,AttributeType_read_only_single_selection_image:Ao}}})],imports:[me,ue,le,k,W,Ie,Ve,Rn]});let n=i;return n})(),en=class{},Kp=(()=>{let i=class i{toggleWarnings(){this.showWarnings=!this.showWarnings}toggleErrors(){this.showErrors=!this.showErrors}constructor(e,t){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.iconTypes=pe,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe(N(r=>this.configuratorCommonsService.getConfiguration(r.owner))),this.showWarnings=!1,this.showErrors=!1}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(he))},i.\u0275cmp=q({type:i,selectors:[["cx-configuration-conflict-and-error-messages"]],decls:2,vars:3,consts:[[4,"ngIf"],["aria-live","assertive","aria-atomic","true",1,"alert-message","alert-message-invalid-warning"],[1,"alert-icon"],["type","WARNING"],["class","cx-warning-text",4,"ngIf"],["class","cx-warning-toggle",3,"click",4,"ngIf"],[1,"cx-warning-messages"],["class","cx-warning-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-warning-text"],[1,"cx-warning-toggle",3,"click"],["type","CARET_DOWN"],["type","CARET_UP"],[1,"cx-warning-message"],["aria-live","assertive","aria-atomic","true","role","alert",1,"alert-message","alert-message-error"],["type","ERROR"],["class","cx-error-text",4,"ngIf"],["class","cx-error-toggle",3,"click",4,"ngIf"],[1,"cx-error-messages"],["class","cx-error-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-error-text"],[1,"cx-error-toggle",3,"click"],[1,"cx-error-message"]],template:function(t,r){t&1&&(_(0,Gs,3,2,"ng-container",0),g(1,"async")),t&2&&u("ngIf",f(1,1,r.configuration$))},dependencies:[ye,H,be,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Qp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{CpqConfiguratorConflictAndErrorMessagesComponent:{component:Kp}}})],imports:[k,ut,pt,W,Ie]});let n=i;return n})(),Wp=(()=>{let i=class i{constructor(){this.groupType=m.GroupType,this.iconTypes=pe,this.tabindex="0",this.role="note"}displayConflictDescription(e){return e.groupType===m.GroupType.CONFLICT_GROUP}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-conflict-description"]],hostVars:2,hostBindings:function(t,r){t&2&&mn("tabindex",r.tabindex)("role",r.role)},inputs:{currentGroup:"currentGroup"},decls:1,vars:1,consts:[[4,"ngIf"],["aria-hidden","true",3,"type"]],template:function(t,r){t&1&&_(0,Ms,3,2,"ng-container",0),t&2&&u("ngIf",r.displayConflictDescription(r.currentGroup))},dependencies:[H,be],encapsulation:2,changeDetection:0});let n=i;return n})(),Hp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k,Ie]});let n=i;return n})(),Yp=(()=>{let i=class i{constructor(){this.groupType=m.GroupType,this.tabindex="0",this.role="note"}displayConflictSuggestion(e){return e.groupType===m.GroupType.CONFLICT_GROUP&&e.attributes?e.attributes.length>0:!1}createSuggestionUiKey(){return"suggestion--"+this.suggestionNumber}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-conflict-suggestion"]],hostVars:2,hostBindings:function(t,r){t&2&&mn("tabindex",r.tabindex)("role",r.role)},inputs:{currentGroup:"currentGroup",attribute:"attribute",suggestionNumber:"suggestionNumber"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"cx-title"],["aria-hidden","true"]],template:function(t,r){t&1&&_(0,Bs,10,23,"ng-container",0),t&2&&u("ngIf",r.displayConflictSuggestion(r.currentGroup))},dependencies:[H,te],encapsulation:2,changeDetection:0});let n=i;return n})(),zp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k,W]});let n=i;return n})(),Xp=(()=>{let i=class i{constructor(e,t,r,a,s,C,T){this.productService=e,this.routingService=t,this.configRouterExtractorService=r,this.configuratorCommonsService=a,this.breakpointService=s,this.windowRef=C,this.location=T,this.container$=this.configRouterExtractorService.extractRouterData().pipe(N(v=>this.configuratorCommonsService.getConfiguration(v.owner).pipe(A(w=>({routerData:v,configuration:w}))).pipe(N(w=>this.productService.get(w.configuration.productCode).pipe(A(K=>({routerData:w.routerData,configuration:w.configuration,product:K})))))))}navigateToCart(){this.routingService.go("cart")}exitConfiguration(){this.container$.pipe(O(1)).subscribe(e=>{e.routerData.owner.type===ce.OwnerType.CART_ENTRY?this.navigateToCart():this.routingService.go({cxRoute:"product",params:e.product})})}isDesktop(){return this.breakpointService.isUp(Ft.md)}isMobile(){return this.breakpointService.isDown(Ft.sm)}};i.\u0275fac=function(t){return new(t||i)(h(We),h(Je),h(he),h(ie),h(Rt),h(At),h(kr))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-exit-button"]],decls:2,vars:3,consts:[[4,"ngIf"],["tabindex","0",1,"btn","btn-tertiary",3,"click"]],template:function(t,r){t&1&&(_(0,Qs,6,7,"ng-container",0),g(1,"async")),t&2&&u("ngIf",f(1,1,r.container$))},dependencies:[H,J,te],encapsulation:2});let n=i;return n})(),Zp=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorExitButton:{component:Xp}}}),At],imports:[k,W]});let n=i;return n})(),St=(()=>{let i=class i{constructor(){this._expModeRequested=new ai(1),this._expModeActive=new ai(1)}setExpModeRequested(e){this._expModeRequested.next(e)}getExpModeRequested(){return this._expModeRequested}setExpModeActive(e){this._expModeActive.next(e)}getExpModeActive(){return this._expModeActive}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Sr=(()=>{let i=class i{constructor(e,t,r,a,s){this.configuratorCommonsService=e,this.configuratorGroupsService=t,this.languageService=r,this.configUtils=a,this.configExpertModeService=s,this.typePrefix="AttributeType_",this.activeLanguage$=this.languageService.getActive(),this.uiType=m.UiType,this.featureConfigService=ee(lt),this.trackByFn=(C,T)=>this.featureConfigService.isEnabled("productConfiguratorDeltaRendering")?T.key:T}updateConfiguration(e){this.configuratorCommonsService.updateConfiguration(e.ownerKey,e.changedAttribute,e.updateType)}isConflictGroupType(e){return e?this.configuratorGroupsService.isConflictGroupType(e):!1}displayConflictDescription(e){return e.groupType!==void 0&&this.configuratorGroupsService.isConflictGroupType(e.groupType)&&e.name!==""}createGroupId(e){return this.configUtils.createGroupId(e)}get expMode(){return this.configExpertModeService.getExpModeActive()}getComponentKey(e){return e.uiTypeVariation?.includes(m.CustomUiTypeIndicator)?this.typePrefix+e.uiTypeVariation:this.typePrefix+e.uiType}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(Ye),h(so),h(de),h(St))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-group"]],inputs:{group:"group",owner:"owner",isNavigationToGroupEnabled:"isNavigationToGroupEnabled",isPricingAsync:"isPricingAsync"},decls:3,vars:4,consts:[["role","tabpanel",3,"id"],[4,"ngIf"],["class","cx-group-attribute",3,"cx-hidden",4,"ngFor","ngForOf","ngForTrackBy"],[3,"currentGroup"],[1,"cx-group-attribute"],[3,"currentGroup","attribute","suggestionNumber"],[3,"cxConfiguratorAttributeComponent"]],template:function(t,r){t&1&&(d(0,"div",0),_(1,zs,2,1,"ng-container",1)(2,Js,4,6,"div",2),p()),t&2&&(E("id",r.createGroupId(r.group.id)),c(),u("ngIf",r.displayConflictDescription(r.group)),c(),u("ngForOf",r.group.attributes)("ngForTrackBy",r.trackByFn))},dependencies:[ye,H,Wp,Yp,yp,J],encapsulation:2,changeDetection:0});let n=i;return n})(),Jp=(()=>{let i=class i{constructor(e,t,r,a){this.configuratorStorefrontUtilsService=e,this.configuratorCommonsService=t,this.launchDialogService=r,this.focusService=a,this.iconTypes=pe,this.uiType=m.UiType,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0},this.subscription=new $e}init(e,t){this.focusService.clear(),this.conflictGroup$=e,this.routerData$=t}ngOnInit(){this.subscription.add(this.launchDialogService.data$.subscribe(e=>{this.init(e.conflictGroup,e.routerData)}))}ngOnDestroy(){this.subscription?.unsubscribe()}dismissModal(e){this.routerData$.pipe(O(1)).subscribe(t=>this.configuratorCommonsService.dismissConflictSolverDialog(t.owner)),this.launchDialogService.closeDialog(e),this.configuratorStorefrontUtilsService.scrollToConfigurationElement(".VariantConfigurationTemplate"),this.configuratorStorefrontUtilsService.focusFirstAttribute()}};i.\u0275fac=function(t){return new(t||i)(h(de),h(ie),h(gt),h(dt))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-conflict-solver-dialog"]],decls:21,vars:21,consts:[["role","dialog","aria-modal","true","aria-labelledby","dialogTitle",1,"cx-modal-container"],["aria-atomic","true","aria-live","assertive","role","alert","aria-relevant","additions",1,"cx-visually-hidden"],[1,"cx-modal-content",3,"cxFocus"],[1,"cx-dialog-header","modal-header"],["id","dialogTitle","tabindex","0",1,"cx-dialog-title","modal-title"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],[1,"cx-msg-warning"],[4,"ngIf"],[3,"group","owner","isNavigationToGroupEnabled"]],template:function(t,r){t&1&&(d(0,"div",0)(1,"div",1),y(2),g(3,"cxTranslate"),p(),d(4,"div",2)(5,"div",3)(6,"div",4),y(7),g(8,"cxTranslate"),p(),d(9,"button",5),g(10,"cxTranslate"),g(11,"cxTranslate"),G("click",function(){return r.dismissModal("Close conflict solver dialog")}),d(12,"span",6),I(13,"cx-icon",7),p()()(),d(14,"div",8)(15,"div",9),I(16,"cx-icon",7),y(17),g(18,"cxTranslate"),p(),_(19,tu,3,3,"ng-container",10),g(20,"async"),p()()()),t&2&&(c(2),S(" ",f(3,9,"configurator.header.conflictWarning")," "),c(2),u("cxFocus",r.focusConfig),c(3),S(" ",f(8,11,"configurator.header.resolveIssue")," "),c(2),E("title",f(10,13,"configurator.a11y.closeConflictSolverModal")),P("aria-label",f(11,15,"configurator.a11y.closeConflictSolverModal")),c(4),u("type",r.iconTypes.CLOSE),c(3),u("type",r.iconTypes.ERROR),c(),S(" ",f(18,17,"configurator.header.conflictWarning")," "),c(2),u("ngIf",f(20,19,r.routerData$)))},dependencies:[H,be,Sr,Oe,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),ed=(()=>{let i=class i{constructor(e,t,r){this.launchDialogService=e,this.configRouterExtractorService=t,this.configuratorGroupsService=r,this.subscription=new $e,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.conflictGroupAndRouterData$=this.routerData$.pipe(N(a=>this.configuratorGroupsService.getConflictGroupForImmediateConflictResolution(a.owner).pipe(A(s=>({conflictGroup:s,routerData:a})))),Ge(0)),this.controlDialog()}controlDialog(){this.subscription.add(this.conflictGroupAndRouterData$.pipe(Y(e=>!!e.conflictGroup),Bt((e,t)=>e.conflictGroup===t.conflictGroup&&e.routerData.navigationId===t.routerData.navigationId)).subscribe(()=>{this.openModal(),this.subscribeToCloseDialog()}))}subscribeToCloseDialog(){this.subscription.add(this.conflictGroupAndRouterData$.pipe(Dr(e=>!e.conflictGroup)).subscribe(()=>this.closeModal("CLOSE_NO_CONFLICTS_EXIST")))}openModal(){this.launchDialogService.openDialogAndSubscribe("CONFLICT_SOLVER",void 0,{conflictGroup:this.conflictGroupAndRouterData$.pipe(A(e=>e.conflictGroup)),routerData:this.routerData$})}closeModal(e){this.launchDialogService.closeDialog(e)}ngOnDestroy(){this.subscription?.unsubscribe()}};i.\u0275fac=function(t){return new(t||i)(U(gt),U(he),U(Ye))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Er=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorForm:{component:Sr}}})],imports:[ue,le,k,W,tt,Up,Ir,bp,Tr,Tp,Gp,jp,Np,Bp,qp,kp,Ap,wp,Rp,Pp,Hp,zp,ta]});let n=i;return n})(),td={launch:{CONFLICT_SOLVER:{inlineRoot:!0,component:Jp,dialogType:gi.DIALOG}}},id=(()=>{let i=class i{constructor(e){}};i.\u0275fac=function(t){return new(t||i)(U(ed))},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z(td)],imports:[k,Ie,W,Er,me]});let n=i;return n})(),nd=(()=>{let i=class i{constructor(e,t,r,a,s,C){this.configuratorCommonsService=e,this.configuratorGroupsService=t,this.configRouterExtractorService=r,this.configExpertModeService=a,this.launchDialogService=s,this.globalMessageService=C,this.subscription=new $e,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe(Y(T=>T.pageType===ft.PageType.CONFIGURATION),N(T=>this.configuratorCommonsService.getOrCreateConfiguration(T.owner,T.configIdTemplate))),this.currentGroup$=this.routerData$.pipe(N(T=>this.configuratorGroupsService.getCurrentGroup(T.owner)))}ngOnDestroy(){this.subscription.unsubscribe()}listenForConflictResolution(){this.subscription.add(this.routerData$.pipe(N(e=>this.configuratorCommonsService.hasConflicts(e.owner)),Bt(),Pr(1),Y(e=>!e)).subscribe(()=>this.displayConflictResolvedMessage()))}displayConflictResolvedMessage(){this.globalMessageService.add({key:"configurator.header.conflictsResolved"},xn.MSG_TYPE_CONFIRMATION)}ngOnInit(){this.listenForConflictResolution(),this.routerData$.pipe(N(e=>this.configuratorCommonsService.getConfiguration(e.owner)),O(1)).subscribe(e=>{this.configuratorCommonsService.checkConflictSolverDialog(e.owner)}),this.routerData$.pipe(Y(e=>e.displayRestartDialog===!0),N(e=>this.configuratorCommonsService.getConfiguration(e.owner)),O(1),Y(e=>e.interactionState.newConfiguration===!1),Ge(0)).subscribe(e=>{this.launchDialogService.openDialogAndSubscribe("CONFIGURATOR_RESTART_DIALOG",void 0,{owner:e.owner})}),this.routerData$.pipe(O(1)).subscribe(e=>{e.resolveIssues&&this.configuratorCommonsService.hasConflicts(e.owner).pipe(O(1)).subscribe(t=>{t&&!e.skipConflicts?this.configuratorGroupsService.navigateToConflictSolver(e.owner):this.configuratorGroupsService.navigateToFirstIncompleteGroup(e.owner)}),e.expMode&&this.configExpertModeService?.setExpModeRequested(e.expMode)})}isNavigationToGroupEnabled(e){return!e.immediateConflictResolution}isDialogActive(e){return e.interactionState.showConflictSolverDialog??!1}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(Ye),h(he),h(St),h(gt),h(bn))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-form"]],decls:4,vars:4,consts:[["ghostForm",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"group","owner","isNavigationToGroupEnabled","isPricingAsync"],[4,"ngFor","ngForOf"],[1,"cx-ghost-attribute"],[1,"cx-ghost-header"],[1,"cx-ghost-title","ghost"],[1,"cx-ghost-icon","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-text","ghost"],[1,"cx-ghost-price","ghost"],[1,"cx-ghost-description-box"],[1,"cx-ghost-description","ghost"],["class","cx-ghost-radiobutton-value",4,"ngFor","ngForOf"],[1,"cx-ghost-radiobutton-value"],[1,"cx-ghost-value-label-pair"],[1,"cx-ghost-value-icon","ghost"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-value-price","ghost"],[1,"cx-ghost-price"]],template:function(t,r){if(t&1&&(_(0,ru,2,2,"ng-container",1),g(1,"async"),_(2,su,1,2,"ng-template",null,0,ge)),t&2){let a=ae(3);u("ngIf",f(1,2,r.configuration$))("ngIfElse",a)}},dependencies:[ye,H,Sr,J],encapsulation:2,changeDetection:0});let n=i;return n})(),Fo=class{},rd=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorForm:{component:nd}}})],imports:[k,W,tt,Er]});let n=i;return n})(),od=(()=>{let i=class i{constructor(e){this.windowRef=e}getFocusedGroupIndex(e){if(e){let t=e.find(r=>r.nativeElement?.id===this.windowRef?.document?.activeElement?.id);if(t)return e.toArray().indexOf(t)}}updateCurrentGroupIndex(e,t){return t&&t!==e?t:e}focusNextGroup(e,t){let r=this.getFocusedGroupIndex(t);e=this.updateCurrentGroupIndex(e,r),t&&(e===t.length-1?t.first?.nativeElement?.focus():t.toArray()[e+1]?.nativeElement.focus())}focusPreviousGroup(e,t){let r=this.getFocusedGroupIndex(t);e=this.updateCurrentGroupIndex(e,r),t&&(e===0?t.last?.nativeElement?.focus():t.toArray()[e-1]?.nativeElement?.focus())}switchGroupOnArrowPress(e,t,r){e.preventDefault(),e.code==="ArrowUp"?this.focusPreviousGroup(t,r):e.code==="ArrowDown"&&this.focusNextGroup(t,r)}isBackBtnFocused(e){if(e)return e.first?.nativeElement?.classList?.value?.indexOf("cx-menu-back")!==-1&&this.windowRef?.document?.activeElement===e.first?.nativeElement}isActiveGroupInGroupList(e){let t;return e&&(t=e.find(r=>r.nativeElement?.classList?.value?.indexOf("active")!==-1)),t!==void 0}};i.\u0275fac=function(t){return new(t||i)(U(At))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),ad=(()=>{let i=class i{constructor(e,t,r,a,s,C,T,v,w){this.configCommonsService=e,this.configuratorGroupsService=t,this.hamburgerMenuService=r,this.configRouterExtractorService=a,this.configUtils=s,this.configGroupMenuService=C,this.directionService=T,this.translation=v,this.configExpertModeService=w,this.breakpointService=ee(Rt),this.featureConfigService=ee(lt),this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe(N(K=>this.configCommonsService.getConfiguration(K.owner).pipe(A(oe=>({routerData:K,configuration:oe})),Y(oe=>oe.configuration.complete&&oe.configuration.consistent||oe.configuration.interactionState.issueNavigationDone||!oe.routerData.resolveIssues)).pipe(A(oe=>oe.configuration)))),this.currentGroup$=this.routerData$.pipe(N(K=>this.configuratorGroupsService.getCurrentGroup(K.owner))),this.displayedParentGroup$=this.configuration$.pipe(N(K=>this.configuratorGroupsService.getMenuParentGroup(K.owner)),N(K=>K?this.getCondensedParentGroup(K):Se(K))),this.displayedGroups$=this.displayedParentGroup$.pipe(N(K=>this.configuration$.pipe(A(oe=>K?this.condenseGroups(K.subGroups):this.condenseGroups(oe.groups))))),this.iconTypes=pe,this.ERROR=" ERROR",this.COMPLETE=" COMPLETE",this.WARNING=" WARNING",this.ICON="ICON",this.trackByFn=(K,oe)=>this.featureConfigService.isEnabled("productConfiguratorDeltaRendering")?oe.id:oe}click(e,t){this.configuration$.pipe(O(1)).subscribe(r=>{r.interactionState.currentGroup!==e.id&&(this.configuratorGroupsService.hasSubGroups(e)?(this.configuratorGroupsService.setMenuParentGroup(r.owner,e.id),t&&this.setFocusForSubGroup(e,t.id)):(this.configuratorGroupsService.navigateToGroup(r,e.id),this.hamburgerMenuService.toggle(!0),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")))})}navigateUp(e){this.displayedParentGroup$.pipe(O(1)).subscribe(t=>{if(t){let r=this.getParentGroup(t);this.configuration$.pipe(O(1)).subscribe(a=>{r.pipe(O(1)).subscribe(s=>{this.configuratorGroupsService.setMenuParentGroup(a.owner,s?s.id:void 0)})})}}),e&&this.setFocusForMainMenu(e.id)}getConflictNumber(e){return e&&e.groupType===m.GroupType.CONFLICT_HEADER_GROUP?"("+e.subGroups.length+")":""}hasSubGroups(e){return this.configuratorGroupsService.hasSubGroups(e)}getParentGroup(e){return this.configuration$.pipe(A(t=>this.configuratorGroupsService.getParentGroup(t.groups,e)))}getCondensedParentGroup(e){return e&&e.subGroups&&e.subGroups.length===1&&e.groupType!==m.GroupType.CONFLICT_HEADER_GROUP?this.getParentGroup(e).pipe(N(t=>t?this.getCondensedParentGroup(t):Se(t))):Se(e)}condenseGroups(e){return e.flatMap(t=>t.subGroups.length===1&&t.groupType!==m.GroupType.CONFLICT_HEADER_GROUP?this.condenseGroups(t.subGroups):t)}isGroupVisited(e,t){return this.configuratorGroupsService.isGroupVisited(t.owner,e.id).pipe(A(r=>r&&!this.isConflictGroupType(e.groupType??m.GroupType.ATTRIBUTE_GROUP)),O(1))}isConflictGroupType(e){return e?this.configuratorGroupsService.isConflictGroupType(e):!1}isConflictHeader(e){return e&&e.groupType===m.GroupType.CONFLICT_HEADER_GROUP}isConflictGroup(e){return e&&e.groupType===m.GroupType.CONFLICT_GROUP}getGroupStatusStyles(e,t){return this.isGroupVisited(e,t).pipe(A(r=>{let a="CLOUDCPQCONFIGURATOR",s="cx-menu-item";return t.owner.configuratorType!==a&&!e.consistent&&(s=s+this.WARNING),t.owner.configuratorType!==a&&e.complete&&e.consistent&&r&&(s=s+this.COMPLETE),!e.complete&&r&&(s=s+this.ERROR),s}))}isLTRDirection(){return this.directionService.getDirection()===fi.LTR}isRTLDirection(){return this.directionService.getDirection()===fi.RTL}isForwardsNavigation(e){return e.code==="ArrowRight"&&this.isLTRDirection()||e.code==="ArrowLeft"&&this.isRTLDirection()}isBackNavigation(e){return e.code==="ArrowLeft"&&this.isLTRDirection()||e.code==="ArrowRight"&&this.isRTLDirection()}switchGroupOnArrowPress(e,t,r,a){this.handleFocusLoopInMobileMode(e),e.code==="ArrowUp"||e.code==="ArrowDown"?this.configGroupMenuService.switchGroupOnArrowPress(e,t,this.groups):this.isForwardsNavigation(e)?r&&this.hasSubGroups(r)&&this.click(r,a):this.isBackNavigation(e)&&this.configGroupMenuService.isBackBtnFocused(this.groups)&&this.navigateUp(a)}handleFocusLoopInMobileMode(e){this.breakpointService.isDown(Ft.md).pipe(O(1)).subscribe(t=>{t&&e.code==="Tab"&&!e.shiftKey&&(this.configGroupMenuService.isBackBtnFocused(this.groups)?this.configGroupMenuService.isActiveGroupInGroupList(this.groups)||(e.preventDefault(),this.configUtils.focusFirstActiveElement("cx-hamburger-menu")):(e.preventDefault(),this.configUtils.focusFirstActiveElement("cx-hamburger-menu")))})}setFocusForMainMenu(e){let t=e;this.configuration$.pipe(O(1)).subscribe(r=>{r.groups?.forEach(a=>{a.subGroups?.length!==1&&(this.isGroupSelected(a.id,e)||this.containsSelectedGroup(a,e))&&(t=a.id)})}),this.configUtils.setFocus(t)}setFocusForSubGroup(e,t){let r="cx-menu-back";this.containsSelectedGroup(e,t)&&(r=t),this.configUtils.setFocus(r)}containsSelectedGroup(e,t){let r=!1;return e.subGroups?.forEach(a=>{this.isGroupSelected(a.id,t)&&(r=!0)}),r}getTabIndex(e,t){return!this.isGroupSelected(e.id,t)&&!this.containsSelectedGroup(e,t)?-1:0}isGroupSelected(e,t){return e===t}createAriaControls(e){return this.configUtils.createGroupId(e)}getAriaLabel(e){let t="";return e&&e.groupType&&this.isConflictGroupType(e.groupType)?this.isConflictHeader(e)?this.translation.translate("configurator.a11y.conflictsInConfiguration",{numberOfConflicts:this.getConflictNumber(e)}).pipe(O(1)).subscribe(r=>t=r):t=e.description?e.description:"":this.translation.translate("configurator.a11y.groupName",{group:e.description}).pipe(O(1)).subscribe(r=>t=r),t}createIconId(e,t){return this.ICON+e+t}getAriaDescribedby(e,t){return this.isGroupVisited(e,t).pipe(A(r=>{let a="CLOUDCPQCONFIGURATOR",s="";return t.owner.configuratorType!==a&&!e.consistent&&e.groupType&&!this.isConflictGroupType(e.groupType)&&(s=s+this.createIconId(pe.WARNING,e.id)),t.owner.configuratorType!==a&&e.complete&&e.consistent&&r&&(s=s+" "+this.createIconId(pe.SUCCESS,e.id)),!e.complete&&r&&(s=s+" "+this.createIconId(pe.ERROR,e.id)),this.hasSubGroups(e)&&(s=s+" "+this.createIconId(pe.CARET_RIGHT,e.id)),s=s+" inListOfGroups",s}))}getGroupMenuTitle(e){let t=e.description;return!this.isConflictHeader(e)&&!this.isConflictGroup(e)&&this.configExpertModeService.getExpModeActive().pipe(O(1)).subscribe(r=>{r&&(t+=` / [${e.name}]`)}),t}displayMenuItem(e){return this.configuration$.pipe(A(t=>{let r=!0;return t.immediateConflictResolution&&e.groupType===m.GroupType.CONFLICT_HEADER_GROUP&&(r=!1),r}))}isDialogActive(e){return e.interactionState.showConflictSolverDialog??!1}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(Ye),h(Pn),h(he),h(de),h(od),h(Nn),h(we),h(St))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-group-menu"]],viewQuery:function(t,r){if(t&1&&ot(uu,5),t&2){let a;at(a=ct())&&(r.groups=a)}},decls:4,vars:4,consts:[["ghostGroups",""],["groupItem",""],[4,"ngIf","ngIfElse"],["role","tablist",1,"cx-group-menu"],["id","listOfGroups",1,"cx-visually-hidden"],["id","inListOfGroups","aria-hidden","true",1,"cx-visually-hidden"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cx-menu-back","role","tab","aria-describedby","listOfGroups",3,"cxFocus","click","keydown",4,"ngIf"],["role","tab","aria-describedby","listOfGroups",1,"cx-menu-back",3,"click","keydown","cxFocus"],[3,"type"],["role","tab",3,"click","keydown","id","ngClass","cxFocus","tabindex"],[3,"title"],[1,"groupIndicators"],[1,"conflictNumberIndicator"],[1,"groupStatusIndicator"],[1,"WARNING",3,"type","id","title"],[1,"ERROR",3,"type","id","title"],[1,"COMPLETE",3,"type","id","title"],[1,"subGroupIndicator"],[3,"type","id","title",4,"ngIf"],[3,"type","id","title"],[1,"cx-ghost-group-menu"],["class","cx-ghost-menu-item",4,"ngFor","ngForOf"],[1,"cx-ghost-menu-item"],[1,"cx-ghost-item-title","ghost"]],template:function(t,r){if(t&1&&(_(0,yu,2,2,"ng-container",2),g(1,"async"),_(2,bu,2,2,"ng-template",null,0,ge)),t&2){let a=ae(3);u("ngIf",f(1,2,r.configuration$))("ngIfElse",a)}},dependencies:[Ue,ye,H,be,Oe,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),cd=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorMenu:{component:ad}}})],imports:[k,W,Ie,me]});let n=i;return n})(),sd=(()=>{let i=class i{constructor(e,t,r,a,s,C,T){this.configuratorCommonsService=e,this.configuratorGroupsService=t,this.configRouterExtractorService=r,this.configExpertModeService=a,this.breakpointService=s,this.configuratorStorefrontUtilsService=C,this.hamburgerMenuService=T,this.ghostStyle=!0,this.subscription=new $e,this.PRE_HEADER=".PreHeader",this.ADD_TO_CART_BUTTON="cx-configurator-add-to-cart-button",this.focusFirstElementInMobileGroupList=!1,this.displayedGroup$=this.configRouterExtractorService.extractRouterData().pipe(N(v=>this.configuratorGroupsService.getCurrentGroup(v.owner).pipe(Ce(()=>{this.ghostStyle=!1})))),this.iconTypes=pe}ngOnInit(){this.subscription.add(this.hamburgerMenuService.isExpanded.subscribe(e=>{e?(this.configuratorStorefrontUtilsService.changeStyling(this.PRE_HEADER,"display","block"),this.configuratorStorefrontUtilsService.changeStyling(this.ADD_TO_CART_BUTTON,"z-index","0"),this.focusFirstElementInMobileGroupList=!0):(this.configuratorStorefrontUtilsService.changeStyling(this.PRE_HEADER,"display","none"),this.configuratorStorefrontUtilsService.changeStyling(this.ADD_TO_CART_BUTTON,"z-index","calc(var(--cx-popover-z-index) + 10)"),this.configuratorStorefrontUtilsService.focusFirstActiveElement(".cx-group-title"))}))}ngAfterContentChecked(){this.focusFirstElementInMobileGroupList&&(this.configuratorStorefrontUtilsService.focusFirstActiveElement("cx-configurator-group-menu"),this.focusFirstElementInMobileGroupList=!1)}ngOnDestroy(){this.subscription.unsubscribe(),this.configuratorStorefrontUtilsService.removeStyling(this.PRE_HEADER,"display")}getGroupTitle(e){let t=e.description;return e.groupType!==m.GroupType.CONFLICT_GROUP&&this.configExpertModeService.getExpModeActive().pipe(O(1)).subscribe(r=>{r&&(t+=` / [${e.name}]`)}),t}isMobile(){return this.breakpointService.isDown(Ft.md)}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(Ye),h(he),h(St),h(Rt),h(de),h(Pn))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-group-title"]],hostVars:2,hostBindings:function(t,r){t&2&&se("ghost",r.ghostStyle)},decls:4,vars:4,consts:[["ghostGroup",""],[4,"ngIf","ngIfElse"],[1,"cx-group-title"],[4,"ngIf"],[1,"cx-ghost-group-title"]],template:function(t,r){if(t&1&&(_(0,Tu,5,4,"ng-container",1),g(1,"async"),_(2,Su,1,0,"ng-template",null,0,ge)),t&2){let a=ae(3);u("ngIf",f(1,2,r.displayedGroup$))("ngIfElse",a)}},dependencies:[H,vo,J],encapsulation:2,changeDetection:0});let n=i;return n})(),ud=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorGroupTitle:{component:sd}}})],imports:[k,_o]});let n=i;return n})(),ld=(()=>{let i=class i{constructor(e){this.breakpointService=e}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}isDesktop(){return this.breakpointService.isUp(Ft.md)}};i.\u0275fac=function(t){return new(t||i)(h(Rt))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:11,vars:26,consts:[["mobile",""],[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-attribute-value"],[4,"ngIf","ngIfElse"],["aria-hidden","true",1,"cx-attribute-label"],["aria-hidden","true",1,"cx-attribute-price"],[3,"formula"]],template:function(t,r){if(t&1&&(d(0,"span",1),y(1),g(2,"cxTranslate"),g(3,"cxTranslate"),g(4,"cxTranslate"),p(),d(5,"div",2),y(6),p(),_(7,Eu,5,2,"ng-container",3),g(8,"async"),_(9,wu,4,2,"ng-template",null,0,ge)),t&2){let a=ae(10);c(),S(" ",r.attributeOverview.valuePrice&&(r.attributeOverview.valuePrice==null?null:r.attributeOverview.valuePrice.value)!==0?r.attributeOverview.valuePriceTotal&&(r.attributeOverview.valuePriceTotal==null?null:r.attributeOverview.valuePriceTotal.value)!==0?z(2,4,"configurator.a11y.valueOfAttributeFullWithPrice",Ot(15,Gn,r.attributeOverview.value,r.attributeOverview.attribute,r.attributeOverview.valuePriceTotal.formattedValue)):z(3,7,"configurator.a11y.valueOfAttributeFullWithPrice",Ot(19,Gn,r.attributeOverview.value,r.attributeOverview.attribute,r.attributeOverview.valuePrice.formattedValue)):z(4,10,"configurator.a11y.valueOfAttributeFull",Be(23,zt,r.attributeOverview.value,r.attributeOverview.attribute)),`
`),c(5),S(" ",r.attributeOverview.value,`
`),c(),u("ngIf",f(8,13,r.isDesktop()))("ngIfElse",a)}},dependencies:[H,Pe,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),na=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k,W,Ve]});let n=i;return n})(),pd=(()=>{let i=class i{constructor(e,t){this.productService=e,this.translation=t}ngOnInit(){let e={images:{}};this.attributeOverview.productCode?this.product$=this.productService.get(this.attributeOverview.productCode,"list").pipe(A(t=>t||e)):this.product$=Se(e)}getProductPrimaryImage(e){return e?.images?.PRIMARY}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}displayQuantity(){let e=this.attributeOverview.quantity;return e!==void 0&&e>0}displayPrice(){return this.attributeOverview.valuePrice?.value!==void 0&&this.attributeOverview.valuePrice?.value>0}getAriaLabel(){let e="";return this.displayQuantity()?this.attributeOverview.valuePrice?.value!==void 0&&this.attributeOverview.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPriceAndQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue,quantity:this.attributeOverview.quantity}).pipe(O(1)).subscribe(t=>e=t):this.translation.translate("configurator.a11y.itemOfAttributeFullWithQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,quantity:this.attributeOverview.quantity}).pipe(O(1)).subscribe(t=>e=t):this.attributeOverview.valuePrice?.value!==void 0&&this.attributeOverview.valuePrice?.value!==0?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPrice",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue}).pipe(O(1)).subscribe(t=>e=t):this.translation.translate("configurator.a11y.itemOfAttributeFull",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute}).pipe(O(1)).subscribe(t=>e=t),e}};i.\u0275fac=function(t){return new(t||i)(h(We),h(we))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-cpq-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-value-container"],[1,"cx-thumbnail"],["format","product","aria-hidden","true",3,"container"],[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-value-info"],["class","cx-code",4,"ngIf"],["class","cx-quantity",4,"ngIf"],["class","cx-price",4,"ngIf"],["aria-hidden","true",1,"cx-attribute-price-container"],[1,"cx-attribute-label"],[3,"formula"],[1,"cx-code"],[1,"cx-quantity"],[1,"cx-identifier"],[1,"cx-item"],[1,"cx-price"]],template:function(t,r){t&1&&(_(0,Ru,16,8,"ng-container",0),g(1,"async")),t&2&&u("ngIf",f(1,1,r.product$))},dependencies:[H,mi,Pe,J,te,Tn],encapsulation:2,changeDetection:0});let n=i;return n})(),dd=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k,vi,W,Ve]});let n=i;return n})(),ra=(()=>{let i=class i{constructor(e){this.configuratorCommonsService=e,this.iconTypes=pe,this.attributeFilterTypes=m.OverviewFilter}getGroupFilterDescription(e,t){return e.possibleGroups?.find(r=>r.id===t)?.groupDescription??""}onAttrFilterRemove(e,t){let[r,a]=this.getInputFilters(e.overview);r=r.filter(s=>t!==s),this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(e,r,a))}onGroupFilterRemove(e,t){let[r,a]=this.getInputFilters(e.overview);a=a.filter(s=>t!==s),this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(e,r,a))}isShowRemoveAll(e){return(e.attributeFilters?.length??0)+(e.groupFilters?.length??0)>1}onRemoveAll(e){this.configuratorCommonsService.updateConfigurationOverview(this.createInputConfig(e,[],[]))}getInputFilters(e){return[e.attributeFilters??[],e.groupFilters??[]]}createInputConfig(e,t,r){return V(F({},e),{overview:{configId:e.configId,productCode:e.productCode,attributeFilters:t,groupFilters:r,possibleGroups:e.overview?.possibleGroups}})}};i.\u0275fac=function(t){return new(t||i)(h(ie))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-overview-filter-bar"]],inputs:{config:"config"},decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cx-overview-filter-applied",3,"click","title"],["aria-hidden","true"],[3,"type"]],template:function(t,r){t&1&&_(0,Du,7,7,"ng-container",0)(1,Nu,6,8,"ng-container",0)(2,Pu,7,7,"ng-container",1),t&2&&(u("ngForOf",r.config.overview.attributeFilters),c(),u("ngForOf",r.config.overview.groupFilters),c(),u("ngIf",r.isShowRemoveAll(r.config.overview)))},dependencies:[ye,H,be,te],encapsulation:2});let n=i;return n})(),oa=(()=>{let i=class i{constructor(e){this.configuratorCommonsService=e,this.configuratorStorefrontUtilsService=ee(de),this.showFilterBar=!0,this.priceFilter=new Te(""),this.mySelectionsFilter=new Te(""),this.groupFilters=new Array}ngOnChanges(){this.extractAttrFilterState(this.config),this.extractGroupFilterState(this.config)}onFilter(e){let t=this.createInputConfig(e,this.collectAttrFilters(),this.collectGroupFilters(e.overview));this.configuratorCommonsService.updateConfigurationOverview(t)}isDisplayOnlyVariant(){return this.configuratorStorefrontUtilsService.isDisplayOnlyVariant()}extractGroupFilterState(e){this.groupFilters=[],e.overview.possibleGroups?.forEach(t=>{let r=!1;e.overview.groupFilters&&(r=e.overview.groupFilters.indexOf(t.id)>=0),this.groupFilters.push(new Te(r))})}extractAttrFilterState(e){if(e.overview.attributeFilters){let t=e.overview.attributeFilters.indexOf(m.OverviewFilter.PRICE_RELEVANT)>=0;this.priceFilter.setValue(t);let r=e.overview.attributeFilters.indexOf(m.OverviewFilter.USER_INPUT)>=0;this.mySelectionsFilter.setValue(r)}}collectGroupFilters(e){let t=[],r=0;return this.groupFilters.forEach(a=>{a.value&&e?.possibleGroups&&t.push(e.possibleGroups[r].id),r++}),t}collectAttrFilters(){let e=[];return this.priceFilter.value&&e.push(m.OverviewFilter.PRICE_RELEVANT),this.mySelectionsFilter.value&&e.push(m.OverviewFilter.USER_INPUT),e}createInputConfig(e,t,r){return V(F({},e),{overview:{configId:e.configId,productCode:e.productCode,attributeFilters:t,groupFilters:r,possibleGroups:e.overview?.possibleGroups}})}};i.\u0275fac=function(t){return new(t||i)(h(ie))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-overview-filter"]],inputs:{showFilterBar:"showFilterBar",config:"config"},features:[dn],decls:6,vars:8,consts:[[4,"ngIf"],["class","cx-no-overview-filters-available",4,"ngIf"],[3,"config"],[1,"cx-overview-filter-header"],[1,"cx-overview-filter-option"],[1,"form-check"],["id","cx-configurator-overview-filter-option-price","type","checkbox","name","config-overview-price-filter",1,"form-check-input",3,"change","formControl"],["for","cx-configurator-overview-filter-option-price",1,"form-check-label"],["id","cx-configurator-overview-filter-option-mySelections","type","checkbox","name","config-overview-my-selection-filter",1,"form-check-input",3,"change","formControl"],["for","cx-configurator-overview-filter-option-mySelections",1,"form-check-label"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input",3,"change","id","formControl","name"],[1,"form-check-label",3,"for"],[1,"cx-no-overview-filters-available"]],template:function(t,r){t&1&&(_(0,Uu,2,1,"ng-container",0)(1,Gu,18,17,"ng-container",0),g(2,"async"),_(3,Bu,5,4,"ng-container",0)(4,Lu,3,3,"div",1),g(5,"async")),t&2&&(u("ngIf",r.showFilterBar),c(),u("ngIf",!f(2,4,r.isDisplayOnlyVariant())),c(2),u("ngIf",r.config.overview.possibleGroups&&r.config.overview.possibleGroups.length>1),c(),u("ngIf",f(5,6,r.isDisplayOnlyVariant())&&(r.config.overview.possibleGroups==null?null:r.config.overview.possibleGroups.length)===1))},dependencies:[ye,H,qt,Le,ke,ra,J,te],encapsulation:2});let n=i;return n})(),aa=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k,W,Ie,ue,le]});let n=i;return n})(),wr=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k,W,ue,le,aa]});let n=i;return n})(),gd=(()=>{let i=class i{constructor(e,t,r){this.launchDialogService=e,this.configuratorCommonsService=t,this.configRouterExtractorService=r,this.configuratorStorefrontUtilsService=ee(de),this.ghostStyle=!0,this.configurationWithOv$=this.configRouterExtractorService.extractRouterData().pipe(N(a=>this.configuratorCommonsService.getConfiguration(a.owner)),Y(a=>a.overview!=null),Ce(()=>{this.ghostStyle=!1}))}getNumFilters(e){return(e.attributeFilters?.length??0)+(e.groupFilters?.length??0)}openFilterModal(e){this.launchDialogService.openDialogAndSubscribe("CONFIGURATOR_OV_FILTER",this.filterButton,e)}isDisplayOnlyVariant(){return this.configuratorStorefrontUtilsService.isDisplayOnlyVariant()}};i.\u0275fac=function(t){return new(t||i)(h(gt),h(ie),h(he))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-overview-filter-button"]],viewQuery:function(t,r){if(t&1&&ot(ku,5),t&2){let a;at(a=ct())&&(r.filterButton=a.first)}},hostVars:2,hostBindings:function(t,r){t&2&&se("ghost",r.ghostStyle)},decls:4,vars:4,consts:[["ghostFilterButton",""],["filterButton",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"config"],["tabindex","0",1,"btn","btn-secondary","cx-config-filter-button",3,"click","title"],[1,"cx-ghost-filter-button","ghost"]],template:function(t,r){if(t&1&&(_(0,ju,4,4,"ng-container",2),g(1,"async"),_(2,qu,1,0,"ng-template",null,0,ge)),t&2){let a=ae(3);u("ngIf",f(1,2,r.configurationWithOv$))("ngIfElse",a)}},dependencies:[H,ra,J,te],encapsulation:2});let n=i;return n})(),fd=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorOverviewFilterButton:{component:gd}}})],imports:[k,W,aa]});let n=i;return n})(),md=(()=>{let i=class i{constructor(e){this.launchDialogService=e,this.config$=this.launchDialogService.data$,this.iconTypes=pe,this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0}}closeFilterModal(){this.launchDialogService.closeDialog("Close Filtering")}};i.\u0275fac=function(t){return new(t||i)(h(gt))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-overview-filter-dialog"]],decls:12,vars:11,consts:[["role","dialog","aria-labelledby","dialogTitle",1,"cx-configurator-overview-filter-dialog","cx-modal-container",3,"click"],[1,"cx-modal-content",3,"click","esc","cxFocus"],[1,"cx-dialog-header","modal-header"],["id","dialogTitle",1,"cx-dialog-title","modal-title"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[4,"ngIf"],[1,"cx-dialog-body","modal-body"],[3,"config","showFilterBar"]],template:function(t,r){t&1&&(d(0,"div",0),G("click",function(){return r.closeFilterModal()}),d(1,"div",1),G("click",function(s){return s.stopPropagation()})("esc",function(){return r.closeFilterModal()}),d(2,"div",2)(3,"div",3),y(4),g(5,"cxTranslate"),p(),d(6,"button",4),g(7,"cxTranslate"),G("click",function(){return r.closeFilterModal()}),d(8,"span",5),I(9,"cx-icon",6),p()()(),_(10,Ku,3,2,"ng-container",7),g(11,"async"),p()()),t&2&&(c(),u("cxFocus",r.focusConfig),c(3),S(" ",f(5,5,"configurator.overviewFilter.title")," "),c(2),E("title",f(7,7,"configurator.a11y.closeFilterMenu")),c(3),u("type",r.iconTypes.CLOSE),c(),u("ngIf",f(11,9,r.config$)))},dependencies:[H,be,oa,Oe,J,te],encapsulation:2});let n=i;return n})(),vd={launch:{CONFIGURATOR_OV_FILTER:{inlineRoot:!0,component:md,dialogType:gi.DIALOG}}},_d=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z(vd)],imports:[k,W,Ie,wr,me]});let n=i;return n})(),hd=(()=>{let i=class i{constructor(e,t,r){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.configuratorStorefrontUtilsService=r,this.ghostStyle=!0,this.attributeOverviewType=m.AttributeOverviewType,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe(N(a=>this.configuratorCommonsService.getOrCreateConfiguration(a.owner)),Rr("configId"),N(a=>this.configuratorCommonsService.getConfigurationWithOverview(a)),Y(a=>a.overview!=null),Ce(()=>{this.ghostStyle=!1}))}hasAttributes(e){return this.hasGroupWithAttributes(e.overview?.groups)}hasGroupWithAttributes(e){if(e){let t=e.find(r=>(r.attributes?r.attributes.length:0)>0)!==void 0;return t||(t=e.find(r=>this.hasGroupWithAttributes(r.subGroups))!==void 0),t}else return!1}isSameAttribute(e,t){return e.length>1?t===0?e[t]?.attribute===e[t+1]?.attribute:e[t]?.attribute===e[t-1]?.attribute:!1}getStyleClasses(e,t){let r="";switch(e[t]?.type){case this.attributeOverviewType.BUNDLE:r+="bundle";break;case this.attributeOverviewType.GENERAL:r+="general";break}return(t===0||!this.isSameAttribute(e,t))&&(r+=" margin"),!this.isSameAttribute(e,t+1)&&!r.includes("bundle")&&(r+=" last-value-pair"),r}getGroupLevelStyleClasses(e,t){let r="cx-group";return e===1?(r+=" topLevel",t&&t.length>0&&(r+=" subgroupTopLevel")):(r+=" subgroup",r+=" subgroupLevel"+e),r}getPrefixId(e,t){return this.configuratorStorefrontUtilsService.getPrefixId(e,t)}getGroupId(e,t){return this.configuratorStorefrontUtilsService.createOvGroupId(e,t)}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(he),h(de))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-overview-form"]],hostVars:2,hostBindings:function(t,r){t&2&&se("ghost",r.ghostStyle)},decls:8,vars:4,consts:[["noAttributes",""],["groups",""],["ghostForm",""],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cx-no-attribute-value-pairs"],[1,"cx-visually-hidden"],[4,"ngFor","ngForOf"],[3,"id","ngClass"],["aria-hidden","true"],["class","cx-attribute-value-pair",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cx-attribute-value-pair",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"attributeOverview"],[1,"cx-ghost-group"],[1,"cx-ghost-header","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-attribute-value"],[1,"cx-ghost-value","ghost"],[1,"cx-ghost-attribute-label"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-attribute-price","ghost"]],template:function(t,r){if(t&1&&(_(0,Yu,2,2,"ng-container",3),g(1,"async"),_(2,zu,7,6,"ng-template",null,0,ge)(4,rl,4,4,"ng-template",null,1,ge)(6,cl,1,2,"ng-template",null,2,ge)),t&2){let a=ae(7);u("ngIf",f(1,2,r.configuration$))("ngIfElse",a)}},dependencies:[Ue,ye,H,Cn,jr,qr,Kr,ld,pd,J,te],encapsulation:2});let n=i;return n})(),Cd=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorOverviewForm:{component:hd}}})],imports:[k,na,dd,W]});let n=i;return n})(),yd=(()=>{let i=class i{constructor(e){this.configuratorStorefrontUtilsService=e,this.height=this.getHeight(),this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT="cx-page-slot.VariantConfigOverviewNavigation",this.CX_CONFIGURATOR_OVERVIEW_MENU="cx-configurator-overview-menu",this.CX_MENU_ITEM_BUTTONS="button.cx-menu-item",this.CX_GROUPS="div.cx-group",this.CX_MENU_GROUP="cx-menu-group",this.OV_MENU_ITEM="-ovMenuItem",this.OV_GROUP="-ovGroup",this.ACTIVE_CLASS="active",this.MENU_ITEM_HEIGHT=39.5,this.iconTypes=pe,this.styles=[["margin-block-end","268px"],["position","-webkit-sticky"],["position","sticky"],["top","0"]]}ngAfterViewInit(){this.amount=this.getAmount(this.config),this.menuItemsHeight=this.getMenuItemsHeight(),this.adjustStyling(),this.onScroll()}onScroll(){this.menuItem=this.getMenuItemToHighlight(),this.highlight(this.menuItem),this.height=this.getHeight(),this.ensureElementVisible(this.menuItem)}onResize(){this.height=this.getHeight(),this.ensureElementVisible(this.menuItem)}getAmount(e){return e.overview?.groups?this.getAmountOfGroups(0,e.overview.groups):0}getAmountOfGroups(e,t){return t&&(e=e+t.length,t.forEach(r=>{r.subGroups&&(e=this.getAmountOfGroups(e,r.subGroups))})),e}getMenuItemsHeight(){return this.amount*this.MENU_ITEM_HEIGHT}adjustStyling(){this.amount>=1?this.changeStyling():this.removeStyling()}getHeight(){let e=this.configuratorStorefrontUtilsService.getSpareViewportHeight();return this.menuItemsHeight>e?e+"px":""}changeStyling(){this.styles.forEach(e=>{this.configuratorStorefrontUtilsService.changeStyling(this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT,e[0],e[1])})}removeStyling(){this.styles.forEach(e=>{this.configuratorStorefrontUtilsService.removeStyling(this.VARIANT_CONFIG_OVERVIEW_NAVIGATION_SLOT,e[0])})}getMenuItemToHighlight(){let e,t=this.configuratorStorefrontUtilsService.getElements(this.CX_GROUPS),r=this.configuratorStorefrontUtilsService.getVerticallyScrolledPixels();return t?.forEach(a=>{if(r&&r>=a.offsetTop){let s=a.id.replace(this.OV_GROUP,this.OV_MENU_ITEM);if(s){let C="#"+s;e=this.configuratorStorefrontUtilsService.getElement(C)}}}),e}highlight(e){e&&this.configuratorStorefrontUtilsService.getElements(this.CX_MENU_ITEM_BUTTONS)?.forEach(r=>{r.classList.remove(this.ACTIVE_CLASS),r.id===e.id&&e.classList.add(this.ACTIVE_CLASS)})}ensureElementVisible(e){e&&this.configuratorStorefrontUtilsService.hasScrollbar(this.CX_CONFIGURATOR_OVERVIEW_MENU)&&this.configuratorStorefrontUtilsService.ensureElementVisible(this.CX_CONFIGURATOR_OVERVIEW_MENU,e)}getGroupLevelStyleClasses(e){return this.CX_MENU_GROUP+" groupLevel"+e}navigateToGroup(e,t){let r=this.configuratorStorefrontUtilsService.createOvGroupId(e,t);this.configuratorStorefrontUtilsService.scrollToConfigurationElement("#"+r+" h2")}getPrefixId(e,t){return this.configuratorStorefrontUtilsService.getPrefixId(e,t)}getGroupId(e,t){return this.configuratorStorefrontUtilsService.createOvGroupId(e,t)}getMenuItemId(e,t){return this.configuratorStorefrontUtilsService.createOvMenuItemId(e,t)}};i.\u0275fac=function(t){return new(t||i)(h(de))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-overview-menu"]],hostVars:2,hostBindings:function(t,r){t&1&&G("scroll",function(s){return r.onScroll(s)},!1,fn)("resize",function(s){return r.onResize(s)},!1,fn),t&2&&li("height",r.height)},inputs:{config:"config"},decls:3,vars:1,consts:[["groups",""],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"cx-menu-item",3,"click","id"],["aria-hidden","true"],["aria-hidden","true",3,"type"]],template:function(t,r){t&1&&_(0,ul,2,4,"ng-container",1)(1,gl,2,1,"ng-template",null,0,ge),t&2&&u("ngIf",r.config)},dependencies:[Ue,ye,H,Cn,be,te],encapsulation:2,changeDetection:0});let n=i;return n})(),ca=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[k,W,Ie]});let n=i;return n})(),xd=(()=>{let i=class i{constructor(e,t,r){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.commonConfigUtilsService=r,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe(Y(a=>a.owner.type===ce.OwnerType.PRODUCT||a.owner.type===ce.OwnerType.CART_ENTRY),N(a=>this.configuratorCommonsService.getConfiguration(a.owner))),this.configurationOverview$=this.configuration$.pipe(A(a=>a.overview)),this.numberOfIssues$=this.configuration$.pipe(A(a=>{let s=a.overview;return s?.totalNumberOfIssues?s.numberOfIncompleteCharacteristics!==void 0?s.numberOfIncompleteCharacteristics:s.totalNumberOfIssues:a.totalNumberOfIssues?a.totalNumberOfIssues:0})),this.numberOfConflicts$=this.configuration$.pipe(A(a=>a.overview?.numberOfConflicts??0)),this.skipConflictsOnIssueNavigation$=this.configuration$.pipe(A(a=>(a.overview?.numberOfConflicts??0)>0)),this.iconTypes=pe}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(he),h(nt))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-overview-notification-banner"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","cx-error-notification-banner",4,"ngIf"],["class","cx-conflict-notification-banner",4,"ngIf"],[1,"cx-error-notification-banner"],[3,"type"],["id","cx-configurator-overview-error-msg",1,"cx-error-msg"],["aria-describedby","cx-configurator-overview-error-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"],[1,"cx-conflict-notification-banner"],["id","cx-configurator-overview-conflict-msg",1,"cx-conflict-msg"],["aria-describedby","cx-configurator-overview-conflict-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"]],template:function(t,r){t&1&&(_(0,Cl,3,3,"ng-container",0),g(1,"async")),t&2&&u("ngIf",f(1,1,r.routerData$))},dependencies:[H,be,Zr,J,te,uo],encapsulation:2,changeDetection:0});let n=i;return n})(),bd=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorOverviewBanner:{component:xd}}})],imports:[k,W,pt,Ie,ut]});let n=i;return n})(),Id=(()=>{let i=class i{constructor(e,t,r){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.configuratorStorefrontUtilsService=r,this.ghostStyle=!0,this.showFilter=!1,this.configurationWithOv$=this.configRouterExtractorService.extractRouterData().pipe(N(a=>this.configuratorCommonsService.getConfiguration(a.owner)),Y(a=>a.overview!=null),Ce(a=>{a&&(this.ghostStyle=!1)}))}onFilter(){this.showFilter=!0}onMenu(){this.showFilter=!1}getTabIndexForMenuTab(){return this.showFilter?-1:0}getTabIndexForFilterTab(){return this.showFilter?0:-1}switchTabOnArrowPress(e,t){(e.code==="ArrowLeft"||e.code==="ArrowRight")&&(e.preventDefault(),t==="#menuTab"?this.filterTab.nativeElement?.focus():this.menuTab.nativeElement?.focus())}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(he),h(de))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-overview-sidebar"]],viewQuery:function(t,r){if(t&1&&(ot(yl,5),ot(xl,5)),t&2){let a;at(a=ct())&&(r.menuTab=a.first),at(a=ct())&&(r.filterTab=a.first)}},hostVars:2,hostBindings:function(t,r){t&2&&se("ghost",r.ghostStyle)},decls:4,vars:4,consts:[["ghostSidebar",""],["menuTab",""],["filterTab",""],[4,"ngIf","ngIfElse"],["role","tablist",1,"cx-menu-bar"],["role","tab",3,"keydown","keydown.enter","keydown.space","click","tabindex"],[3,"config",4,"ngIf"],[3,"config"],[1,"cx-ghost-menu"],[1,"cx-ghost-menu-bar","ghost"],[4,"ngFor","ngForOf"],[1,"cx-ghost-menu-level1"],[1,"cx-ghost-menu-item"],[1,"cx-ghost-menu-item-title","ghost"],[4,"ngIf"],[1,"cx-ghost-menu-level2"],["class","cx-ghost-menu-item",4,"ngFor","ngForOf"],[1,"cx-ghost-menu-level3"]],template:function(t,r){if(t&1&&(_(0,Sl,12,16,"ng-container",3),g(1,"async"),_(2,Vl,3,2,"ng-template",null,0,ge)),t&2){let a=ae(3);u("ngIf",f(1,2,r.configurationWithOv$))("ngIfElse",a)}},dependencies:[ye,H,oa,yd,J,te],encapsulation:2});let n=i;return n})(),Td=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorOverviewSidebar:{component:Id}}})],imports:[k,W,wr,ca]});let n=i;return n})(),Sd=(()=>{let i=class i{constructor(e,t,r,a){this.configuratorGroupsService=e,this.configuratorCommonsService=t,this.configRouterExtractorService=r,this.configUtils=a,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe(N(s=>this.configuratorCommonsService.getConfiguration(s.owner)))}onPrevious(e){this.configuratorGroupsService.getPreviousGroupId(e.owner).pipe(O(1)).subscribe(t=>{t&&(this.configuratorGroupsService.navigateToGroup(e,t),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}onNext(e){this.configuratorGroupsService.getNextGroupId(e.owner).pipe(O(1)).subscribe(t=>{t&&(this.configuratorGroupsService.navigateToGroup(e,t),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}isFirstGroup(e){return this.configuratorGroupsService.getPreviousGroupId(e).pipe(A(t=>!t))}isLastGroup(e){return this.configuratorGroupsService.getNextGroupId(e).pipe(A(t=>!t))}focusFirstAttribute(){this.configRouterExtractorService.extractRouterData().pipe(N(e=>this.configuratorCommonsService.isConfigurationLoading(e.owner).pipe(Y(t=>t),O(1),N(()=>this.configuratorCommonsService.isConfigurationLoading(e.owner).pipe(Y(t=>!t),O(1),Ge(0)))))).subscribe(()=>this.configUtils.focusFirstAttribute())}};i.\u0275fac=function(t){return new(t||i)(h(Ye),h(ie),h(he),h(de))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-previous-next-buttons"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-block","btn-secondary","cx-previous",3,"click","disabled"],[1,"btn","btn-block","btn-secondary","cx-next",3,"click","disabled"]],template:function(t,r){t&1&&(_(0,Gl,2,1,"ng-container",0),g(1,"async")),t&2&&u("ngIf",f(1,1,r.configuration$))},dependencies:[H,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Ed=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorPrevNext:{component:Sd}}})],imports:[k,W,me]});let n=i;return n})(),wd=(()=>{let i=class i{constructor(e,t){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe(N(r=>this.configuratorCommonsService.getConfiguration(r.owner)))}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(he))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-price-summary"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-price-summary-container"],[1,"cx-total-summary"],[1,"cx-summary-row","cx-total-price"],[1,"cx-label"],[1,"cx-amount"],[1,"cx-summary-row","cx-base-price"],[1,"cx-summary-row","cx-selected-options"]],template:function(t,r){t&1&&(_(0,Ll,2,1,"ng-container",0),g(1,"async")),t&2&&u("ngIf",f(1,1,r.configuration$))},dependencies:[H,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Od=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorPriceSummary:{component:wd}}})],imports:[ue,le,k,W]});let n=i;return n})(),Ad=(()=>{let i=class i{getProductCode(e){return e.routerData.productCode?e.routerData.productCode:e.configuration.productCode?e.configuration.productCode:e.configuration.overview?.productCode}constructor(e,t,r,a){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.productService=r,this.configExpertModeService=a,this.ghostStyle=!0,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe(N(s=>this.configuratorCommonsService.getConfiguration(s.owner))),this.product$=this.routerData$.pipe(N(s=>this.configuration$.pipe(A(C=>({routerData:s,configuration:C}))).pipe(A(C=>this.getProductCode(C)),N(C=>C?this.productService.get(C,"list"):ln)).pipe(Ce(()=>{this.ghostStyle=!1})))),this.showMore=!1,this.iconTypes=pe}triggerDetails(){this.showMore=!this.showMore}get expMode(){return this.configExpertModeService.getExpModeActive()}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(he),h(We),h(St))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-product-title"]],hostVars:2,hostBindings:function(t,r){t&2&&se("ghost",r.ghostStyle)},decls:4,vars:4,consts:[["ghostProductTitle",""],[4,"ngIf","ngIfElse"],[1,"cx-general-product-info"],[1,"cx-title"],[3,"click"],[4,"ngIf"],[1,"cx-details"],["aria-hidden","true",1,"cx-details-image"],["format","product",3,"container"],[1,"cx-details-content"],[1,"cx-detail-title"],[1,"cx-code"],[1,"cx-description"],[1,"cx-toggle-details-link-text"],["aria-hidden","true"],[3,"type"],["aria-hidden","true",1,"cx-toggle-details-link-text"],[1,"cx-kb-key-details"],[1,"cx-kb-pair"],[1,"cx-label"],[1,"cx-value"],[1,"cx-ghost-general-product-info"]],template:function(t,r){if(t&1&&(_(0,ip,20,14,"ng-container",1),g(1,"async"),_(2,np,1,0,"ng-template",null,0,ge)),t&2){let a=ae(3);u("ngIf",f(1,2,r.product$))("ngIfElse",a)}},dependencies:[H,be,mi,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Fd=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorProductTitle:{component:Ad}}})],imports:[ue,le,tt,k,W,Ie,vi]});let n=i;return n})(),Rd=(()=>{let i=class i{constructor(e,t,r,a){this.launchDialogService=e,this.configuratorCommonsService=t,this.routingService=r,this.productService=a,this.dialogData$=this.launchDialogService.data$.pipe(Y(s=>s&&s.owner)),this.product$=this.dialogData$.pipe(N(s=>this.productService.get(s.owner.id))),this.iconTypes=pe,this.focusConfig={trap:!0,block:!0,autofocus:".btn-primary",focusOnEscape:!0}}close(){this.launchDialogService.closeDialog("Close restart configuration dialog")}resume(e){this.close(),this.routingService.go({cxRoute:"configure"+e.configuratorType,params:{ownerType:ce.OwnerType.PRODUCT,entityKey:e.code}},{queryParams:{productCode:e.code}})}restart(e){this.configuratorCommonsService.forceNewConfiguration(e),this.close()}backToPDP(e){this.close(),this.routingService.go({cxRoute:"product",params:e})}};i.\u0275fac=function(t){return new(t||i)(h(gt),h(ie),h(Je),h(We))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-restart-dialog"]],decls:3,vars:3,consts:[["role","dialog","aria-modal","true","aria-labelledby","dialogTitle",1,"cx-modal-container"],[4,"ngIf"],[1,"cx-modal-content",3,"esc","cxFocus"],[1,"cx-dialog-header","modal-header"],["id","dialogTitle",1,"cx-dialog-title","modal-title"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],["id","cx-configurator-restart-dialog-description"],["aria-describedby","cx-configurator-restart-dialog-description",1,"btn","btn-primary","btn-block",3,"click"],["type","button","aria-describedby","cx-configurator-restart-dialog-description",1,"btn","btn-secondary","btn-block",3,"click"]],template:function(t,r){t&1&&(d(0,"div",0),_(1,op,3,3,"ng-container",1),g(2,"async"),p()),t&2&&(c(),u("ngIf",f(2,1,r.dialogData$)))},dependencies:[H,be,Oe,J,te],encapsulation:2});let n=i;return n})(),Dd={launch:{CONFIGURATOR_RESTART_DIALOG:{inlineRoot:!0,component:Rd,dialogType:gi.DIALOG}}},Nd=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z(Dd)],imports:[k,W,Ie,me]});let n=i;return n})(),Pd=(()=>{let i=class i{determinePageFromRouterData(e){return e.pageType??ft.PageType.CONFIGURATION}isOverviewPage(e){return e===ft.PageType.OVERVIEW}navigateToOverview(e){this.routingService.go({cxRoute:"configureOverview"+e.owner.configuratorType,params:{entityKey:e.owner.id,ownerType:e.owner.type}},{queryParams:{productCode:e.productCode}}).then(()=>{this.focusOverviewInTabBar()})}navigateToConfiguration(e){this.routingService.go({cxRoute:"configure"+e.owner.configuratorType,params:{entityKey:e.owner.id,ownerType:e.owner.type}},{queryParams:{productCode:e.productCode}}).then(()=>{this.focusConfigurationInTabBar()})}focusOverviewInTabBar(){this.configRouterExtractorService.extractRouterData().pipe(N(e=>this.configuratorCommonsService.getConfiguration(e.owner)),Y(e=>e.overview!=null),O(1),Ge(0)).subscribe(()=>{this.focusService.clear(),this.configUtils.focusFirstActiveElement(i.TAB_BAR_QUERY_SELECTOR)})}focusConfigurationInTabBar(){this.configRouterExtractorService.extractRouterData().pipe(Y(e=>e.pageType===ft.PageType.CONFIGURATION),N(e=>this.configuratorCommonsService.getConfiguration(e.owner)),O(1),Ge(0)).subscribe(()=>{this.focusService.clear(),this.configUtils.focusFirstActiveElement(i.TAB_BAR_QUERY_SELECTOR)})}getTabIndexConfigTab(){let e=0;return this.isOverviewPage$.pipe(O(1)).subscribe(t=>{t&&(e=-1)}),e}getTabIndexForConfigTab(e){return this.isOverviewPage(e)?-1:0}getTabIndexOverviewTab(){let e=0;return this.isOverviewPage$.pipe(O(1)).subscribe(t=>{t||(e=-1)}),e}getTabIndexForOverviewTab(e){return this.isOverviewPage(e)?0:-1}switchTabOnArrowPress(e,t){(e.code==="ArrowLeft"||e.code==="ArrowRight")&&(e.preventDefault(),t==="#configTab"?this.overviewTab.nativeElement?.focus():this.configTab.nativeElement?.focus())}constructor(e,t){this.configRouterExtractorService=e,this.configuratorCommonsService=t,this.ghostStyle=!0,this.routingService=ee(Je),this.configUtils=ee(de),this.focusService=ee(dt),this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe(N(r=>this.configuratorCommonsService.getConfiguration(r.owner).pipe(Ce(()=>{this.ghostStyle=!1})))),this.isOverviewPage$=this.routerData$.pipe(A(r=>r.pageType===ft.PageType.OVERVIEW)),this.pageType$=this.routerData$.pipe(A(r=>this.determinePageFromRouterData(r))),et("a11yMobileVisibleFocus")}};i.TAB_BAR_QUERY_SELECTOR="cx-configurator-tab-bar",i.\u0275fac=function(t){return new(t||i)(h(he),h(ie))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-tab-bar"]],viewQuery:function(t,r){if(t&1&&(ot(ap,5),ot(cp,5)),t&2){let a;at(a=ct())&&(r.configTab=a.first),at(a=ct())&&(r.overviewTab=a.first)}},hostVars:2,hostBindings:function(t,r){t&2&&se("ghost",r.ghostStyle)},decls:2,vars:3,consts:[["ghostTabBar",""],["configTab",""],["overviewTab",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],["class","cx-tab-bar","role","tablist",4,"ngIf"],["role","tablist",1,"cx-tab-bar"],["role","tab",3,"keydown","keydown.enter","keydown.space","click","tabindex"],[1,"cx-ghost-tab-bar"]],template:function(t,r){t&1&&(_(0,dp,5,4,"ng-container",3),g(1,"async")),t&2&&u("ngIf",f(1,1,r.routerData$))},dependencies:[H,J,te],encapsulation:2});let n=i;return n})(),Vd=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorTabBar:{component:Pd}}})],imports:[ue,le,me,tt,k,W,pt,ut]});let n=i;return n})(),Ud={productConfigurator:{updateConfigurationMessage:{waitingTime:1e3}}},Gd=(()=>{let i=class i{constructor(e,t,r){this.configuratorCommonsService=e,this.configRouterExtractorService=t,this.config=r,this.hasPendingChanges$=this.configRouterExtractorService.extractRouterData().pipe(N(a=>this.configuratorCommonsService.hasPendingChanges(a.owner)),Bt(),N(a=>a?Se(a).pipe(Ge(this.config.productConfigurator?.updateConfigurationMessage?.waitingTime||1e3)):Se(a)))}};i.\u0275fac=function(t){return new(t||i)(h(ie),h(he),h(en))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-update-message"]],decls:7,vars:7,consts:[["aria-live","polite","aria-atomic","false"],[1,"cx-update-msg"]],template:function(t,r){t&1&&(d(0,"div",0)(1,"div",1),g(2,"async"),I(3,"cx-spinner"),d(4,"strong"),y(5),g(6,"cxTranslate"),p()()()),t&2&&(c(),se("visible",f(2,3,r.hasPendingChanges$)),c(4),re(f(6,5,"configurator.header.updateMessage")))},dependencies:[po,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Md=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorUpdateMessage:{component:Gd}}}),Z(Ud),{provide:en,useExisting:Qe}],imports:[k,fo,W]});let n=i;return n})(),Bd=(()=>{let i=class i{constructor(e,t,r,a){this.productService=e,this.translationService=t,this.configuratorRouterExtractorService=r,this.configuratorCommonsService=a,this.configuration$=this.configuratorRouterExtractorService.extractRouterData().pipe(N(s=>this.configuratorCommonsService.getConfiguration(s.owner))),this.title$=this.translationService.translate("configurator.variantCarousel.title"),this.items$=this.configuration$.pipe(A(s=>s.variants?s.variants:[]),A(s=>s.map(C=>this.productService.get(C.productCode))))}};i.\u0275fac=function(t){return new(t||i)(h(We),h(we),h(he),h(ie))},i.\u0275cmp=q({type:i,selectors:[["cx-configurator-variant-carousel"]],decls:3,vars:5,consts:[["carouselItem",""],[4,"ngIf"],[1,"cx-variant-carousel-container"],["role","region","itemWidth","285px",3,"items","title","template"],[3,"item"]],template:function(t,r){if(t&1&&(_(0,mp,8,13,"ng-container",1),g(1,"async"),g(2,"async")),t&2){let a;u("ngIf",((a=(a=f(1,1,r.items$))==null?null:a.length)!==null&&a!==void 0?a:0)>0&&f(2,3,r.items$))}},dependencies:[H,go,ho,J,te],encapsulation:2,changeDetection:0});let n=i;return n})(),Ld=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Z({cmsComponents:{ConfiguratorVariantCarousel:{component:Bd}}})],imports:[ue,le,k,W,mo,Co]});let n=i;return n})(),kd=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[Od,hp,cd,Fd,Vd,Er,rd,ud,Md,Ed,na,Cd,ca,bd,Qp,Zp,ta,Ld,wr,fd,_d,Td,id,Nd]});let n=i;return n})(),sa=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:function(t){let r=null;return t?r=new(t||i):r=U(Qe),r},providedIn:"root"});let n=i;return n})(),Ro=class{},He=class He{constructor(i,o,e){this.adapters=i,this.configUtilsService=o,this.config=e}createConfiguration(i,o,e=!1){return this.getAdapter(i.configuratorType).createConfiguration(i,o,e)}readConfiguration(i,o,e){return this.getAdapter(e.configuratorType).readConfiguration(i,o,e)}updateConfiguration(i){return this.getAdapter(i.owner.configuratorType).updateConfiguration(i)}addToCart(i){return this.getAdapter(i.owner.configuratorType).addToCart(i)}readConfigurationForCartEntry(i){return this.getAdapter(i.owner.configuratorType).readConfigurationForCartEntry(i)}updateConfigurationForCartEntry(i){return this.getAdapter(i.configuration.owner.configuratorType).updateConfigurationForCartEntry(i)}readConfigurationForOrderEntry(i){return this.getAdapter(i.owner.configuratorType).readConfigurationForOrderEntry(i)}readPriceSummary(i){return this.getAdapter(i.owner.configuratorType).readPriceSummary(i)}getConfigurationOverview(i){return this.getAdapter(i.owner.configuratorType).getConfigurationOverview(i.configId)}updateConfigurationOverview(i){let o=i.overview;return o?this.getAdapter(i.owner.configuratorType).updateConfigurationOverview(o):this.getAdapter(i.owner.configuratorType).getConfigurationOverview(i.configId)}searchVariants(i){return this.getAdapter(i.owner.configuratorType).searchVariants(i.configId)}getAdapter(i){let o=this.adapters.find(e=>this.isAdapterMatching(e,i));if(o)return o;throw new Error("No adapter found for configurator type: "+i)}isAdapterMatching(i,o){let e=i.getConfiguratorType()===o;if(e&&o==="CLOUDCPQCONFIGURATOR"){let t=this.config.productConfigurator?.cpqOverOcc??!1,r=!!i.supportsCpqOverOcc&&i.supportsCpqOverOcc();e=t===r}return e}};He.CONFIGURATOR_ADAPTER_LIST=new Me("ConfiguratorAdapterList"),He.\u0275fac=function(o){return new(o||He)(U(He.CONFIGURATOR_ADAPTER_LIST),U(nt),U(sa))},He.\u0275prov=ne({token:He,factory:He.\u0275fac});var yt=He,$d=(()=>{let i=class i{constructor(e,t,r){this.configuratorCartService=e,this.routingService=t,this.configuratorQuantityService=r,this.subscription=new $e,this.observeRouterChanges()}observeRouterChanges(){this.subscription.add(this.routingService.getRouterState().subscribe(e=>{this.isConfiguratorRelatedRoute(e.state.semanticRoute)||(this.configuratorCartService.removeCartBoundConfigurations(),this.configuratorQuantityService.setQuantity(1))}))}isConfiguratorRelatedRoute(e){return e?e.includes("configure"):!1}ngOnDestroy(){this.subscription.unsubscribe()}};i.\u0275fac=function(t){return new(t||i)(U(Cr),U(Je),U(ea))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),jd=(()=>{let i=class i{constructor(e){}};i.\u0275fac=function(t){return new(t||i)(U($d))},i.\u0275mod=B({type:i}),i.\u0275inj=M({});let n=i;return n})(),qd={productConfigurator:{enableVariantSearch:!1,cpqOverOcc:!0}},ua=(()=>{let i=class i{getFirstGroupWithAttributes(e,t=!1){let r=this.getFirstGroupWithAttributesForList(e.groups,t);if(r)return r;throw new Error("Configuration does not have any attributes")}getFirstGroupWithAttributesForList(e,t){let r;t&&e.length>0&&e[0].groupType===m.GroupType.CONFLICT_HEADER_GROUP&&(r=e[0].subGroups.filter(s=>s.attributes&&s.attributes.length>0).shift()),r===void 0&&(r=e.filter(s=>s.attributes&&s.attributes.length>0&&s.groupType!==m.GroupType.CONFLICT_GROUP).shift());let a;return r?a=r.id:a=e.filter(s=>s.subGroups&&s.subGroups.length>0).flatMap(s=>this.getFirstGroupWithAttributesForList(s.subGroups,t)).filter(s=>s).shift(),a}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Kd=(()=>{let i=class i{constructor(e,t,r,a,s,C,T){this.actions$=e,this.configuratorCommonsConnector=t,this.commonConfigUtilsService=r,this.configuratorGroupUtilsService=a,this.configuratorGroupStatusService=s,this.store=C,this.configuratorBasicEffectService=T,this.logger=ee(je),this.featureConfigService=ee(lt),this.createConfiguration$=ve(()=>this.actions$.pipe(_e(Xn),Ke(v=>this.configuratorCommonsConnector.createConfiguration(v.payload.owner,v.payload.configIdTemplate,v.payload.forceReset).pipe(N(w=>{let K=this.configuratorBasicEffectService.getFirstGroupWithAttributes(w);return this.store.dispatch(new mt(V(F({},w),{interactionState:{currentGroup:K}}))),[new Ni(w),new Nt(w)]}),Re(w=>[new Di({ownerKey:v.payload.owner.key,error:De(w,this.logger)})]))))),this.readConfiguration$=ve(()=>this.actions$.pipe(_e(Jn),Ke(v=>this.configuratorCommonsConnector.readConfiguration(v.payload.configuration.configId,v.payload.groupId,v.payload.configuration.owner).pipe(N(w=>[new ei(w)]),Re(w=>[new Jt({ownerKey:v.payload.configuration.owner.key,error:De(w,this.logger)})]))))),this.updateConfiguration$=ve(()=>this.actions$.pipe(_e(tr),A(v=>v.payload),Ke(v=>this.configuratorCommonsConnector.updateConfiguration(v).pipe(A(w=>new Gi(V(F({},w),{interactionState:{isConflictResolutionMode:v.interactionState.isConflictResolutionMode}}))),Re(w=>{let K=De(w,this.logger);return[new Ui({configuration:v,error:K})]}))))),this.updatePriceSummary$=ve(()=>this.actions$.pipe(_e(ar),A(v=>v.payload),Y(v=>v.pricingEnabled===!0),Ke(v=>this.configuratorCommonsConnector.readPriceSummary(v).pipe(A(w=>new ki(w,{isDeltaRendering:this.featureConfigService.isEnabled("productConfiguratorDeltaRendering")})),Re(w=>{let K=De(w,this.logger);return[new Li({ownerKey:v.owner.key,error:K})]}))))),this.getOverview$=ve(()=>this.actions$.pipe(_e(sr),A(v=>v.payload),Ke(v=>this.configuratorCommonsConnector.getConfigurationOverview(v).pipe(A(w=>new qi({ownerKey:v.owner.key,overview:w})),Re(w=>{let K=De(w,this.logger);return[new ji({ownerKey:v.owner.key,error:K})]}))))),this.updateOverview$=ve(()=>this.actions$.pipe(_e(lr),A(v=>v.payload),Ke(v=>this.configuratorCommonsConnector.updateConfigurationOverview(v).pipe(A(w=>new Wi({ownerKey:v.owner.key,overview:w})),Re(w=>{let K=De(w,this.logger);return[new Qi({ownerKey:v.owner.key,error:K})]}))))),this.updateConfigurationSuccess$=ve(()=>this.actions$.pipe(_e(nr),A(v=>v.payload),Ke(v=>this.store.pipe(Ee(Yt(v.owner.key)),O(1),Y(w=>w===!1),N(()=>this.store.pipe(Ee(zo(v.owner.key)),O(1),A(w=>{let K=this.configuratorBasicEffectService.getFirstGroupWithAttributes(v,v.interactionState.isConflictResolutionMode),oe=this.configuratorGroupUtilsService.getParentGroup(v.groups,this.configuratorGroupUtilsService.getGroupById(v.groups,K),void 0);return{currentGroupId:w,groupIdFromPayload:K,parentGroupFromPayload:oe}}),N(w=>{let K=new Mi(v),oe=new mt(V(F({},v),{interactionState:{currentGroup:w.groupIdFromPayload}})),Et=new Nt(v);return w.currentGroupId===w.groupIdFromPayload?[K,oe,Et]:[K,oe,Et,new ti({configuration:v,groupId:w.groupIdFromPayload,parentGroupId:w.parentGroupFromPayload?.id})]}))))))),this.updateConfigurationFail$=ve(()=>this.actions$.pipe(_e(ir),A(v=>v.payload),Ke(v=>this.store.pipe(Ee(Yt(v.configuration.owner.key)),O(1),Y(w=>w===!1),A(()=>new Bi(v.configuration)))))),this.handleErrorOnUpdate$=ve(()=>this.actions$.pipe(_e(or),A(v=>v.payload),A(v=>new Pi({configuration:v,groupId:this.configuratorBasicEffectService.getFirstGroupWithAttributes(v)})))),this.groupChange$=ve(()=>this.actions$.pipe(_e(rn),N(v=>this.store.pipe(Ee(Yt(v.payload.configuration.owner.key)),O(1),Y(w=>w===!1),N(()=>this.configuratorCommonsConnector.readConfiguration(v.payload.configuration.configId,v.payload.groupId,v.payload.configuration.owner).pipe(N(w=>[new Yi({entityKey:v.payload.configuration.owner.key,currentGroup:v.payload.groupId}),new ii({entityKey:v.payload.configuration.owner.key,menuParentGroup:v.payload.parentGroupId}),new ei(w),new mt(V(F({},w),{interactionState:{currentGroup:v.payload.groupId}}))]),Re(w=>[new Jt({ownerKey:v.payload.configuration.owner.key,error:De(w,this.logger)})]))))))),this.removeProductBoundConfigurations$=ve(()=>this.actions$.pipe(_e(vr),N(()=>this.store.pipe(Ee(an),O(1),A(v=>{let w=v.configurations.entities,K=[];for(let oe in w)oe.includes(ce.OwnerType.PRODUCT)&&K.push(oe);return new ht({ownerKey:K})})))))}};i.\u0275fac=function(t){return new(t||i)(U(pi),U(yt),U(nt),U(Pt),U(Jo),U(st),U(ua))},i.\u0275prov=ne({token:i,factory:i.\u0275fac});let n=i;return n})(),Qd="Entry number is required in addToCart response",Wd=(()=>{let i=class i{constructor(e,t,r,a,s,C){this.actions$=e,this.configuratorCommonsConnector=t,this.commonConfigUtilsService=r,this.configuratorGroupUtilsService=a,this.store=s,this.configuratorBasicEffectService=C,this.logger=ee(je),this.addToCart$=ve(()=>this.actions$.pipe(_e(Qn),A(T=>T.payload),N(T=>this.configuratorCommonsConnector.addToCart(T).pipe(N(v=>{let w=v.entry?.entryNumber;if(w===void 0)throw Error(Qd);return[new wi({ownerKey:T.owner.key,cartEntryNo:w.toString()}),new Wt.CartAddEntrySuccess(V(F({},v),{userId:T.userId,cartId:T.cartId,productCode:T.productCode,quantity:T.quantity,deliveryModeChanged:v.deliveryModeChanged,entry:v.entry,quantityAdded:v.quantityAdded,statusCode:v.statusCode,statusMessage:v.statusMessage}))]}),Re(v=>Se(new Wt.CartAddEntryFail({userId:T.userId,cartId:T.cartId,productCode:T.productCode,quantity:T.quantity,error:v instanceof Wr?De(v,this.logger):v}))))))),this.updateCartEntry$=ve(()=>this.actions$.pipe(_e(nn),A(T=>T.payload),N(T=>this.configuratorCommonsConnector.updateConfigurationForCartEntry(T).pipe(N(v=>[new Wt.CartUpdateEntrySuccess({userId:T.userId,cartId:T.cartId,entryNumber:T.cartEntryNumber,quantity:v.quantity})]),Re(v=>Se(new Wt.CartUpdateEntryFail({userId:T.userId,cartId:T.cartId,entryNumber:T.cartEntryNumber,error:De(v,this.logger)}))))))),this.readConfigurationForCartEntry$=ve(()=>this.actions$.pipe(_e($n),N(T=>{let v=T.payload;return this.configuratorCommonsConnector.readConfigurationForCartEntry(v).pipe(N(w=>{let K=new mt(V(F({},w),{interactionState:{currentGroup:this.configuratorBasicEffectService.getFirstGroupWithAttributes(w,!w.immediateConflictResolution)}}));return[new yi(w),K,new Nt(w)]}),Re(w=>[new xi({ownerKey:T.payload.owner.key,error:De(w,this.logger)})]))}))),this.readConfigurationForOrderEntry$=ve(()=>this.actions$.pipe(_e(qn),N(T=>{let v=T.payload;return this.configuratorCommonsConnector.readConfigurationForOrderEntry(v).pipe(N(w=>[new Ii(w)]),Re(w=>[new Ti({ownerKey:T.payload.owner.key,error:De(w,this.logger)})]))}))),this.removeCartBoundConfigurations$=ve(()=>this.actions$.pipe(_e(Yn),N(()=>this.store.pipe(Ee(an),O(1),A(T=>{let v=T.configurations.entities,w=[],K=[];for(let oe in v)oe.includes(ce.OwnerType.CART_ENTRY)?w.push(oe):oe.includes(ce.OwnerType.PRODUCT)&&K.push(oe);return K.forEach(oe=>{v[oe].value?.nextOwner!==void 0&&w.push(oe)}),new ht({ownerKey:w})}))))),this.addOwner$=ve(()=>this.actions$.pipe(_e(Wn),N(T=>this.store.pipe(Ee(Ct(T.payload.ownerKey)),O(1),N(v=>{let w=it.createOwner(ce.OwnerType.CART_ENTRY,T.payload.cartEntryNo);return this.commonConfigUtilsService.setOwnerKey(w),[new Ai({configuration:v,cartEntryNo:T.payload.cartEntryNo}),new Hi({entityKey:w.key,interactionState:v.interactionState})]})))))}};i.\u0275fac=function(t){return new(t||i)(U(pi),U(yt),U(nt),U(Pt),U(st),U(ua))},i.\u0275prov=ne({token:i,factory:i.\u0275fac});let n=i;return n})(),Hd=(()=>{let i=class i{constructor(e,t,r){this.actions$=e,this.configuratorCommonsConnector=t,this.configuratorCoreConfig=r,this.logger=ee(je),this.searchVariants$=ve(()=>this.actions$.pipe(_e(Fi),Y(()=>this.configuratorCoreConfig.productConfigurator?.enableVariantSearch===!0),Y(a=>a.payload.owner.configuratorType==="CPQCONFIGURATOR"),N(a=>this.configuratorCommonsConnector.searchVariants(a.payload).pipe(N(s=>[new Xt({ownerKey:a.payload.owner.key,variants:s})]),Re(s=>[new Ri({ownerKey:a.payload.owner.key,error:De(s,this.logger)})]))))),this.searchVariantsInCaseNotActive$=ve(()=>this.actions$.pipe(_e(Fi),Y(a=>this.configuratorCoreConfig.productConfigurator?.enableVariantSearch===!1||a.payload.owner.configuratorType!=="CPQCONFIGURATOR"),A(a=>new Xt({ownerKey:a.payload.owner.key,variants:[]}))))}};i.\u0275fac=function(t){return new(t||i)(U(pi),U(yt),U(sa))},i.\u0275prov=ne({token:i,factory:i.\u0275fac});let n=i;return n})(),Yd=[Kd,Wd,Hd],Ln=class n{static mergeGroupsWithSupplements(i,o){let e=[];return i.forEach(t=>e.push(this.mergeGroupWithSupplements(t,o))),e}static mergeGroupWithSupplements(i,o){return this.isTargetGroup(i,o)?this.mergeTargetGroupWithSupplements(i,o):V(F({},i),{subGroups:this.mergeGroupsWithSupplements(i.subGroups,o)})}static mergeTargetGroupWithSupplements(i,o){let e=i.attributes;return o.forEach(t=>{let r=n.getAttributeName(t.attributeUiKey);e=this.updateArrayElement(e,a=>a.name===r,a=>V(F({},a),{values:this.mergeValuesWithSupplement(a.values,t)}))}),V(F({},i),{attributes:e})}static mergeValuesWithSupplement(i,o){let e=i;return o.valueSupplements.forEach(t=>{e=this.updateArrayElement(e,r=>r.valueCode===t.attributeValueKey,r=>V(F({},r),{valuePrice:t.priceValue}))}),e}static isTargetGroup(i,o){let e=o[0];if(e){let t=n.getAttributeName(e.attributeUiKey),r=n.getKey(e.attributeUiKey,t);return i.id.indexOf(r)>=0}else throw new Error("We expect at least one attribute supplement")}static updateArrayElement(i,o,e){if(i){let t=i.findIndex(o);if(t===-1)return i;let r=i[t],a=e(r,t),s=[...i];return s[t]=a,s}}static getAttributeName(i){let o=i.lastIndexOf("@");return i.slice(o+1)}static getKey(i,o){return i.replace("@"+o,"")}},zd={configId:"",productCode:"",groups:[],flatGroups:[],interactionState:{currentGroup:void 0,groupsVisited:{},menuParentGroup:void 0},owner:it.createInitialOwner()};var fe;function Xd(n=zd,i){return Zd(),fe.has(i.type)?fe.get(i.type)(n,i):n}function Zd(){fe===void 0&&(fe=new Map,fe.set(rr,Jd),fe.set(nn,ig),fe.set(Zn,ng),fe.set(er,rg),fe.set(jn,og),fe.set(cr,ag),fe.set(ur,cg),fe.set(pr,sg),fe.set(zn,ug),fe.set(Kn,lg),fe.set(Hn,pg),fe.set(dr,dg),fe.set(gr,gg),fe.set(fr,fg),fe.set(mr,mg),fe.set(on,eg),fe.set(_r,tg),fe.set(rn,vg))}function Jd(n,i){let o=un(i,n);return oi(o),o.isCartEntryUpdateRequired=!0,o.overview=void 0,n.interactionState.newConfiguration!==void 0&&(o.interactionState.newConfiguration=!1),o}function oi(n){n.interactionState.showConflictSolverDialog=n.immediateConflictResolution&&!n.consistent,n.interactionState.showConflictSolverDialog&&(n.interactionState.issueNavigationDone=!0)}function eg(n,i){if(i.type===on)return V(F({},n),{interactionState:V(F({},n.interactionState),{showConflictSolverDialog:!1})})}function tg(n){let i=V(F({},n),{interactionState:F({},n.interactionState)});return oi(i),i}function ig(n){let i=F({},n);return i.isCartEntryUpdateRequired=!1,i}function ng(n,i){let o=sn(un(i,n));return oi(o),o.interactionState.newConfiguration=o.newConfiguration,o}function rg(n,i){let o=sn(un(i,n));return oi(o),o}function og(n,i){return sn(un(i,n))}function ag(n,i){return sn(_g(i,n))}function cg(n,i){let o=V(F({},i.payload.overview),{possibleGroups:i.payload.overview.groups});return V(F({},n),{overview:o,priceSummary:o.priceSummary,interactionState:V(F({},n.interactionState),{issueNavigationDone:!1})})}function sg(n,i){let o=F({},i.payload.overview);return V(F({},n),{overview:o,priceSummary:o.priceSummary,interactionState:V(F({},n.interactionState),{issueNavigationDone:!1})})}function ug(n,i){return V(F({},n),{variants:i.payload.variants})}function lg(n,i){let o=i.payload.overview,e=o?V(F({},i.payload),{overview:V(F({},o),{possibleGroups:o.groups})}):i.payload;return V(F(F({},n),e),{priceSummary:e.overview?.priceSummary})}function pg(n,i){let o=F({},i.payload.configuration);return o.nextOwner=it.createOwner(ce.OwnerType.CART_ENTRY,i.payload.cartEntryNo),F(F({},n),o)}function dg(n,i){let o=i.payload.interactionState;return V(F({},n),{interactionState:o})}function gg(n,i){let o=i.payload.currentGroup,e=V(F({},n),{interactionState:V(F({},n.interactionState),{currentGroup:o})});return oi(e),e}function fg(n,i){let o=i.payload.menuParentGroup;return V(F({},n),{interactionState:V(F({},n.interactionState),{menuParentGroup:o})})}function mg(n,i){let o=i.payload.visitedGroups,e={groupsVisited:{}};return n.interactionState.groupsVisited&&Object.keys(n.interactionState.groupsVisited).forEach(t=>Do(e,t)),o.forEach(t=>Do(e,t)),V(F({},n),{interactionState:V(F({},n.interactionState),{groupsVisited:e.groupsVisited})})}function vg(n,i){let o=i.payload.conflictResolutionMode;return V(F({},n),{interactionState:V(F({},n.interactionState),{isConflictResolutionMode:o})})}function Do(n,i){let o=n.groupsVisited;o&&(o[i]=!0)}function sn(n){if(n.interactionState.currentGroup)return n;let i,o=n.flatGroups;o&&o.length>0&&(i=n.immediateConflictResolution?o.find(t=>!t.id.startsWith(m.ConflictIdPrefix))?.id:o[0].id);let e=i?.startsWith(m.ConflictIdPrefix)?m.ConflictHeaderId:void 0;return V(F({},n),{interactionState:V(F({},n.interactionState),{currentGroup:i,menuParentGroup:e})})}function un(n,i){let o=F({},n.payload),e=o.groups.length>0?o.groups:i.groups,t=V(F(F({},i),o),{groups:e,interactionState:V(F(F({},i.interactionState),o.interactionState),{showConflictSolverDialog:i.interactionState.showConflictSolverDialog,issueNavigationDone:!0})});return t.priceSupplements&&(t.priceSupplements=void 0),t}function _g(n,i){let o=F({},n.payload),e=o.priceSupplements,t=!n.isDeltaRendering&&e&&e.length>0?Ln.mergeGroupsWithSupplements(i.groups,e):i.groups;return V(F(F({},i),o),{groups:t,interactionState:V(F(F({},i.interactionState),o.interactionState),{issueNavigationDone:!0})})}function hg(){return{configurations:Q.entityProcessesLoaderReducer(X,Xd)}}var la=new Me("ConfiguratorReducers"),Cg={provide:la,useFactory:hg},yg=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[Cg],imports:[k,io,zr.forFeature(Bo,la),Xr.forFeature(Yd)]});let n=i;return n})(),xg=(()=>{let i=class i{constructor(e,t,r){this.eventService=e,this.configExpertModeService=t,this.configuratorCommonsService=r,this.subscription=new $e,this.onLogout()}onLogout(){this.subscription.add(Ar(this.eventService.get(no)).subscribe(()=>{this.configExpertModeService.setExpModeActive(!1),this.configExpertModeService.setExpModeRequested(!1),this.configuratorCommonsService.removeProductBoundConfigurations()}))}ngOnDestroy(){this.subscription.unsubscribe()}};i.\u0275fac=function(t){return new(t||i)(U(ro),U(St),U(ie))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),bg=(()=>{let i=class i{constructor(e){}};i.\u0275fac=function(t){return new(t||i)(U(xg))},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[yt,Z(qd)],imports:[yg,jd]});let n=i;return n})(),Ig=(()=>{let i=class i{constructor(){}convert(e,t){return V(F({},t),{userId:e.userId,cartId:e.cartId,product:{code:e.productCode},quantity:e.quantity,configId:e.configId})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),j;(function(n){let i;(function(s){s.CSTIC_GROUP="CSTIC_GROUP",s.INSTANCE="INSTANCE",s.CONFLICT_HEADER="CONFLICT_HEADER",s.CONFLICT="CONFLICT"})(i=n.GroupType||(n.GroupType={}));let o;(function(s){s.STRING="STRING",s.NUMERIC="NUMERIC",s.SAP_DATE="SAP_DATE",s.CHECK_BOX="CHECK_BOX",s.CHECK_BOX_LIST="CHECK_BOX_LIST",s.RADIO_BUTTON="RADIO_BUTTON",s.RADIO_BUTTON_ADDITIONAL_INPUT="RADIO_BUTTON_ADDITIONAL_INPUT",s.DROPDOWN="DROPDOWN",s.DROPDOWN_ADDITIONAL_INPUT="DROPDOWN_ADDITIONAL_INPUT",s.READ_ONLY="READ_ONLY",s.READ_ONLY_SINGLE_SELECTION_IMAGE="READ_ONLY_SINGLE_SELECTION_IMAGE",s.READ_ONLY_MULTI_SELECTION_IMAGE="READ_ONLY_MULTI_SELECTION_IMAGE",s.NOT_IMPLEMENTED="NOT_IMPLEMENTED",s.SINGLE_SELECTION_IMAGE="SINGLE_SELECTION_IMAGE",s.MULTI_SELECTION_IMAGE="MULTI_SELECTION_IMAGE"})(o=n.UiType||(n.UiType={}));let e;(function(s){s.BUY="BUY"})(e=n.PriceType||(n.PriceType={}));let t;(function(s){s.VALUE_IMAGE="VALUE_IMAGE",s.CSTIC_IMAGE="CSTIC_IMAGE"})(t=n.ImageFormatType||(n.ImageFormatType={}));let r;(function(s){s.PRIMARY="PRIMARY",s.GALLERY="GALLERY"})(r=n.ImageType||(n.ImageType={}));let a;(function(s){s.VISIBLE="PRIMARY",s.USER_INPUT="USER_INPUT",s.PRICE_RELEVANT="PRICE_RELEVANT"})(a=n.OverviewFilterEnum||(n.OverviewFilterEnum={}))})(j||(j={}));var Tg=(()=>{let i=class i{constructor(e,t,r){this.config=e,this.translation=t,this.uiSettingsConfig=r}convert(e,t){let r=V(F({},t),{owner:t?.owner??it.createInitialOwner(),interactionState:t?.interactionState??{},configId:e.configId,complete:e.complete,consistent:e.consistent,totalNumberOfIssues:e.totalNumberOfIssues,productCode:e.rootProduct,groups:[],flatGroups:[],kbKey:e.kbKey??void 0,pricingEnabled:e.pricingEnabled??!0,hideBasePriceAndSelectedOptions:e.hideBasePriceAndSelectedOptions,immediateConflictResolution:e.immediateConflictResolution??!1,newConfiguration:e.newConfiguration,isPricingAsync:!0}),a=[];return e.groups?.forEach(s=>this.convertGroup(s,r.groups,a)),r.flatGroups=a,r}convertGroup(e,t,r){let a=[];e.attributes&&e.attributes.forEach(C=>this.convertAttribute(C,a));let s={description:e.description,configurable:e.configurable,complete:e.complete,consistent:e.consistent,groupType:this.convertGroupType(e.groupType),name:e.name,id:e.id,attributes:a,subGroups:[]};this.setGroupDescription(s),e.subGroups&&e.subGroups.forEach(C=>this.convertGroup(C,s.subGroups,r)),(s.groupType===m.GroupType.ATTRIBUTE_GROUP||s.groupType===m.GroupType.CONFLICT_GROUP)&&r.push(s),t.push(s)}getGroupId(e,t){return e.replace("@"+t,"")}convertAttribute(e,t){let r=e.conflicts?e.conflicts.length:0,a=[],s=[];e.images&&e.images.forEach(v=>this.convertImage(v,a)),this.addRetractValue(e,s),e.domainValues&&e.domainValues.forEach(v=>this.convertValue(v,s));let C=this.convertAttributeType(e),T={name:e.name,label:e.langDepName,required:e.required,uiType:C,uiTypeVariation:e.type,groupId:this.getGroupId(e.key,e.name),userInput:this.compileUserInput(e),maxlength:(e.maxlength??0)+(e.negativeAllowed?1:0),numDecimalPlaces:e.numberScale,negativeAllowed:e.negativeAllowed,numTotalLength:e.typeLength,selectedSingleValue:void 0,hasConflicts:r>0,images:a,values:s,intervalInDomain:e.intervalInDomain,key:e.key,validationType:e.validationType,visible:e.visible,description:e.longText};this.setSelectedSingleValue(T),this.compileAttributeIncomplete(T),t.push(T)}compileUserInput(e){let t;return(e.type===j.UiType.NUMERIC||e.type===j.UiType.STRING||e.type===j.UiType.READ_ONLY)&&(t=e.formattedValue?e.formattedValue:""),e.type===j.UiType.SAP_DATE&&(t=e.value?e.value:""),t}setSelectedSingleValue(e){if(e.values){let t=e.values.map(r=>r).filter(r=>r.selected);t&&t.length===1&&(e.selectedSingleValue=t[0].valueCode)}}isRetractValueSelected(e){return!(e.domainValues&&e.domainValues.filter(t=>t.selected).length)}setRetractValueDisplay(e,t){(e===m.UiType.DROPDOWN||e===m.UiType.RADIOBUTTON||e===m.UiType.SINGLE_SELECTION_IMAGE)&&(e===m.UiType.DROPDOWN&&t.selected?this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe(O(1)).subscribe(r=>t.valueDisplay=r):this.translation.translate("configurator.attribute.noOptionSelectedMsg").pipe(O(1)).subscribe(r=>t.valueDisplay=r))}hasSourceAttributeConflicts(e){return e.conflicts?e.conflicts.length>0:!1}isSourceAttributeTypeReadOnly(e){return e.type===j.UiType.READ_ONLY||e.type===j.UiType.READ_ONLY_SINGLE_SELECTION_IMAGE||e.type===j.UiType.READ_ONLY_MULTI_SELECTION_IMAGE}isRetractBlocked(e){return e.retractBlocked?e.retractBlocked:!1}addRetractValue(e,t){let r=this.isRetractBlocked(e),a=this.hasSourceAttributeConflicts(e);if(!r&&(this.uiSettingsConfig?.productConfigurator?.addRetractOption||this.isSourceAttributeTypeReadOnly(e)&&a)){let s=this.convertAttributeType(e);if(s===m.UiType.RADIOBUTTON||s===m.UiType.DROPDOWN||s===m.UiType.SINGLE_SELECTION_IMAGE){let C={valueCode:m.RetractValueCode,selected:this.isRetractValueSelected(e)};this.setRetractValueDisplay(s,C),t.push(C)}}}convertValue(e,t){let r=[];e.images&&e.images.forEach(s=>this.convertImage(s,r));let a={valueCode:e.key,valueDisplay:e.langDepName,name:e.name,selected:e.selected,images:r,description:e.longText};t.push(a)}convertImage(e,t){let r={url:(this.config?.backend?.media?.baseUrl||this.config?.backend?.occ?.baseUrl||"")+e.url,altText:e.altText,galleryIndex:e.galleryIndex,type:this.convertImageType(e.imageType),format:this.convertImageFormatType(e.format)};t.push(r)}getSingleSelectionUiType(e,t){switch(e){case j.UiType.RADIO_BUTTON:{t=m.UiType.RADIOBUTTON;break}case j.UiType.RADIO_BUTTON_ADDITIONAL_INPUT:{t=m.UiType.RADIOBUTTON_ADDITIONAL_INPUT;break}case j.UiType.DROPDOWN:{t=m.UiType.DROPDOWN;break}case j.UiType.DROPDOWN_ADDITIONAL_INPUT:{t=m.UiType.DROPDOWN_ADDITIONAL_INPUT;break}case j.UiType.CHECK_BOX:{t=m.UiType.CHECKBOX;break}case j.UiType.SINGLE_SELECTION_IMAGE:{t=m.UiType.SINGLE_SELECTION_IMAGE;break}}return t}getMultiSelectionUiType(e,t){switch(e){case j.UiType.CHECK_BOX_LIST:{t=m.UiType.CHECKBOXLIST;break}case j.UiType.MULTI_SELECTION_IMAGE:{t=m.UiType.MULTI_SELECTION_IMAGE;break}}return t}getReadOnlyUiType(e,t,r){switch(t){case j.UiType.READ_ONLY:{r=!e.retractBlocked&&this.hasSourceAttributeConflicts(e)?m.UiType.RADIOBUTTON:m.UiType.READ_ONLY;break}case j.UiType.READ_ONLY_SINGLE_SELECTION_IMAGE:{r=!e.retractBlocked&&this.hasSourceAttributeConflicts(e)?m.UiType.SINGLE_SELECTION_IMAGE:m.UiType.READ_ONLY_SINGLE_SELECTION_IMAGE;break}case j.UiType.READ_ONLY_MULTI_SELECTION_IMAGE:{r=!e.retractBlocked&&this.hasSourceAttributeConflicts(e)?m.UiType.MULTI_SELECTION_IMAGE:m.UiType.READ_ONLY_MULTI_SELECTION_IMAGE;break}}return r}getInputUiType(e,t){switch(e){case j.UiType.STRING:{t=m.UiType.STRING;break}case j.UiType.NUMERIC:{t=m.UiType.NUMERIC;break}case j.UiType.SAP_DATE:{t=m.UiType.SAP_DATE;break}}return t}convertAttributeType(e){let t=m.UiType.NOT_IMPLEMENTED,r=e.type?.toString()??"",a=this.determineCoreUiType(r);return t=this.getSingleSelectionUiType(a,t),t=this.getMultiSelectionUiType(a,t),t=this.getInputUiType(a,t),t=this.getReadOnlyUiType(e,a,t),t}determineCoreUiType(e){let t=e.indexOf(m.CustomUiTypeIndicator);return t>0?e.substring(0,t):e}convertGroupType(e){switch(e){case j.GroupType.CSTIC_GROUP:return m.GroupType.ATTRIBUTE_GROUP;case j.GroupType.INSTANCE:return m.GroupType.SUB_ITEM_GROUP;case j.GroupType.CONFLICT_HEADER:return m.GroupType.CONFLICT_HEADER_GROUP;case j.GroupType.CONFLICT:return m.GroupType.CONFLICT_GROUP}}setGroupDescription(e){switch(e.groupType){case m.GroupType.CONFLICT_HEADER_GROUP:this.translation.translate("configurator.group.conflictHeader").pipe(O(1)).subscribe(r=>e.description=r);break;case m.GroupType.CONFLICT_GROUP:let t=e.description;this.translation.translate("configurator.group.conflictGroup",{attribute:e.name}).pipe(O(1)).subscribe(r=>e.description=r),e.name=t;break;default:if(e.name!=="_GEN")return;this.translation.translate("configurator.group.general").pipe(O(1)).subscribe(r=>e.description=r)}}convertImageType(e){switch(e){case j.ImageType.GALLERY:return m.ImageType.GALLERY;case j.ImageType.PRIMARY:return m.ImageType.PRIMARY}}convertImageFormatType(e){switch(e){case j.ImageFormatType.VALUE_IMAGE:return m.ImageFormatType.VALUE_IMAGE;case j.ImageFormatType.CSTIC_IMAGE:return m.ImageFormatType.ATTRIBUTE_IMAGE}}compileAttributeIncomplete(e){e.incomplete=!1;let t=[m.UiType.RADIOBUTTON,m.UiType.RADIOBUTTON_ADDITIONAL_INPUT,m.UiType.DROPDOWN_ADDITIONAL_INPUT,m.UiType.DROPDOWN],r=[m.UiType.NUMERIC,m.UiType.SAP_DATE,m.UiType.STRING],a=[m.UiType.CHECKBOXLIST,m.UiType.CHECKBOX,m.UiType.MULTI_SELECTION_IMAGE],s=e.uiType??m.UiType.NOT_IMPLEMENTED;t.includes(s)?this.compileAttributeIncompleteSingleLevel(e):s===m.UiType.SINGLE_SELECTION_IMAGE?this.compileAttributeIncompleteSingleSelectionImage(e):r.includes(s)?this.compileAttributeIncompleteInputTypes(e):a.includes(s)&&this.compileAttributeIncompleteMultiSelect(e)}compileAttributeIncompleteSingleLevel(e){(!e.selectedSingleValue||e.selectedSingleValue===m.RetractValueCode)&&(e.incomplete=!0)}compileAttributeIncompleteSingleSelectionImage(e){e.selectedSingleValue||(e.incomplete=!0)}compileAttributeIncompleteInputTypes(e){e.userInput||(e.incomplete=!0)}compileAttributeIncompleteMultiSelect(e){let t=e.values?.find(r=>r.selected)!==void 0;e.incomplete=!t}};i.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###",i.\u0275fac=function(t){return new(t||i)(U(eo),U(we),U(Vt))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Ht=new Me("VariantConfiguratorNormalizer"),pa=new Me("VariantConfiguratorSerializer"),da=new Me("VariantConfiguratorPriceSummaryNormalizer"),ga=new Me("VariantConfiguratorPriceNormalizer"),fa=new Me("VariantConfiguratorAddToCartSerializer"),ma=new Me("VariantConfiguratorUpdateCartEntrySerializer"),hi=new Me("VariantConfiguratorOverviewNormalizer"),va=new Me("VariantConfiguratorOverviewSerializer"),Sg=(()=>{let i=class i{constructor(e,t){this.translation=e,this.converterService=t}convert(e,t){let r={priceSummary:e.pricing,configId:e.id},a=V(F({},t),{configId:e.id,groups:e.groups?.flatMap(s=>this.convertGroup(s)),priceSummary:this.converterService.convert(r,da),productCode:e.productCode});return this.setIssueCounters(a,e),a}convertGroup(e){let t=[],r=e.characteristicValues,a=e.subGroups,s={id:e.id,groupDescription:e.groupDescription,attributes:r?r.map(C=>({attribute:C.characteristic,attributeId:C.characteristicId,value:C.value,valueId:C.valueId,valuePrice:C.price})):[]};if(this.setGeneralDescription(s),a){let C=[];a.forEach(T=>this.convertGroup(T).forEach(v=>C.push(v))),s.subGroups=C}return t.push(s),t}setGeneralDescription(e){e.id==="_GEN"&&this.translation.translate("configurator.group.general").pipe(O(1)).subscribe(t=>e.groupDescription=t)}setIssueCounters(e,t){e.totalNumberOfIssues=t.totalNumberOfIssues,e.numberOfConflicts=t.numberOfConflicts,e.numberOfIncompleteCharacteristics=t.numberOfIncompleteCharacteristics}};i.\u0275fac=function(t){return new(t||i)(U(we),U(di))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Eg=(()=>{let i=class i{constructor(e){this.converterService=e}convert(e,t){return V(F({},t),{id:e.configId,productCode:e.productCode,appliedCsticFilter:this.convertAttributeFilters(e.attributeFilters),groupFilterList:this.convertGroupFilters(e.groupFilters)})}convertAttributeFilters(e){let t=[];return e?.forEach(r=>{t.push({key:r,selected:!0})}),t}convertGroupFilters(e){let t=[];return e?.forEach(r=>{t.push({key:r,selected:!0})}),t}};i.\u0275fac=function(t){return new(t||i)(U(di))},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),wg=(()=>{let i=class i{convert(e,t){return F(F({},t),e.priceSummary)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Og=(()=>{let i=class i{convert(e,t){let r=[];return e.groups.forEach(s=>this.convertGroup(s,r)),V(F({},t),{configId:e.configId,rootProduct:e.productCode,complete:e.complete,groups:r})}convertGroup(e,t){let r=[],a=[];e.attributes&&e.attributes.forEach(C=>this.convertAttribute(C,a)),e.subGroups&&e.subGroups.forEach(C=>this.convertGroup(C,r));let s={name:e.name,id:e.id,configurable:e.configurable,groupType:this.convertGroupType(e.groupType??m.GroupType.ATTRIBUTE_GROUP),description:e.description,attributes:a,subGroups:r};t.push(s)}isRetractValue(e){return e.selectedSingleValue===m.RetractValueCode}getRetractedValue(e){return e.values?.find(t=>t.selected)?.valueCode}retractValue(e,t){this.isRetractValue(e)?(t.value=this.getRetractedValue(e),t.retractTriggered=!0):t.value=e.selectedSingleValue}convertAttribute(e,t){let r=e.uiType??m.UiType.NOT_IMPLEMENTED,a={key:e.name,name:e.name,langDepName:e.label,required:e.required,retractTriggered:e.retractTriggered,type:this.convertCharacteristicType(r)},s=[m.UiType.RADIOBUTTON,m.UiType.RADIOBUTTON_ADDITIONAL_INPUT,m.UiType.DROPDOWN_ADDITIONAL_INPUT,m.UiType.DROPDOWN,m.UiType.SINGLE_SELECTION_IMAGE],C=[m.UiType.CHECKBOXLIST,m.UiType.CHECKBOX,m.UiType.MULTI_SELECTION_IMAGE],T=[m.UiType.STRING,m.UiType.SAP_DATE],v=[m.UiType.NUMERIC];if(s.includes(r))this.retractValue(e,a);else if(T.includes(r))a.value=e.userInput;else if(v.includes(r))a.formattedValue=e.userInput;else if(C.includes(r)){let w=[];e.values&&e.values.forEach(K=>{this.convertValue(K,w)}),a.domainValues=w}t.push(a)}convertValue(e,t){t.push({key:e.valueCode,langDepName:e.valueDisplay,name:e.name,selected:e.selected})}convertCharacteristicType(e){return[m.UiType.RADIOBUTTON,m.UiType.RADIOBUTTON_ADDITIONAL_INPUT,m.UiType.DROPDOWN_ADDITIONAL_INPUT,m.UiType.DROPDOWN,m.UiType.SINGLE_SELECTION_IMAGE].includes(e)?this.convertCharacteristicTypeSingleValue(e):this.convertCharacteristicTypeMultiValueAndInput(e)}convertCharacteristicTypeSingleValue(e){let t;switch(e){case m.UiType.RADIOBUTTON:{t=j.UiType.RADIO_BUTTON;break}case m.UiType.RADIOBUTTON_ADDITIONAL_INPUT:{t=j.UiType.RADIO_BUTTON_ADDITIONAL_INPUT;break}case m.UiType.DROPDOWN:{t=j.UiType.DROPDOWN;break}case m.UiType.DROPDOWN_ADDITIONAL_INPUT:{t=j.UiType.DROPDOWN_ADDITIONAL_INPUT;break}case m.UiType.SINGLE_SELECTION_IMAGE:{t=j.UiType.SINGLE_SELECTION_IMAGE;break}default:t=j.UiType.NOT_IMPLEMENTED}return t}convertCharacteristicTypeMultiValueAndInput(e){let t;switch(e){case m.UiType.STRING:{t=j.UiType.STRING;break}case m.UiType.NUMERIC:{t=j.UiType.NUMERIC;break}case m.UiType.SAP_DATE:{t=j.UiType.SAP_DATE;break}case m.UiType.CHECKBOX:{t=j.UiType.CHECK_BOX;break}case m.UiType.CHECKBOXLIST:{t=j.UiType.CHECK_BOX_LIST;break}case m.UiType.MULTI_SELECTION_IMAGE:{t=j.UiType.MULTI_SELECTION_IMAGE;break}default:t=j.UiType.NOT_IMPLEMENTED}return t}convertGroupType(e){switch(e){case m.GroupType.ATTRIBUTE_GROUP:return j.GroupType.CSTIC_GROUP;case m.GroupType.SUB_ITEM_GROUP:return j.GroupType.INSTANCE;case m.GroupType.CONFLICT_GROUP:return j.GroupType.CONFLICT;case m.GroupType.CONFLICT_HEADER_GROUP:return j.GroupType.CONFLICT_HEADER}}};i.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###",i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Ag=(()=>{let i=class i{convert(e,t){return V(F({},t),{userId:e.userId,cartId:e.cartId,product:{code:e.configuration.productCode},entryNumber:e.cartEntryNumber,configId:e.configuration.configId,configurationInfos:[{configuratorType:"CPQCONFIGURATOR"}]})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Fg=(()=>{let i=class i{constructor(e,t,r,a){this.http=e,this.occEndpointsService=t,this.converterService=r,this.configExpertModeService=a}getConfiguratorType(){return"CPQCONFIGURATOR"}getExpModeRequested(){let e=!1;return this.configExpertModeService.getExpModeRequested().pipe(O(1)).subscribe(t=>e=t),e}setExpModeActive(e){this.configExpertModeService.setExpModeActive(e)}createConfiguration(e,t,r=!1){let a=e.id,s=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("createVariantConfiguration",{urlParams:{productCode:a},queryParams:t?{configIdTemplate:t,expMode:s,forceReset:r}:{expMode:s,forceReset:r}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Ht),Ce(C=>{this.setExpModeActive(C.kbKey!==void 0)}),A(C=>V(F({},C),{owner:e})))}readConfiguration(e,t,r){let a=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("readVariantConfiguration",{urlParams:{configId:e},queryParams:{groupId:t,expMode:a}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Ht),Ce(s=>{this.setExpModeActive(s.kbKey!==void 0)}),A(s=>V(F({},s),{owner:r,newConfiguration:!1})))}updateConfiguration(e){let t=e.configId,r=this.getExpModeRequested(),a=this.occEndpointsService.buildUrl("updateVariantConfiguration",{urlParams:{configId:t},queryParams:{expMode:r}}),s=this.converterService.convert(e,pa);return this.http.patch(a,s,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(Ht),Ce(C=>{this.setExpModeActive(C.kbKey!==void 0)}),A(C=>V(F({},C),{owner:e.owner})))}addToCart(e){let t=this.occEndpointsService.buildUrl("addVariantConfigurationToCart",{urlParams:{userId:e.userId,cartId:e.cartId}}),r=this.converterService.convert(e,fa),a=new yn({"Content-Type":"application/json"});return this.http.post(t,r,{headers:a}).pipe(this.converterService.pipeable(Vn))}readConfigurationForCartEntry(e){let t=this.getExpModeRequested(),r=this.occEndpointsService.buildUrl("readVariantConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber},queryParams:{expMode:t}});return this.http.get(r).pipe(this.converterService.pipeable(Ht),Ce(a=>{this.setExpModeActive(a.kbKey!==void 0)}),A(a=>V(F({},a),{owner:e.owner})))}updateConfigurationForCartEntry(e){let t=this.occEndpointsService.buildUrl("updateVariantConfigurationForCartEntry",{urlParams:{userId:e.userId,cartId:e.cartId,cartEntryNumber:e.cartEntryNumber}}),r=new yn({"Content-Type":"application/json"}),a=this.converterService.convert(e,ma);return this.http.put(t,a,{headers:r}).pipe(this.converterService.pipeable(Vn))}readConfigurationForOrderEntry(e){let t=e.owner.type,r;return t===ce.OwnerType.QUOTE_ENTRY?r=this.occEndpointsService.buildUrl("readVariantConfigurationOverviewForQuoteEntry",{urlParams:{userId:e.userId,quoteId:e.orderId,quoteEntryNumber:e.orderEntryNumber}}):t===ce.OwnerType.SAVED_CART_ENTRY?r=this.occEndpointsService.buildUrl("readVariantConfigurationOverviewForSavedCartEntry",{urlParams:{userId:e.userId,cartId:e.orderId,cartEntryNumber:e.orderEntryNumber}}):r=this.occEndpointsService.buildUrl("readVariantConfigurationOverviewForOrderEntry",{urlParams:{userId:e.userId,orderId:e.orderId,orderEntryNumber:e.orderEntryNumber}}),this.http.get(r).pipe(this.converterService.pipeable(hi),A(a=>({configId:a.configId,productCode:a.productCode,groups:[],flatGroups:[],interactionState:{},overview:a,owner:it.createInitialOwner()})),A(a=>V(F({},a),{owner:e.owner})))}readPriceSummary(e){let t=this.occEndpointsService.buildUrl("readVariantConfigurationPriceSummary",{urlParams:{configId:e.configId},queryParams:{groupId:e.interactionState.currentGroup}});return this.http.get(t,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(ga),A(r=>V(F({},e),{priceSummary:r.priceSummary,priceSupplements:r.priceSupplements})))}getConfigurationOverview(e){let t=this.occEndpointsService.buildUrl("getVariantConfigurationOverview",{urlParams:{configId:e}});return this.http.get(t,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(hi))}updateConfigurationOverview(e){let t=this.occEndpointsService.buildUrl("getVariantConfigurationOverview",{urlParams:{configId:e.configId}}),r=this.converterService.convert(e,va);return this.http.patch(t,r,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(hi),A(a=>V(F({},a),{attributeFilters:e.attributeFilters,groupFilters:e.groupFilters,possibleGroups:e.possibleGroups})))}searchVariants(e){let t=this.occEndpointsService.buildUrl("searchConfiguratorVariants",{urlParams:{configId:e}});return this.http.get(t,{context:this.indicateSendUserForAsm()})}indicateSendUserForAsm(){return new Qr().set(co,{sendUserIdAsHeader:!0})}};i.\u0275fac=function(t){return new(t||i)(U(Hr),U(to),U(di),U(St))},i.\u0275prov=ne({token:i,factory:i.\u0275fac});let n=i;return n})(),Rg=(()=>{let i=class i{convert(e,t){let r=[];return e.attributes?.forEach(s=>{this.convertAttributeSupplements(s,r)}),V(F({},t),{configId:e.configId,productCode:"",groups:[],flatGroups:[],owner:it.createInitialOwner(),interactionState:{},priceSummary:e?.priceSummary,priceSupplements:r})}convertAttributeSupplements(e,t){let r={attributeUiKey:e?.csticUiKey,valueSupplements:[]};e?.priceSupplements?.forEach(a=>{this.convertValueSupplement(a,r?.valueSupplements)}),t.push(r)}convertValueSupplement(e,t){let r={attributeValueKey:e?.attributeValueKey,priceValue:e?.priceValue,obsoletePriceValue:e?.obsoletePriceValue};t.push(r)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function Dg(){return{backend:{occ:{endpoints:{createVariantConfiguration:"products/${productCode}/configurators/ccpconfigurator",readVariantConfiguration:"ccpconfigurator/${configId}",updateVariantConfiguration:"ccpconfigurator/${configId}",addVariantConfigurationToCart:"users/${userId}/carts/${cartId}/entries/ccpconfigurator",readVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",updateVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",readVariantConfigurationOverviewForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/ccpconfigurator/configurationOverview",readVariantConfigurationOverviewForSavedCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator/configurationOverview",readVariantConfigurationOverviewForQuoteEntry:"users/${userId}/quotes/${quoteId}/entries/${quoteEntryNumber}/ccpconfigurator/configurationOverview",readVariantConfigurationPriceSummary:"ccpconfigurator/${configId}/pricing",getVariantConfigurationOverview:"ccpconfigurator/${configId}/configurationOverview",searchConfiguratorVariants:"ccpconfigurator/${configId}/variants"}}}}}var Ng=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({providers:[{provide:yt.CONFIGURATOR_ADAPTER_LIST,useClass:Fg,multi:!0},{provide:Ht,useExisting:Tg,multi:!0},{provide:pa,useExisting:Og,multi:!0},{provide:da,useExisting:wg,multi:!0},{provide:ga,useExisting:Rg,multi:!0},{provide:fa,useExisting:Ig,multi:!0},{provide:ma,useExisting:Ag,multi:!0},{provide:hi,useExisting:Sg,multi:!0},{provide:va,useExisting:Eg,multi:!0}],imports:[k,oo.withConfigFactory(Dg)]});let n=i;return n})(),If=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=B({type:i}),i.\u0275inj=M({imports:[Ng,bg,kd]});let n=i;return n})();export{X as CONFIGURATOR_DATA,Bo as CONFIGURATOR_FEATURE,Fo as ConfigFormUpdateEvent,m as Configurator,xf as ConfiguratorActions,_p as ConfiguratorAddToCartButtonComponent,hp as ConfiguratorAddToCartButtonModule,qe as ConfiguratorAttributeBaseComponent,Op as ConfiguratorAttributeCheckBoxComponent,Ep as ConfiguratorAttributeCheckBoxListComponent,wp as ConfiguratorAttributeCheckboxListModule,Ap as ConfiguratorAttributeCheckboxModule,Cp as ConfiguratorAttributeCompositionConfig,Ae as ConfiguratorAttributeCompositionContext,yp as ConfiguratorAttributeCompositionDirective,ta as ConfiguratorAttributeCompositionModule,Eo as ConfiguratorAttributeDropDownComponent,Rp as ConfiguratorAttributeDropDownModule,xp as ConfiguratorAttributeFooterComponent,bp as ConfiguratorAttributeFooterModule,Ip as ConfiguratorAttributeHeaderComponent,Tp as ConfiguratorAttributeHeaderModule,ni as ConfiguratorAttributeInputFieldComponent,Ir as ConfiguratorAttributeInputFieldModule,ia as ConfiguratorAttributeMultiSelectionBaseComponent,Dp as ConfiguratorAttributeMultiSelectionBundleComponent,Np as ConfiguratorAttributeMultiSelectionBundleModule,wo as ConfiguratorAttributeMultiSelectionImageComponent,Pp as ConfiguratorAttributeMultiSelectionImageModule,Vp as ConfiguratorAttributeNotSupportedComponent,Up as ConfiguratorAttributeNotSupportedModule,br as ConfiguratorAttributeNumericInputFieldComponent,Tr as ConfiguratorAttributeNumericInputFieldModule,Fp as ConfiguratorAttributeNumericInputFieldService,rt as ConfiguratorAttributePriceChangeService,yr as ConfiguratorAttributeProductCardComponent,xr as ConfiguratorAttributeProductCardModule,It as ConfiguratorAttributeQuantityComponent,Tt as ConfiguratorAttributeQuantityModule,Ut as ConfiguratorAttributeQuantityService,Oo as ConfiguratorAttributeRadioButtonComponent,Gp as ConfiguratorAttributeRadioButtonModule,Mp as ConfiguratorAttributeReadOnlyComponent,Bp as ConfiguratorAttributeReadOnlyModule,cn as ConfiguratorAttributeSingleSelectionBaseComponent,$p as ConfiguratorAttributeSingleSelectionBundleComponent,Lp as ConfiguratorAttributeSingleSelectionBundleDropdownComponent,kp as ConfiguratorAttributeSingleSelectionBundleDropdownModule,jp as ConfiguratorAttributeSingleSelectionBundleModule,Ao as ConfiguratorAttributeSingleSelectionImageComponent,qp as ConfiguratorAttributeSingleSelectionImageModule,ua as ConfiguratorBasicEffectService,Cr as ConfiguratorCartService,ie as ConfiguratorCommonsService,Kp as ConfiguratorConflictAndErrorMessagesComponent,Qp as ConfiguratorConflictAndErrorMessagesModule,Wp as ConfiguratorConflictDescriptionComponent,Hp as ConfiguratorConflictDescriptionModule,Jp as ConfiguratorConflictSolverDialogComponent,ed as ConfiguratorConflictSolverDialogLauncherService,id as ConfiguratorConflictSolverDialogModule,Yp as ConfiguratorConflictSuggestionComponent,zp as ConfiguratorConflictSuggestionModule,sa as ConfiguratorCoreConfig,Xp as ConfiguratorExitButtonComponent,Zp as ConfiguratorExitButtonModule,St as ConfiguratorExpertModeService,nd as ConfiguratorFormComponent,rd as ConfiguratorFormModule,Sr as ConfiguratorGroupComponent,ad as ConfiguratorGroupMenuComponent,cd as ConfiguratorGroupMenuModule,Er as ConfiguratorGroupModule,Jo as ConfiguratorGroupStatusService,sd as ConfiguratorGroupTitleComponent,ud as ConfiguratorGroupTitleModule,Ye as ConfiguratorGroupsService,xg as ConfiguratorLogoutEventListener,en as ConfiguratorMessageConfig,ld as ConfiguratorOverviewAttributeComponent,na as ConfiguratorOverviewAttributeModule,pd as ConfiguratorOverviewBundleAttributeComponent,dd as ConfiguratorOverviewBundleAttributeModule,ra as ConfiguratorOverviewFilterBarComponent,aa as ConfiguratorOverviewFilterBarModule,gd as ConfiguratorOverviewFilterButtonComponent,fd as ConfiguratorOverviewFilterButtonModule,oa as ConfiguratorOverviewFilterComponent,md as ConfiguratorOverviewFilterDialogComponent,_d as ConfiguratorOverviewFilterDialogModule,wr as ConfiguratorOverviewFilterModule,hd as ConfiguratorOverviewFormComponent,Cd as ConfiguratorOverviewFormModule,yd as ConfiguratorOverviewMenuComponent,ca as ConfiguratorOverviewMenuModule,xd as ConfiguratorOverviewNotificationBannerComponent,bd as ConfiguratorOverviewNotificationBannerModule,Id as ConfiguratorOverviewSidebarComponent,Td as ConfiguratorOverviewSidebarModule,Sd as ConfiguratorPreviousNextButtonsComponent,Ed as ConfiguratorPreviousNextButtonsModule,Pe as ConfiguratorPriceComponent,Ve as ConfiguratorPriceModule,wd as ConfiguratorPriceSummaryComponent,Od as ConfiguratorPriceSummaryModule,Ad as ConfiguratorProductTitleComponent,Fd as ConfiguratorProductTitleModule,ea as ConfiguratorQuantityService,Rd as ConfiguratorRestartDialogComponent,Nd as ConfiguratorRestartDialogModule,$d as ConfiguratorRouterListener,jd as ConfiguratorRouterModule,bf as ConfiguratorSelectors,xt as ConfiguratorShowMoreComponent,bt as ConfiguratorShowMoreModule,de as ConfiguratorStorefrontUtilsService,Pd as ConfiguratorTabBarComponent,Vd as ConfiguratorTabBarModule,Vt as ConfiguratorUISettingsConfig,Gd as ConfiguratorUpdateMessageComponent,Md as ConfiguratorUpdateMessageModule,Pt as ConfiguratorUtilsService,Bd as ConfiguratorVariantCarouselComponent,Ld as ConfiguratorVariantCarouselModule,j as OccConfigurator,Ig as OccConfiguratorVariantAddToCartSerializer,Tg as OccConfiguratorVariantNormalizer,Sg as OccConfiguratorVariantOverviewNormalizer,Eg as OccConfiguratorVariantOverviewSerializer,wg as OccConfiguratorVariantPriceSummaryNormalizer,Og as OccConfiguratorVariantSerializer,Ag as OccConfiguratorVariantUpdateCartEntrySerializer,Ro as RulebasedConfiguratorAdapter,kd as RulebasedConfiguratorComponentsModule,yt as RulebasedConfiguratorConnector,bg as RulebasedConfiguratorCoreModule,If as RulebasedConfiguratorModule,fa as VARIANT_CONFIGURATOR_ADD_TO_CART_SERIALIZER,Ht as VARIANT_CONFIGURATOR_NORMALIZER,hi as VARIANT_CONFIGURATOR_OVERVIEW_NORMALIZER,va as VARIANT_CONFIGURATOR_OVERVIEW_SERIALIZER,ga as VARIANT_CONFIGURATOR_PRICE_NORMALIZER,da as VARIANT_CONFIGURATOR_PRICE_SUMMARY_NORMALIZER,pa as VARIANT_CONFIGURATOR_SERIALIZER,ma as VARIANT_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER,Fg as VariantConfiguratorOccAdapter,Ng as VariantConfiguratorOccModule};
